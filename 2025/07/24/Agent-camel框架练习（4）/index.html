<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.23.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="åŸä½œè€…é“¾æ¥ğŸ”—ï¼šhttps:&#x2F;&#x2F;fmhw1n4zpn.feishu.cn&#x2F;docx&#x2F;AF4XdOZpIo6TOaxzDK8cxInNnCe Task1é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­https:&#x2F;&#x2F;github.com&#x2F;camel-ai&#x2F;camel&#x2F;blob&#x2F;master&#x2F;camel&#x2F;retrievers&#x2F;cohere_rerank_retr">
<meta property="og:type" content="article">
<meta property="og:title" content="Agent-camelæ¡†æ¶ç»ƒä¹ ï¼ˆ4ï¼‰">
<meta property="og:url" content="http://example.com/2025/07/24/Agent-camel%E6%A1%86%E6%9E%B6%E7%BB%83%E4%B9%A0%EF%BC%884%EF%BC%89/index.html">
<meta property="og:site_name" content="_010001SUTANG_">
<meta property="og:description" content="åŸä½œè€…é“¾æ¥ğŸ”—ï¼šhttps:&#x2F;&#x2F;fmhw1n4zpn.feishu.cn&#x2F;docx&#x2F;AF4XdOZpIo6TOaxzDK8cxInNnCe Task1é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­https:&#x2F;&#x2F;github.com&#x2F;camel-ai&#x2F;camel&#x2F;blob&#x2F;master&#x2F;camel&#x2F;retrievers&#x2F;cohere_rerank_retr">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-07-24T13:40:59.000Z">
<meta property="article:modified_time" content="2025-07-25T12:32:20.762Z">
<meta property="article:author" content="Su Tang">
<meta property="article:tag" content="AI">
<meta property="article:tag" content="CAMEL">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/2025/07/24/Agent-camel%E6%A1%86%E6%9E%B6%E7%BB%83%E4%B9%A0%EF%BC%884%EF%BC%89/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2025/07/24/Agent-camel%E6%A1%86%E6%9E%B6%E7%BB%83%E4%B9%A0%EF%BC%884%EF%BC%89/","path":"2025/07/24/Agent-camelæ¡†æ¶ç»ƒä¹ ï¼ˆ4ï¼‰/","title":"Agent-camelæ¡†æ¶ç»ƒä¹ ï¼ˆ4ï¼‰"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Agent-camelæ¡†æ¶ç»ƒä¹ ï¼ˆ4ï¼‰ | _010001SUTANG_</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  






  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">_010001SUTANG_</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">To ancient evenings and distant music.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Task1"><span class="nav-number">1.</span> <span class="nav-text">Task1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%B0%83%E7%94%A8API%E6%88%96%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2reranker%E6%A8%A1%E5%9E%8B%E6%9D%A5%E5%BF%AB%E9%80%9F%E5%B0%86rerank%E6%A8%A1%E5%9D%97%E9%9B%86%E6%88%90%E5%88%B0RAG%E5%BA%94%E7%94%A8%E4%B8%AD"><span class="nav-number">1.1.</span> <span class="nav-text">é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Task2"><span class="nav-number">2.</span> <span class="nav-text">Task2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%92%8C%E7%AE%80%E5%8D%95%E7%9A%84%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B%E5%9C%A8CAMEL%E6%A1%86%E6%9E%B6%E4%B8%8B%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AAReRanker%EF%BC%8C%E8%BE%BE%E6%88%90%E9%87%8D%E6%8E%92%E7%9A%84%E6%95%88%E6%9E%9C%EF%BC%88%E7%81%B5%E6%84%9F%E6%9D%A5%E8%87%AACAMEL-Shanghai-Hackathon%E9%9F%AC%E5%AD%90%E5%93%A5QAQ%EF%BC%89"><span class="nav-number">2.1.</span> <span class="nav-text">ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å’Œç®€å•çš„æç¤ºè¯å·¥ç¨‹åœ¨CAMELæ¡†æ¶ä¸‹å®ç°ä¸€ä¸ªReRankerï¼Œè¾¾æˆé‡æ’çš„æ•ˆæœï¼ˆçµæ„Ÿæ¥è‡ªCAMEL Shanghai HackathonéŸ¬å­å“¥QAQï¼‰</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8ETask1%E5%92%8CTask2%E7%9A%84%E5%8C%BA%E5%88%AB%E6%80%9D%E8%80%83%EF%BC%9A%E8%BF%99%E4%B8%A4%E4%B8%AA%E4%BB%BB%E5%8A%A1%E9%83%BD%E6%B6%89%E5%8F%8A%E5%9C%A8RAG%E5%BA%94%E7%94%A8%E4%B8%AD%E9%9B%86%E6%88%90%E9%87%8D%E6%8E%92%EF%BC%88ReRanker%EF%BC%89%E6%A8%A1%E5%9D%97%EF%BC%8C%E4%BD%86%E5%AE%83%E4%BB%AC%E5%9C%A8%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E5%92%8C%E6%89%80%E4%BE%9D%E8%B5%96%E7%9A%84%E6%8A%80%E6%9C%AF%E6%A0%88%E4%B8%8A%E5%AD%98%E5%9C%A8%E6%98%BE%E8%91%97%E5%8C%BA%E5%88%AB%EF%BC%9A"><span class="nav-number">2.2.</span> <span class="nav-text">å…³äºTask1å’ŒTask2çš„åŒºåˆ«æ€è€ƒï¼šè¿™ä¸¤ä¸ªä»»åŠ¡éƒ½æ¶‰åŠåœ¨RAGåº”ç”¨ä¸­é›†æˆé‡æ’ï¼ˆReRankerï¼‰æ¨¡å—ï¼Œä½†å®ƒä»¬åœ¨å®ç°æ–¹å¼å’Œæ‰€ä¾èµ–çš„æŠ€æœ¯æ ˆä¸Šå­˜åœ¨æ˜¾è‘—åŒºåˆ«ï¼š</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Task-1%EF%BC%9A%E5%9F%BA%E4%BA%8EAPI%E8%B0%83%E7%94%A8%E6%88%96%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2%E7%9A%84%E9%A2%84%E8%AE%AD%E7%BB%83Reranker%E6%A8%A1%E5%9E%8B%E9%9B%86%E6%88%90"><span class="nav-number">2.2.1.</span> <span class="nav-text">Task 1ï¼šåŸºäºAPIè°ƒç”¨æˆ–æœ¬åœ°éƒ¨ç½²çš„é¢„è®­ç»ƒRerankeræ¨¡å‹é›†æˆ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Task-2%EF%BC%9A%E5%9F%BA%E4%BA%8E%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E5%92%8C%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B%E5%AE%9E%E7%8E%B0Reranker"><span class="nav-number">2.2.2.</span> <span class="nav-text">Task 2ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œæç¤ºè¯å·¥ç¨‹å®ç°Reranker</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E5%8C%BA%E5%88%AB%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="nav-number">2.3.</span> <span class="nav-text">æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Task3"><span class="nav-number">3.</span> <span class="nav-text">Task3</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA%E6%9C%AC%E6%95%99%E7%A8%8B%E6%96%87%E6%A1%A3%E4%BD%9C%E4%B8%BA%E4%B8%80%E4%B8%AAPDF%E6%96%87%E4%BB%B6%EF%BC%8C%E5%B0%9D%E8%AF%95%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%85%B7%E6%9C%89%E5%A4%9A%E6%A8%A1%E6%80%81%E6%A3%80%E7%B4%A2%E8%83%BD%E5%8A%9B%E7%9A%84RAG%E5%BA%94%E7%94%A8%E6%9D%A5%E5%B8%AE%E5%8A%A9%E5%85%B6%E4%BB%96%E5%AD%A6%E4%B9%A0%E8%80%85%E5%9B%9E%E7%AD%94%E9%97%AE%E9%A2%98%E3%80%82"><span class="nav-number">3.1.</span> <span class="nav-text">å¯¼å‡ºæœ¬æ•™ç¨‹æ–‡æ¡£ä½œä¸ºä¸€ä¸ªPDFæ–‡ä»¶ï¼Œå°è¯•æ­å»ºä¸€ä¸ªå…·æœ‰å¤šæ¨¡æ€æ£€ç´¢èƒ½åŠ›çš„RAGåº”ç”¨æ¥å¸®åŠ©å…¶ä»–å­¦ä¹ è€…å›ç­”é—®é¢˜ã€‚</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8F%E5%A4%9A%E6%A8%A1%E6%80%81RAG%E7%B3%BB%E7%BB%9F"><span class="nav-number">3.1.1.</span> <span class="nav-text">äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%AE%80%E4%BB%8B"><span class="nav-number">3.1.1.1.</span> <span class="nav-text">é¡¹ç›®ç®€ä»‹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-number">3.1.1.2.</span> <span class="nav-text">æ ¸å¿ƒç‰¹æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A4%9A%E6%A8%A1%E6%80%81%E5%86%85%E5%AE%B9%E5%A4%84%E7%90%86"><span class="nav-number">3.1.1.2.1.</span> <span class="nav-text">å¤šæ¨¡æ€å†…å®¹å¤„ç†</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%A4%9A%E7%A7%8D%E6%A3%80%E7%B4%A2%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.1.1.2.2.</span> <span class="nav-text">å¤šç§æ£€ç´¢æ¨¡å¼</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#AI%E6%99%BA%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-number">3.1.1.2.3.</span> <span class="nav-text">AIæ™ºèƒ½åˆ†æ</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E7%A0%94%E7%A9%B6%E7%B3%BB%E7%BB%9F"><span class="nav-number">3.1.1.2.4.</span> <span class="nav-text">ç½‘é¡µç ”ç©¶ç³»ç»Ÿ</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BA%A4%E4%BA%92%E5%BC%8F%E4%BD%93%E9%AA%8C"><span class="nav-number">3.1.1.2.5.</span> <span class="nav-text">äº¤äº’å¼ä½“éªŒ</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84"><span class="nav-number">3.1.1.3.</span> <span class="nav-text">ç³»ç»Ÿæ¶æ„</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E6%A1%86%E6%9E%B6"><span class="nav-number">3.1.1.4.</span> <span class="nav-text">æ ¸å¿ƒæ¡†æ¶</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%87%E6%A1%A3%E5%A4%84%E7%90%86"><span class="nav-number">3.1.1.5.</span> <span class="nav-text">æ–‡æ¡£å¤„ç†</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A3%80%E7%B4%A2%E5%92%8C%E5%AD%98%E5%82%A8"><span class="nav-number">3.1.1.6.</span> <span class="nav-text">æ£€ç´¢å’Œå­˜å‚¨</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E7%88%AC%E5%8F%96"><span class="nav-number">3.1.1.7.</span> <span class="nav-text">ç½‘é¡µçˆ¬å–</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="nav-number">3.1.2.</span> <span class="nav-text">åŸºæœ¬ä½¿ç”¨æµç¨‹</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">é«˜çº§åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%BD%91%E9%A1%B5%E7%A0%94%E7%A9%B6%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.1.2.1.1.</span> <span class="nav-text">ç½‘é¡µç ”ç©¶æ¨¡å¼</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A3%80%E7%B4%A2%E5%8F%82%E6%95%B0"><span class="nav-number">3.1.2.1.2.</span> <span class="nav-text">è‡ªå®šä¹‰æ£€ç´¢å‚æ•°</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A3%80%E7%B4%A2%E6%A8%A1%E5%BC%8F"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">æ£€ç´¢æ¨¡å¼</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E6%A3%80%E7%B4%A2"><span class="nav-number">3.1.2.2.1.</span> <span class="nav-text">å¿«é€Ÿæ£€ç´¢</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%B7%B1%E5%BA%A6%E6%A3%80%E7%B4%A2"><span class="nav-number">3.1.2.2.2.</span> <span class="nav-text">æ·±åº¦æ£€ç´¢</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%BB%E9%A2%98%E6%A3%80%E7%B4%A2"><span class="nav-number">3.1.2.2.3.</span> <span class="nav-text">ä¸»é¢˜æ£€ç´¢</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="nav-number">3.1.3.</span> <span class="nav-text">å®ç°ä»£ç ï¼š</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81%E4%B8%BB%E8%A6%81%E5%88%86%E4%B8%BA3%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%9A"><span class="nav-number">3.1.3.1.</span> <span class="nav-text">å®ç°ä»£ç ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%88%91%E4%BB%AC%E8%BF%90%E8%A1%8C%E4%B8%80%E4%B8%8B%E6%95%B4%E4%B8%AA%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%88%86%E5%88%AB%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%E5%90%84%E4%B8%AA%E6%A3%80%E7%B4%A2%E5%8A%9F%E8%83%BD%E7%9A%84%E5%B7%AE%E5%BC%82%EF%BC%9A"><span class="nav-number">3.1.3.2.</span> <span class="nav-text">æˆ‘ä»¬è¿è¡Œä¸€ä¸‹æ•´ä¸ªç³»ç»Ÿï¼Œåˆ†åˆ«æµ‹è¯•ä¸€ä¸‹å„ä¸ªæ£€ç´¢åŠŸèƒ½çš„å·®å¼‚ï¼š</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E7%B3%BB%E7%BB%9F%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F%EF%BC%8C%E6%9C%AC%E5%9C%B0PDF%E6%96%87%E4%BB%B6%E4%B9%9F%E6%88%90%E5%8A%9F%E5%8A%A0%E8%BD%BD%E4%BA%86%EF%BC%8C%E7%8E%B0%E5%9C%A8%E6%88%91%E4%BB%AC%E5%85%88%E8%BF%9B%E8%A1%8C%E5%BF%AB%E9%80%9F%E6%A3%80%E7%B4%A2%E7%9A%84%E6%BC%94%E7%A4%BA"><span class="nav-number">3.1.3.3.</span> <span class="nav-text">æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼Œæœ¬åœ°PDFæ–‡ä»¶ä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œç°åœ¨æˆ‘ä»¬å…ˆè¿›è¡Œå¿«é€Ÿæ£€ç´¢çš„æ¼”ç¤º:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8E%A5%E7%9D%80%E6%88%91%E4%BB%AC%E6%B5%8B%E8%AF%95%E6%B7%B1%E5%BA%A6%E6%A3%80%E7%B4%A2%E7%9A%84%E6%95%88%E6%9E%9C"><span class="nav-number">3.1.3.4.</span> <span class="nav-text">æ¥ç€æˆ‘ä»¬æµ‹è¯•æ·±åº¦æ£€ç´¢çš„æ•ˆæœ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9C%80%E5%90%8E%E6%88%91%E4%BB%AC%E6%9D%A5%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8B%E4%B8%BB%E9%A2%98%E6%A3%80%E7%B4%A2%EF%BC%9A"><span class="nav-number">3.1.3.5.</span> <span class="nav-text">æœ€åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¸»é¢˜æ£€ç´¢ï¼š</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E%E4%BB%A5%E4%B8%8A%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C%EF%BC%8C%E6%88%91%E4%BB%AC%E6%9D%A5%E6%80%BB%E7%BB%93%E4%B8%80%E4%B8%8B%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C"><span class="nav-number">3.1.3.6.</span> <span class="nav-text">åŸºäºä»¥ä¸Šè¿è¡Œç»“æœï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹åŠŸèƒ½å®ç°æ•ˆæœ</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Su Tang</p>
  <div class="site-description" itemprop="description">nothing is anything</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/07/24/Agent-camel%E6%A1%86%E6%9E%B6%E7%BB%83%E4%B9%A0%EF%BC%884%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Su Tang">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="_010001SUTANG_">
      <meta itemprop="description" content="nothing is anything">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Agent-camelæ¡†æ¶ç»ƒä¹ ï¼ˆ4ï¼‰ | _010001SUTANG_">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Agent-camelæ¡†æ¶ç»ƒä¹ ï¼ˆ4ï¼‰
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2025-07-24 21:40:59" itemprop="dateCreated datePublished" datetime="2025-07-24T21:40:59+08:00">2025-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-07-25 20:32:20" itemprop="dateModified" datetime="2025-07-25T20:32:20+08:00">2025-07-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%87%AA%E4%B8%BB%E7%BB%83%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">è‡ªä¸»ç»ƒä¹ </span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><hr>
<p>åŸä½œè€…é“¾æ¥ğŸ”—ï¼š<a target="_blank" rel="noopener" href="https://fmhw1n4zpn.feishu.cn/docx/AF4XdOZpIo6TOaxzDK8cxInNnCe">https://fmhw1n4zpn.feishu.cn/docx/AF4XdOZpIo6TOaxzDK8cxInNnCe</a></p>
<h2 id="Task1"><a href="#Task1" class="headerlink" title="Task1"></a>Task1</h2><h3 id="é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­"><a href="#é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­" class="headerlink" title="é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­"></a>é€šè¿‡è°ƒç”¨APIæˆ–æœ¬åœ°éƒ¨ç½²rerankeræ¨¡å‹æ¥å¿«é€Ÿå°†rerankæ¨¡å—é›†æˆåˆ°RAGåº”ç”¨ä¸­</h3><p><a target="_blank" rel="noopener" href="https://github.com/camel-ai/camel/blob/master/camel/retrievers/cohere_rerank_retriever.py">https://github.com/camel-ai/camel/blob/master/camel/retrievers/cohere_rerank_retriever.py</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç²¾ç®€ç‰ˆRerankerç³»ç»Ÿï¼šåœ¨CAMELæ¡†æ¶ä¸‹é›†æˆæ¨¡æ‹Ÿçš„å¤–éƒ¨Rerankeræ¨¡å‹</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯¥è„šæœ¬æ—¨åœ¨æ¸…æ™°åœ°å±•ç¤ºå¦‚ä½•å°†ä¸€ä¸ªç‹¬ç«‹çš„Rerankeræ¨¡å—ï¼ˆé€šè¿‡æ¨¡æ‹Ÿå¤–éƒ¨APIæˆ–æœ¬åœ°éƒ¨ç½²æ¨¡å‹ï¼‰</span></span><br><span class="line"><span class="string">é›†æˆåˆ°RAGåº”ç”¨ä¸­ï¼Œä»¥å®ç°æ–‡æ¡£é‡æ’ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span>, <span class="type">Any</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥CAMELæ¡†æ¶æ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType</span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> ChatAgent</span><br><span class="line"><span class="keyword">from</span> camel.embeddings <span class="keyword">import</span> SentenceTransformerEncoder</span><br><span class="line"><span class="keyword">from</span> camel.retrievers <span class="keyword">import</span> VectorRetriever</span><br><span class="line"><span class="keyword">from</span> camel.storages.vectordb_storages <span class="keyword">import</span> QdrantStorage</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥ç¯å¢ƒå˜é‡æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MinimalRerankerSystem</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    ç²¾ç®€ç‰ˆRerankerç³»ç»Ÿç±»</span></span><br><span class="line"><span class="string">    åŒ…å«çŸ¥è¯†åº“è®¾ç½®ã€æ¨¡æ‹Ÿçš„å¤–éƒ¨Rerankerå’Œç­”æ¡ˆç”Ÿæˆçš„æ ¸å¿ƒåŠŸèƒ½</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, api_key: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆå§‹åŒ–ç²¾ç®€ç‰ˆRerankerç³»ç»Ÿ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            api_key: ModelScope APIå¯†é’¥</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.api_key = api_key</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ (ç”¨äºå‘é‡æ£€ç´¢ï¼ŒRerankeræœ¬èº«ä¸ç›´æ¥ä½¿ç”¨)</span></span><br><span class="line">        <span class="variable language_">self</span>.embedding_model = SentenceTransformerEncoder(</span><br><span class="line">            model_name=<span class="string">&#x27;intfloat/e5-large-v2&#x27;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å‘é‡å­˜å‚¨ (ç”¨äºæ¼”ç¤ºæ–‡æ¡£æ£€ç´¢ï¼Œä»¥ä¾¿Rerankeræœ‰æ–‡æ¡£å¯é‡æ’)</span></span><br><span class="line">        <span class="variable language_">self</span>.vector_storage = QdrantStorage(</span><br><span class="line">            vector_dim=<span class="variable language_">self</span>.embedding_model.get_output_dim(),</span><br><span class="line">            collection=<span class="string">&quot;minimal_reranker_collection&quot;</span>,</span><br><span class="line">            path=<span class="string">&quot;storage_minimal_reranker&quot;</span>,</span><br><span class="line">            collection_name=<span class="string">&quot;ç²¾ç®€é‡æ’çŸ¥è¯†åº“&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å‘é‡æ£€ç´¢å™¨</span></span><br><span class="line">        <span class="variable language_">self</span>.vector_retriever = VectorRetriever(</span><br><span class="line">            embedding_model=<span class="variable language_">self</span>.embedding_model,</span><br><span class="line">            storage=<span class="variable language_">self</span>.vector_storage</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–LLMæ¨¡å‹ (ä»…ç”¨äºç­”æ¡ˆç”Ÿæˆ)</span></span><br><span class="line">        <span class="variable language_">self</span>.model = ModelFactory.create(</span><br><span class="line">            model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">            model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">            url=<span class="string">&#x27;https://api-inference.modelscope.cn/v1/&#x27;</span>,</span><br><span class="line">            api_key=<span class="variable language_">self</span>.api_key</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–RAGç­”æ¡ˆç”Ÿæˆä»£ç†</span></span><br><span class="line">        <span class="variable language_">self</span>._init_agents()</span><br><span class="line">        <span class="variable language_">self</span>.knowledge_base_ready = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_agents</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–RAGç­”æ¡ˆç”Ÿæˆä»£ç†&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># RAGå›ç­”ç”Ÿæˆä»£ç†</span></span><br><span class="line">        rag_sys_msg = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä½ æ˜¯ä¸€ä¸ªå¸®åŠ©å›ç­”é—®é¢˜çš„åŠ©æ‰‹ã€‚</span></span><br><span class="line"><span class="string">        æˆ‘ä¼šç»™ä½ åŸå§‹æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">        è¯·æ ¹æ®æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å›ç­”åŸå§‹æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="string">        å¦‚æœä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è¶³ä»¥å›ç­”é—®é¢˜ï¼Œè¯·è¯´&quot;æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œæˆ‘æ— æ³•å®Œå…¨å›ç­”è¿™ä¸ªé—®é¢˜&quot;ã€‚</span></span><br><span class="line"><span class="string">        è¯·ç¡®ä¿å›ç­”å‡†ç¡®ã€å®Œæ•´ä¸”æœ‰æ¡ç†ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.rag_agent = ChatAgent(</span><br><span class="line">            system_message=rag_sys_msg,</span><br><span class="line">            model=<span class="variable language_">self</span>.model</span><br><span class="line">        )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_knowledge_base</span>(<span class="params">self, pdf_url: <span class="built_in">str</span> = <span class="literal">None</span>, pdf_path: <span class="built_in">str</span> = <span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è®¾ç½®çŸ¥è¯†åº“ï¼Œç”¨äºæä¾›å¾…é‡æ’çš„æ–‡æ¡£</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            pdf_url: PDFæ–‡ä»¶çš„URL</span></span><br><span class="line"><span class="string">            pdf_path: æœ¬åœ°PDFæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        os.makedirs(<span class="string">&#x27;local_data&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pdf_url:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ä¸‹è½½PDFæ–‡ä»¶...&quot;</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                response = requests.get(pdf_url, timeout=<span class="number">30</span>)</span><br><span class="line">                response.raise_for_status()</span><br><span class="line">                pdf_path = <span class="string">&#x27;local_data/knowledge_base.pdf&#x27;</span></span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(pdf_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">                    file.write(response.content)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âœ“ PDFæ–‡ä»¶å·²ä¸‹è½½åˆ°: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;PDFä¸‹è½½å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pdf_path:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pdf_path):</span><br><span class="line">                <span class="keyword">raise</span> FileNotFoundError(<span class="string">f&quot;PDFæ–‡ä»¶ä¸å­˜åœ¨: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨å¤„ç†PDFæ–‡ä»¶å¹¶å»ºç«‹å‘é‡æ•°æ®åº“...&quot;</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="variable language_">self</span>.vector_retriever.process(content=pdf_path)</span><br><span class="line">                <span class="variable language_">self</span>.knowledge_base_ready = <span class="literal">True</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;çŸ¥è¯†åº“è®¾ç½®å®Œæˆï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;çŸ¥è¯†åº“è®¾ç½®å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;å¿…é¡»æä¾› pdf_url æˆ– pdf_path å‚æ•°&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">retrieve_documents</span>(<span class="params">self, query: <span class="built_in">str</span>, top_k: <span class="built_in">int</span> = <span class="number">5</span></span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢åˆæ­¥æ–‡æ¡£</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            top_k: è¿”å›çš„æ–‡æ¡£æ•°é‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            åˆæ­¥æ£€ç´¢åˆ°çš„æ–‡æ¡£åˆ—è¡¨</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.knowledge_base_ready:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;çŸ¥è¯†åº“æœªå‡†å¤‡å¥½ï¼Œæ— æ³•æ£€ç´¢æ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ­£åœ¨åˆæ­¥æ£€ç´¢æ–‡æ¡£ (Top-<span class="subst">&#123;top_k&#125;</span>)...&quot;</span>)</span><br><span class="line">        retrieved_docs = <span class="variable language_">self</span>.vector_retriever.query(query=query, top_k=top_k)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âœ“ åˆæ­¥æ£€ç´¢åˆ° <span class="subst">&#123;<span class="built_in">len</span>(retrieved_docs)&#125;</span> ä¸ªæ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> retrieved_docs</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">perform_external_rerank</span>(<span class="params">self, query: <span class="built_in">str</span>, documents: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]</span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        æ¨¡æ‹Ÿå¤–éƒ¨Rerankeræ¨¡å‹å¯¹æ–‡æ¡£è¿›è¡Œé‡æ’ã€‚</span></span><br><span class="line"><span class="string">        æ­¤å‡½æ•°æ¨¡æ‹Ÿäº†è°ƒç”¨å¤–éƒ¨APIæˆ–æœ¬åœ°éƒ¨ç½²çš„Rerankeræ¨¡å‹ã€‚</span></span><br><span class="line"><span class="string">        è¿™é‡Œä½¿ç”¨ç®€å•çš„å…³é”®è¯åŒ¹é…ä½œä¸ºæ¨¡æ‹Ÿçš„é‡æ’é€»è¾‘ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            documents: å¾…é‡æ’çš„æ–‡æ¡£åˆ—è¡¨ï¼Œæ¯ä¸ªæ–‡æ¡£å­—å…¸åŒ…å« &#x27;text&#x27; é”®</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            æ ¹æ®æ¨¡æ‹Ÿçš„å¤–éƒ¨Rerankeré‡æ’åçš„æ–‡æ¡£åˆ—è¡¨ï¼Œæ¯ä¸ªæ–‡æ¡£ä¼šæ·»åŠ  &#x27;relevance_score&#x27; å­—æ®µã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> documents:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ²¡æœ‰æ–‡æ¡£å¯ä¾›é‡æ’ï¼Œè·³è¿‡å¤–éƒ¨Rerankerã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ä½¿ç”¨æ¨¡æ‹Ÿçš„å¤–éƒ¨Rerankerè¿›è¡Œæ–‡æ¡£é‡æ’...&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å°†æŸ¥è¯¢åˆ†å‰²æˆå…³é”®è¯ï¼ˆè¿™é‡Œç®€å•åœ°æŒ‰ç©ºæ ¼åˆ†å‰²ï¼Œå®é™…Rerankerä¼šè¿›è¡Œæ›´å¤æ‚çš„å¤„ç†ï¼‰</span></span><br><span class="line">        query_keywords = <span class="built_in">set</span>(query.lower().split())</span><br><span class="line"></span><br><span class="line">        scored_documents = []</span><br><span class="line">        <span class="keyword">for</span> doc <span class="keyword">in</span> documents:</span><br><span class="line">            doc_text_lower = doc[<span class="string">&#x27;text&#x27;</span>].lower()</span><br><span class="line">            <span class="comment"># æ¨¡æ‹Ÿè®¡ç®—ç›¸å…³æ€§åˆ†æ•°ï¼šæ–‡æ¡£ä¸­åŒ…å«çš„æŸ¥è¯¢å…³é”®è¯è¶Šå¤šï¼Œåˆ†æ•°è¶Šé«˜</span></span><br><span class="line">            relevance_score = <span class="built_in">sum</span>(<span class="number">1</span> <span class="keyword">for</span> keyword <span class="keyword">in</span> query_keywords <span class="keyword">if</span> keyword <span class="keyword">in</span> doc_text_lower)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä¹Ÿå¯ä»¥æ·»åŠ ä¸€äº›éšæœºæ€§æ¥æ¨¡æ‹ŸçœŸå®æ¨¡å‹çš„å¤æ‚æ€§</span></span><br><span class="line">            <span class="comment"># import random</span></span><br><span class="line">            <span class="comment"># relevance_score += random.uniform(0, 0.1) </span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># å°†åˆ†æ•°æ·»åŠ åˆ°æ–‡æ¡£å­—å…¸ä¸­</span></span><br><span class="line">            doc_with_score = doc.copy()</span><br><span class="line">            doc_with_score[<span class="string">&#x27;relevance_score&#x27;</span>] = relevance_score</span><br><span class="line">            scored_documents.append(doc_with_score)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ ¹æ®ç›¸å…³æ€§åˆ†æ•°é™åºæ’åº</span></span><br><span class="line">        reranked_documents = <span class="built_in">sorted</span>(scored_documents, key=<span class="keyword">lambda</span> x: x.get(<span class="string">&#x27;relevance_score&#x27;</span>, <span class="number">0</span>), reverse=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âœ“ æ¨¡æ‹Ÿå¤–éƒ¨Rerankeré‡æ’å®Œæˆã€‚&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> reranked_documents</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_answer</span>(<span class="params">self, query: <span class="built_in">str</span>, retrieved_docs: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            retrieved_docs: æ£€ç´¢åˆ°çš„æ–‡æ¡£åˆ—è¡¨</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            ç”Ÿæˆçš„ç­”æ¡ˆ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> retrieved_docs:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œæˆ‘æ— æ³•å®Œå…¨å›ç­”è¿™ä¸ªé—®é¢˜ã€‚&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„å»ºä¸Šä¸‹æ–‡</span></span><br><span class="line">        context = <span class="string">&quot;\n\n&quot;</span>.join([doc[<span class="string">&#x27;text&#x27;</span>] <span class="keyword">for</span> doc <span class="keyword">in</span> retrieved_docs])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ„å»ºæç¤º</span></span><br><span class="line">        prompt = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åŸå§‹æŸ¥è¯¢: <span class="subst">&#123;query&#125;</span></span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯:</span></span><br><span class="line"><span class="string">        <span class="subst">&#123;context&#125;</span></span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        è¯·æ ¹æ®ä¸Šè¿°ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”åŸå§‹æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\næ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...&quot;</span>)</span><br><span class="line">        response = <span class="variable language_">self</span>.rag_agent.step(prompt)</span><br><span class="line">        answer = response.msgs[<span class="number">0</span>].content.strip()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;âœ“ ç­”æ¡ˆç”Ÿæˆå®Œæˆã€‚&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> answer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_reranker_pipeline</span>(<span class="params">self, query: <span class="built_in">str</span>, top_k_initial: <span class="built_in">int</span> = <span class="number">5</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è¿è¡Œé‡æ’å™¨ç®¡é“ï¼šåˆæ­¥æ£€ç´¢ -&gt; å¤–éƒ¨Rerankeré‡æ’ -&gt; ç­”æ¡ˆç”Ÿæˆ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            top_k_initial: åˆæ­¥æ£€ç´¢çš„æ–‡æ¡£æ•°é‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            åŒ…å«åˆæ­¥æ–‡æ¡£ã€é‡æ’æ–‡æ¡£å’Œæœ€ç»ˆç­”æ¡ˆçš„å­—å…¸</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å¼€å§‹è¿è¡ŒRerankerç®¡é“ï¼ŒæŸ¥è¯¢: <span class="subst">&#123;query&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤1: åˆæ­¥æ£€ç´¢æ–‡æ¡£</span></span><br><span class="line">        initial_retrieved_docs = <span class="variable language_">self</span>.retrieve_documents(query, top_k_initial)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤2: å¤–éƒ¨Rerankeré‡æ’æ–‡æ¡£</span></span><br><span class="line">        reranked_docs = <span class="variable language_">self</span>.perform_external_rerank(query, initial_retrieved_docs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤3: åŸºäºé‡æ’åçš„æ–‡æ¡£ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line">        final_answer = <span class="variable language_">self</span>.generate_answer(query, reranked_docs)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Rerankerç®¡é“æ‰§è¡Œå®Œæˆï¼&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;query&quot;</span>: query,</span><br><span class="line">            <span class="string">&quot;initial_retrieved_docs&quot;</span>: initial_retrieved_docs,</span><br><span class="line">            <span class="string">&quot;reranked_docs&quot;</span>: reranked_docs,</span><br><span class="line">            <span class="string">&quot;final_answer&quot;</span>: final_answer</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸»å‡½æ•°ï¼šæ¼”ç¤ºç²¾ç®€ç‰ˆRerankerç³»ç»Ÿçš„ä½¿ç”¨&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line">    load_dotenv()</span><br><span class="line">    api_key = os.getenv(<span class="string">&#x27;MODELSCOPE_SDK_TOKEN&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> api_key:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šè¯·è®¾ç½®MODELSCOPE_SDK_TOKENç¯å¢ƒå˜é‡&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¯·åœ¨.envæ–‡ä»¶ä¸­æ·»åŠ  MODELSCOPE_SDK_TOKEN=ä½ çš„APIå¯†é’¥&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–Rerankerç³»ç»Ÿ</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨åˆå§‹åŒ–Rerankerç³»ç»Ÿ...&quot;</span>)</span><br><span class="line">    reranker_system = MinimalRerankerSystem(api_key)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®çŸ¥è¯†åº“ (ä½¿ç”¨CAMELè®ºæ–‡ä½œä¸ºç¤ºä¾‹)</span></span><br><span class="line">    pdf_url = <span class="string">&quot;https://arxiv.org/pdf/2303.17760.pdf&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\næ­£åœ¨è®¾ç½®çŸ¥è¯†åº“ï¼ˆä½¿ç”¨é»˜è®¤CAMELè®ºæ–‡: <span class="subst">&#123;pdf_url&#125;</span>ï¼‰...&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        reranker_system.setup_knowledge_base(pdf_url=pdf_url)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;çŸ¥è¯†åº“è®¾ç½®å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿è¡Œäº¤äº’å¼ä¼šè¯</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        query = <span class="built_in">input</span>(<span class="string">&quot;\nè¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰: &quot;</span>).strip()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> query.lower() <span class="keyword">in</span> [<span class="string">&#x27;quit&#x27;</span>, <span class="string">&#x27;exit&#x27;</span>, <span class="string">&#x27;é€€å‡º&#x27;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> query:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æŸ¥è¯¢ä¸èƒ½ä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥ã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            results = reranker_system.run_reranker_pipeline(query, top_k_initial=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n--- åŸå§‹æ£€ç´¢ç»“æœ (Top 5) ---&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> results[<span class="string">&#x27;initial_retrieved_docs&#x27;</span>]:</span><br><span class="line">                <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(results[<span class="string">&#x27;initial_retrieved_docs&#x27;</span>]):</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span>: <span class="subst">&#123;doc[<span class="string">&#x27;text&#x27;</span>][:<span class="number">150</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;æ— åŸå§‹æ£€ç´¢æ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n--- å¤–éƒ¨Rerankeré‡æ’åçš„ç»“æœ ---&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> results[<span class="string">&#x27;reranked_docs&#x27;</span>]:</span><br><span class="line">                <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(results[<span class="string">&#x27;reranked_docs&#x27;</span>]):</span><br><span class="line">                    <span class="comment"># æ˜¾ç¤ºæ¨¡æ‹Ÿçš„ç›¸å…³æ€§åˆ†æ•°</span></span><br><span class="line">                    score_info = <span class="string">f&quot; (ç›¸å…³æ€§åˆ†æ•°: <span class="subst">&#123;doc.get(<span class="string">&#x27;relevance_score&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>):<span class="number">.2</span>f&#125;</span>)&quot;</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span><span class="subst">&#123;score_info&#125;</span>: <span class="subst">&#123;doc[<span class="string">&#x27;text&#x27;</span>][:<span class="number">150</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;æ— é‡æ’æ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n--- æœ€ç»ˆç­”æ¡ˆ ---&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(results[<span class="string">&#x27;final_answer&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;\nå‘ç”Ÿé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">import</span> traceback</span><br><span class="line">            traceback.print_exc() <span class="comment"># æ‰“å°è¯¦ç»†é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            continue_choice = <span class="built_in">input</span>(<span class="string">&quot;æ˜¯å¦ç»§ç»­ï¼Ÿ(y/n): &quot;</span>).strip().lower()</span><br><span class="line">            <span class="keyword">if</span> continue_choice != <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥è¿è¡Œçœ‹ä¸€ä¸‹é‡æ’æ•ˆæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Camel_Test_Project&gt; &amp; D:/Download/Python/py-3.11.9/python.exe d:/Camel_Test_Project/Reranker_lite.py  </span><br><span class="line">æ­£åœ¨åˆå§‹åŒ–Rerankerç³»ç»Ÿ...</span><br><span class="line">W0724 23:07:45.865000 37864 site-packages\torch\distributed\elastic\multiprocessing\redirects.py:29] NOTE: Redirects are currently not supported in Windows or MacOs.   </span><br><span class="line">ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼</span><br><span class="line"></span><br><span class="line">æ­£åœ¨è®¾ç½®çŸ¥è¯†åº“ï¼ˆä½¿ç”¨é»˜è®¤CAMELè®ºæ–‡: https://arxiv.org/pdf/2303.17760.pdfï¼‰...     </span><br><span class="line">æ­£åœ¨ä¸‹è½½PDFæ–‡ä»¶...</span><br><span class="line">âœ“ PDFæ–‡ä»¶å·²ä¸‹è½½åˆ°: local_data/knowledge_base.pdf</span><br><span class="line">æ­£åœ¨å¤„ç†PDFæ–‡ä»¶å¹¶å»ºç«‹å‘é‡æ•°æ®åº“...</span><br><span class="line">çŸ¥è¯†åº“è®¾ç½®å®Œæˆï¼</span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰: camelæ˜¯ä»€ä¹ˆï¼Ÿ      </span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">å¼€å§‹è¿è¡ŒRerankerç®¡é“ï¼ŒæŸ¥è¯¢: camelæ˜¯ä»€ä¹ˆï¼Ÿ</span><br><span class="line">============================================================</span><br><span class="line">æ­£åœ¨åˆæ­¥æ£€ç´¢æ–‡æ¡£ (Top-5)...</span><br><span class="line">âœ“ åˆæ­¥æ£€ç´¢åˆ° 5 ä¸ªæ–‡æ¡£ã€‚</span><br><span class="line">æ­£åœ¨ä½¿ç”¨æ¨¡æ‹Ÿçš„å¤–éƒ¨Rerankerè¿›è¡Œæ–‡æ¡£é‡æ’...</span><br><span class="line">âœ“ æ¨¡æ‹Ÿå¤–éƒ¨Rerankeré‡æ’å®Œæˆã€‚</span><br><span class="line"></span><br><span class="line">æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...</span><br><span class="line">âœ“ ç­”æ¡ˆç”Ÿæˆå®Œæˆã€‚</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">Rerankerç®¡é“æ‰§è¡Œå®Œæˆï¼</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">--- åŸå§‹æ£€ç´¢ç»“æœ (Top 5) ---</span><br><span class="line">æ–‡æ¡£ 1: 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 2: 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 3: me instructions and necessary inputs until you think the task is completed. When the task is completed, you must only reply with a single word &lt;CAMEL_...       </span><br><span class="line">æ–‡æ¡£ 4: me instructions and necessary inputs until you think the task is completed. When the task is completed, you must only reply with a single word &lt;CAMEL_...       </span><br><span class="line">æ–‡æ¡£ 5: Human Evaluation Guideline</span><br><span class="line"></span><br><span class="line">Thank you for participating in our task evaluation! We are comparing the performance of ChatGPT and a method called CAMEL ...</span><br><span class="line"></span><br><span class="line">--- å¤–éƒ¨Rerankeré‡æ’åçš„ç»“æœ ---</span><br><span class="line">æ–‡æ¡£ 1 (ç›¸å…³æ€§åˆ†æ•°: 0.00): 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 2 (ç›¸å…³æ€§åˆ†æ•°: 0.00): 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 3 (ç›¸å…³æ€§åˆ†æ•°: 0.00): me instructions and necessary inputs until you think the task is completed. When the task is completed, you must only reply with a single word &lt;CAMEL_...</span><br><span class="line">æ–‡æ¡£ 4 (ç›¸å…³æ€§åˆ†æ•°: 0.00): me instructions and necessary inputs until you think the task is completed. When the task is completed, you must only reply with a single word &lt;CAMEL_...</span><br><span class="line">æ–‡æ¡£ 5 (ç›¸å…³æ€§åˆ†æ•°: 0.00): Human Evaluation Guideline</span><br><span class="line"></span><br><span class="line">Thank you for participating in our task evaluation! We are comparing the performance of ChatGPT and a method called CAMEL ...</span><br><span class="line"></span><br><span class="line">--- æœ€ç»ˆç­”æ¡ˆ ---</span><br><span class="line">æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼ŒCAMELï¼ˆCommunicative Agents for â€œMindâ€ Exploration of Large Language Model Societyï¼‰æ˜¯ä¸€ç§ç”¨äºæ¢ç´¢å¤§å‹è¯­è¨€æ¨¡å‹ç¤¾ä¼šâ€œå¿ƒæ™ºâ€çš„äº¤æµä»£ç†ç³»ç»Ÿã€‚è¿™ä¸ªé¡¹ç›®ç”±æ²™ç‰¹é˜¿æ‹‰ä¼¯å›½ç‹ç§‘æŠ€å¤§å­¦ï¼ˆKAUSTï¼‰çš„ç ”ç©¶äººå‘˜å¼€å‘ï¼Œæ—¨åœ¨é€šè¿‡äº¤æµä»£ç†æ¥ç ”ç©¶å’Œç†è§£å¤§å‹è¯­è¨€æ¨¡å‹ä¹‹ é—´çš„äº’åŠ¨å’Œç¤¾ä¼šåŠ¨æ€ã€‚æ›´å¤šè¯¦æƒ…å¯ä»¥å‚è€ƒè¯¥é¡¹ç›®çš„å®˜æ–¹ç½‘ç«™ï¼šhttps://www.camel-ai.orgã€‚    </span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰: quit</span><br><span class="line">æ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Task2"><a href="#Task2" class="headerlink" title="Task2"></a>Task2</h2><h3 id="ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å’Œç®€å•çš„æç¤ºè¯å·¥ç¨‹åœ¨CAMELæ¡†æ¶ä¸‹å®ç°ä¸€ä¸ªReRankerï¼Œè¾¾æˆé‡æ’çš„æ•ˆæœï¼ˆçµæ„Ÿæ¥è‡ªCAMEL-Shanghai-HackathonéŸ¬å­å“¥QAQï¼‰"><a href="#ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å’Œç®€å•çš„æç¤ºè¯å·¥ç¨‹åœ¨CAMELæ¡†æ¶ä¸‹å®ç°ä¸€ä¸ªReRankerï¼Œè¾¾æˆé‡æ’çš„æ•ˆæœï¼ˆçµæ„Ÿæ¥è‡ªCAMEL-Shanghai-HackathonéŸ¬å­å“¥QAQï¼‰" class="headerlink" title="ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å’Œç®€å•çš„æç¤ºè¯å·¥ç¨‹åœ¨CAMELæ¡†æ¶ä¸‹å®ç°ä¸€ä¸ªReRankerï¼Œè¾¾æˆé‡æ’çš„æ•ˆæœï¼ˆçµæ„Ÿæ¥è‡ªCAMEL Shanghai HackathonéŸ¬å­å“¥QAQï¼‰"></a>ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹å’Œç®€å•çš„æç¤ºè¯å·¥ç¨‹åœ¨CAMELæ¡†æ¶ä¸‹å®ç°ä¸€ä¸ªReRankerï¼Œè¾¾æˆé‡æ’çš„æ•ˆæœï¼ˆçµæ„Ÿæ¥è‡ªCAMEL Shanghai HackathonéŸ¬å­å“¥QAQï¼‰</h3><p><a target="_blank" rel="noopener" href="https://github.com/fengju0213/NavigatorAI/blob/main/2Travel_information_generation.py">https://github.com/fengju0213/NavigatorAI/blob/main/2Travel_information_generation.py</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">LLM ReRankerï¼šåœ¨CAMELæ¡†æ¶ä¸‹å®ç°åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ–‡æ¡£é‡æ’</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯¥è„šæœ¬æ—¨åœ¨æ¸…æ™°åœ°å±•ç¤ºå¦‚ä½•ä½¿ç”¨CAMELæ¡†æ¶å’Œç®€å•çš„æç¤ºè¯å·¥ç¨‹å®ç°æ–‡æ¡£é‡æ’ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span>, <span class="type">Any</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥CAMELæ¡†æ¶æ ¸å¿ƒæ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType</span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> ChatAgent</span><br><span class="line"><span class="keyword">from</span> camel.embeddings <span class="keyword">import</span> SentenceTransformerEncoder</span><br><span class="line"><span class="keyword">from</span> camel.retrievers <span class="keyword">import</span> VectorRetriever</span><br><span class="line"><span class="keyword">from</span> camel.storages.vectordb_storages <span class="keyword">import</span> QdrantStorage</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥ç¯å¢ƒå˜é‡æ¨¡å—</span></span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MinimalLLMReranker</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    LLM ReRankerç³»ç»Ÿç±»</span></span><br><span class="line"><span class="string">    ä»…åŒ…å«çŸ¥è¯†åº“è®¾ç½®ã€LLM ReRankerå’Œç­”æ¡ˆç”Ÿæˆçš„æ ¸å¿ƒåŠŸèƒ½</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, api_key: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åˆå§‹åŒ–LLM ReRankerç³»ç»Ÿ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            api_key: ModelScope APIå¯†é’¥</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.api_key = api_key</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ (ç”¨äºå‘é‡æ£€ç´¢ï¼ŒReRankeræœ¬èº«ä¸ç›´æ¥ä½¿ç”¨)</span></span><br><span class="line">        <span class="variable language_">self</span>.embedding_model = SentenceTransformerEncoder(</span><br><span class="line">            model_name=<span class="string">&#x27;intfloat/e5-large-v2&#x27;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å‘é‡å­˜å‚¨ (ç”¨äºæ¼”ç¤ºæ–‡æ¡£æ£€ç´¢ï¼Œä»¥ä¾¿ReRankeræœ‰æ–‡æ¡£å¯é‡æ’)</span></span><br><span class="line">        <span class="variable language_">self</span>.vector_storage = QdrantStorage(</span><br><span class="line">            vector_dim=<span class="variable language_">self</span>.embedding_model.get_output_dim(),</span><br><span class="line">            collection=<span class="string">&quot;minimal_reranker_collection&quot;</span>,</span><br><span class="line">            path=<span class="string">&quot;storage_minimal_reranker&quot;</span>,</span><br><span class="line">            collection_name=<span class="string">&quot;ç²¾ç®€é‡æ’çŸ¥è¯†åº“&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–å‘é‡æ£€ç´¢å™¨</span></span><br><span class="line">        <span class="variable language_">self</span>.vector_retriever = VectorRetriever(</span><br><span class="line">            embedding_model=<span class="variable language_">self</span>.embedding_model,</span><br><span class="line">            storage=<span class="variable language_">self</span>.vector_storage</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–LLMæ¨¡å‹ (ç”¨äºReRankerå’Œç­”æ¡ˆç”Ÿæˆ)</span></span><br><span class="line">        <span class="variable language_">self</span>.model = ModelFactory.create(</span><br><span class="line">            model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">            model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">            url=<span class="string">&#x27;https://api-inference.modelscope.cn/v1/&#x27;</span>,</span><br><span class="line">            api_key=<span class="variable language_">self</span>.api_key</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–LLM ReRankerä»£ç†å’ŒRAGç­”æ¡ˆç”Ÿæˆä»£ç†</span></span><br><span class="line">        <span class="variable language_">self</span>._init_agents()</span><br><span class="line">        <span class="variable language_">self</span>.knowledge_base_ready = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_agents</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–LLM ReRankerä»£ç†å’ŒRAGç­”æ¡ˆç”Ÿæˆä»£ç†&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># LLM ReRanker ä»£ç†</span></span><br><span class="line">        <span class="comment"># æç¤ºè¯å·¥ç¨‹ï¼šæ˜ç¡®è¦æ±‚è¾“å‡ºæ ¼å¼ä¸ºé€—å·åˆ†éš”çš„æ•°å­—åºåˆ—ï¼Œä¸å«é¢å¤–æ–‡å­—</span></span><br><span class="line">        reranker_sys_msg = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä½ æ˜¯ä¸€ä¸ªæ–‡æ¡£é‡æ’åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·æŸ¥è¯¢ï¼Œå¯¹æä¾›çš„æ–‡æ¡£åˆ—è¡¨è¿›è¡Œç›¸å…³æ€§æ’åºã€‚</span></span><br><span class="line"><span class="string">        ä½ ä¼šæ¥æ”¶ä¸€ä¸ªç”¨æˆ·æŸ¥è¯¢å’Œå¤šä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªç¼–å·ã€‚</span></span><br><span class="line"><span class="string">        è¯·ä½ æ ¹æ®æ–‡æ¡£ä¸æŸ¥è¯¢çš„æ·±å±‚ç›¸å…³æ€§ï¼Œä»æœ€ç›¸å…³åˆ°æœ€ä¸ç›¸å…³ï¼Œè¾“å‡ºæ–‡æ¡£çš„ç¼–å·åºåˆ—ã€‚</span></span><br><span class="line"><span class="string">        è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯é€—å·åˆ†éš”çš„æ•°å­—ï¼Œä¾‹å¦‚ï¼š1, 3, 2, 4ã€‚</span></span><br><span class="line"><span class="string">        ä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—æˆ–è§£é‡Šã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.reranker_agent = ChatAgent(</span><br><span class="line">            system_message=reranker_sys_msg,</span><br><span class="line">            model=<span class="variable language_">self</span>.model</span><br><span class="line">        )</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># RAGå›ç­”ç”Ÿæˆä»£ç†</span></span><br><span class="line">        rag_sys_msg = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä½ æ˜¯ä¸€ä¸ªå¸®åŠ©å›ç­”é—®é¢˜çš„åŠ©æ‰‹ã€‚</span></span><br><span class="line"><span class="string">        æˆ‘ä¼šç»™ä½ åŸå§‹æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">        è¯·æ ¹æ®æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å›ç­”åŸå§‹æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="string">        å¦‚æœä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è¶³ä»¥å›ç­”é—®é¢˜ï¼Œè¯·è¯´&quot;æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œæˆ‘æ— æ³•å®Œå…¨å›ç­”è¿™ä¸ªé—®é¢˜&quot;ã€‚</span></span><br><span class="line"><span class="string">        è¯·ç¡®ä¿å›ç­”å‡†ç¡®ã€å®Œæ•´ä¸”æœ‰æ¡ç†ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.rag_agent = ChatAgent(</span><br><span class="line">            system_message=rag_sys_msg,</span><br><span class="line">            model=<span class="variable language_">self</span>.model</span><br><span class="line">        )</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_knowledge_base</span>(<span class="params">self, pdf_url: <span class="built_in">str</span> = <span class="literal">None</span>, pdf_path: <span class="built_in">str</span> = <span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è®¾ç½®çŸ¥è¯†åº“ï¼Œç”¨äºæä¾›å¾…é‡æ’çš„æ–‡æ¡£</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            pdf_url: PDFæ–‡ä»¶çš„URL</span></span><br><span class="line"><span class="string">            pdf_path: æœ¬åœ°PDFæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        os.makedirs(<span class="string">&#x27;local_data&#x27;</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pdf_url:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ä¸‹è½½PDFæ–‡ä»¶...&quot;</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                response = requests.get(pdf_url, timeout=<span class="number">30</span>)</span><br><span class="line">                response.raise_for_status()</span><br><span class="line">                pdf_path = <span class="string">&#x27;local_data/knowledge_base.pdf&#x27;</span></span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(pdf_path, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">                    file.write(response.content)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âœ“ PDFæ–‡ä»¶å·²ä¸‹è½½åˆ°: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;PDFä¸‹è½½å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pdf_path:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pdf_path):</span><br><span class="line">                <span class="keyword">raise</span> FileNotFoundError(<span class="string">f&quot;PDFæ–‡ä»¶ä¸å­˜åœ¨: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨å¤„ç†PDFæ–‡ä»¶å¹¶å»ºç«‹å‘é‡æ•°æ®åº“...&quot;</span>)</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="variable language_">self</span>.vector_retriever.process(content=pdf_path)</span><br><span class="line">                <span class="variable language_">self</span>.knowledge_base_ready = <span class="literal">True</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;çŸ¥è¯†åº“è®¾ç½®å®Œæˆï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;çŸ¥è¯†åº“è®¾ç½®å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">raise</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;å¿…é¡»æä¾› pdf_url æˆ– pdf_path å‚æ•°&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">retrieve_documents</span>(<span class="params">self, query: <span class="built_in">str</span>, top_k: <span class="built_in">int</span> = <span class="number">5</span></span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢åˆæ­¥æ–‡æ¡£</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            top_k: è¿”å›çš„æ–‡æ¡£æ•°é‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            åˆæ­¥æ£€ç´¢åˆ°çš„æ–‡æ¡£åˆ—è¡¨</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.knowledge_base_ready:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;çŸ¥è¯†åº“æœªå‡†å¤‡å¥½ï¼Œæ— æ³•æ£€ç´¢æ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ­£åœ¨åˆæ­¥æ£€ç´¢æ–‡æ¡£ (Top-<span class="subst">&#123;top_k&#125;</span>)...&quot;</span>)</span><br><span class="line">        retrieved_docs = <span class="variable language_">self</span>.vector_retriever.query(query=query, top_k=top_k)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âœ“ åˆæ­¥æ£€ç´¢åˆ° <span class="subst">&#123;<span class="built_in">len</span>(retrieved_docs)&#125;</span> ä¸ªæ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> retrieved_docs</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rerank_documents</span>(<span class="params">self, query: <span class="built_in">str</span>, documents: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]</span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        ä½¿ç”¨LLMå¯¹æ–‡æ¡£è¿›è¡Œé‡æ’</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            documents: å¾…é‡æ’çš„æ–‡æ¡£åˆ—è¡¨ï¼Œæ¯ä¸ªæ–‡æ¡£å­—å…¸åŒ…å« &#x27;text&#x27; é”®</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            æ ¹æ®LLMé‡æ’åçš„æ–‡æ¡£åˆ—è¡¨</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> documents:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ²¡æœ‰æ–‡æ¡£å¯ä¾›é‡æ’ï¼Œè·³è¿‡LLMé‡æ’ã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ä½¿ç”¨LLMè¿›è¡Œæ–‡æ¡£é‡æ’...&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„å»ºå‘é€ç»™LLMçš„æç¤º</span></span><br><span class="line">        prompt_parts = [<span class="string">f&quot;ç”¨æˆ·æŸ¥è¯¢: <span class="subst">&#123;query&#125;</span>\n\nä»¥ä¸‹æ˜¯éœ€è¦é‡æ’çš„æ–‡æ¡£åˆ—è¡¨ï¼š&quot;</span>]</span><br><span class="line">        <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(documents):</span><br><span class="line">            <span class="comment"># é™åˆ¶æ–‡æ¡£å†…å®¹é•¿åº¦ï¼Œé¿å…è¶…å‡ºLLMä¸Šä¸‹æ–‡çª—å£</span></span><br><span class="line">            truncated_text = doc[<span class="string">&#x27;text&#x27;</span>][:<span class="number">500</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(doc[<span class="string">&#x27;text&#x27;</span>]) &gt; <span class="number">500</span> <span class="keyword">else</span> doc[<span class="string">&#x27;text&#x27;</span>]</span><br><span class="line">            prompt_parts.append(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span>:\n<span class="subst">&#123;truncated_text&#125;</span>\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">        prompt_parts.append(<span class="string">&quot;\nè¯·æ ¹æ®æ–‡æ¡£ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§ï¼Œä»æœ€ç›¸å…³åˆ°æœ€ä¸ç›¸å…³ï¼Œè¾“å‡ºæ–‡æ¡£çš„ç¼–å·åºåˆ—ã€‚è¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯é€—å·åˆ†éš”çš„æ•°å­—ï¼Œä¾‹å¦‚ï¼š1, 3, 2, 4ã€‚ä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—æˆ–è§£é‡Šã€‚&quot;</span>)</span><br><span class="line">        rerank_prompt = <span class="string">&quot;\n&quot;</span>.join(prompt_parts)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = <span class="variable language_">self</span>.reranker_agent.step(rerank_prompt)</span><br><span class="line">            reranked_order_str = response.msgs[<span class="number">0</span>].content.strip()</span><br><span class="line"></span><br><span class="line">            <span class="comment"># è§£æLLMçš„è¾“å‡ºï¼Œè·å–æ’åºåçš„æ–‡æ¡£ç´¢å¼•</span></span><br><span class="line">            <span class="comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°å­—å’Œé€—å·ï¼Œç¡®ä¿åªæå–æ•°å­—åºåˆ—</span></span><br><span class="line">            <span class="keyword">match</span> = re.search(<span class="string">r&#x27;^\s*(\d+(?:\s*,\s*\d+)*)\s*$&#x27;</span>, reranked_order_str)</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">match</span>:</span><br><span class="line">                ordered_indices = [<span class="built_in">int</span>(idx.strip()) - <span class="number">1</span> <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="keyword">match</span>.group(<span class="number">1</span>).split(<span class="string">&#x27;,&#x27;</span>)]</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è¿‡æ»¤æ‰æ— æ•ˆçš„ç´¢å¼•ï¼ˆè¶…å‡ºæ–‡æ¡£åˆ—è¡¨èŒƒå›´çš„ï¼‰</span></span><br><span class="line">                valid_ordered_indices = [idx <span class="keyword">for</span> idx <span class="keyword">in</span> ordered_indices <span class="keyword">if</span> <span class="number">0</span> &lt;= idx &lt; <span class="built_in">len</span>(documents)]</span><br><span class="line"></span><br><span class="line">                <span class="comment"># æ ¹æ®LLMè¿”å›çš„é¡ºåºé‡æ’æ–‡æ¡£</span></span><br><span class="line">                reranked_documents = [documents[i] <span class="keyword">for</span> i <span class="keyword">in</span> valid_ordered_indices]</span><br><span class="line"></span><br><span class="line">                <span class="comment"># å¦‚æœLLMè¿”å›çš„æ–‡æ¡£æ•°é‡å°‘äºåŸå§‹æ–‡æ¡£æ•°é‡ï¼Œå°†æœªè¢«LLMæ’åºçš„æ–‡æ¡£æŒ‰åŸé¡ºåºè¿½åŠ åˆ°æœ«å°¾</span></span><br><span class="line">                original_indices = <span class="built_in">set</span>(<span class="built_in">range</span>(<span class="built_in">len</span>(documents)))</span><br><span class="line">                llm_sorted_indices = <span class="built_in">set</span>(valid_ordered_indices)</span><br><span class="line">                remaining_indices = <span class="built_in">sorted</span>(<span class="built_in">list</span>(original_indices - llm_sorted_indices))</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> idx <span class="keyword">in</span> remaining_indices:</span><br><span class="line">                    reranked_documents.append(documents[idx])</span><br><span class="line"></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âœ“ LLMé‡æ’å®Œæˆã€‚æ–°é¡ºåº: <span class="subst">&#123;[idx + <span class="number">1</span> <span class="keyword">for</span> idx <span class="keyword">in</span> valid_ordered_indices]&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> reranked_documents</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;LLMé‡æ’è¾“å‡ºæ ¼å¼ä¸æ­£ç¡®ï¼Œæ— æ³•è§£æã€‚åŸå§‹è¾“å‡º: &#x27;<span class="subst">&#123;reranked_order_str&#125;</span>&#x27;ã€‚å°†è¿”å›åŸå§‹æ–‡æ¡£é¡ºåºã€‚&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> documents <span class="comment"># è¿”å›åŸå§‹æ–‡æ¡£é¡ºåº</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;LLMé‡æ’å¤±è´¥: <span class="subst">&#123;e&#125;</span>ã€‚å°†è¿”å›åŸå§‹æ–‡æ¡£é¡ºåºã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> documents <span class="comment"># å‘ç”Ÿé”™è¯¯æ—¶è¿”å›åŸå§‹æ–‡æ¡£é¡ºåº</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_answer</span>(<span class="params">self, query: <span class="built_in">str</span>, retrieved_docs: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            retrieved_docs: æ£€ç´¢åˆ°çš„æ–‡æ¡£åˆ—è¡¨</span></span><br><span class="line"><span class="string">            </span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            ç”Ÿæˆçš„ç­”æ¡ˆ</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> retrieved_docs:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œæˆ‘æ— æ³•å®Œå…¨å›ç­”è¿™ä¸ªé—®é¢˜ã€‚&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„å»ºä¸Šä¸‹æ–‡</span></span><br><span class="line">        context = <span class="string">&quot;\n\n&quot;</span>.join([doc[<span class="string">&#x27;text&#x27;</span>] <span class="keyword">for</span> doc <span class="keyword">in</span> retrieved_docs])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ„å»ºæç¤º</span></span><br><span class="line">        prompt = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        åŸå§‹æŸ¥è¯¢: <span class="subst">&#123;query&#125;</span></span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯:</span></span><br><span class="line"><span class="string">        <span class="subst">&#123;context&#125;</span></span></span><br><span class="line"><span class="string">        </span></span><br><span class="line"><span class="string">        è¯·æ ¹æ®ä¸Šè¿°ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”åŸå§‹æŸ¥è¯¢ã€‚</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\næ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...&quot;</span>)</span><br><span class="line">        response = <span class="variable language_">self</span>.rag_agent.step(prompt)</span><br><span class="line">        answer = response.msgs[<span class="number">0</span>].content.strip()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;âœ“ ç­”æ¡ˆç”Ÿæˆå®Œæˆã€‚&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> answer</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_reranker_pipeline</span>(<span class="params">self, query: <span class="built_in">str</span>, top_k_initial: <span class="built_in">int</span> = <span class="number">5</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        è¿è¡Œé‡æ’å™¨ç®¡é“ï¼šåˆæ­¥æ£€ç´¢ -&gt; LLMé‡æ’ -&gt; ç­”æ¡ˆç”Ÿæˆ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">            query: ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line"><span class="string">            top_k_initial: åˆæ­¥æ£€ç´¢çš„æ–‡æ¡£æ•°é‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        Returns:</span></span><br><span class="line"><span class="string">            åŒ…å«åˆæ­¥æ–‡æ¡£ã€é‡æ’æ–‡æ¡£å’Œæœ€ç»ˆç­”æ¡ˆçš„å­—å…¸</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;å¼€å§‹è¿è¡ŒLLMé‡æ’ç®¡é“ï¼ŒæŸ¥è¯¢: <span class="subst">&#123;query&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤1: åˆæ­¥æ£€ç´¢æ–‡æ¡£</span></span><br><span class="line">        initial_retrieved_docs = <span class="variable language_">self</span>.retrieve_documents(query, top_k_initial)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤2: LLMé‡æ’æ–‡æ¡£</span></span><br><span class="line">        reranked_docs = <span class="variable language_">self</span>.rerank_documents(query, initial_retrieved_docs)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤3: åŸºäºé‡æ’åçš„æ–‡æ¡£ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line">        final_answer = <span class="variable language_">self</span>.generate_answer(query, reranked_docs)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;LLMé‡æ’ç®¡é“æ‰§è¡Œå®Œæˆï¼&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span> * <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&quot;query&quot;</span>: query,</span><br><span class="line">            <span class="string">&quot;initial_retrieved_docs&quot;</span>: initial_retrieved_docs,</span><br><span class="line">            <span class="string">&quot;reranked_docs&quot;</span>: reranked_docs,</span><br><span class="line">            <span class="string">&quot;final_answer&quot;</span>: final_answer</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸»å‡½æ•°ï¼šæ¼”ç¤ºç²¾ç®€ç‰ˆLLM ReRankerç³»ç»Ÿçš„ä½¿ç”¨&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line">    load_dotenv()</span><br><span class="line">    api_key = os.getenv(<span class="string">&#x27;MODELSCOPE_SDK_TOKEN&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> api_key:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šè¯·è®¾ç½®MODELSCOPE_SDK_TOKENç¯å¢ƒå˜é‡&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;è¯·åœ¨.envæ–‡ä»¶ä¸­æ·»åŠ  MODELSCOPE_SDK_TOKEN=ä½ çš„APIå¯†é’¥&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–LLM ReRankerç³»ç»Ÿ</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨åˆå§‹åŒ–LLM ReRankerç³»ç»Ÿ...&quot;</span>)</span><br><span class="line">    reranker_system = MinimalLLMReranker(api_key)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¾ç½®çŸ¥è¯†åº“ (ä½¿ç”¨CAMELè®ºæ–‡ä½œä¸ºç¤ºä¾‹)</span></span><br><span class="line">    pdf_url = <span class="string">&quot;https://arxiv.org/pdf/2303.17760.pdf&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;\næ­£åœ¨è®¾ç½®çŸ¥è¯†åº“ï¼ˆä½¿ç”¨é»˜è®¤CAMELè®ºæ–‡: <span class="subst">&#123;pdf_url&#125;</span>ï¼‰...&quot;</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        reranker_system.setup_knowledge_base(pdf_url=pdf_url)</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;çŸ¥è¯†åº“è®¾ç½®å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿è¡Œäº¤äº’å¼ä¼šè¯</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        query = <span class="built_in">input</span>(<span class="string">&quot;\nè¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰: &quot;</span>).strip()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> query.lower() <span class="keyword">in</span> [<span class="string">&#x27;quit&#x27;</span>, <span class="string">&#x27;exit&#x27;</span>, <span class="string">&#x27;é€€å‡º&#x27;</span>]:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> query:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æŸ¥è¯¢ä¸èƒ½ä¸ºç©ºï¼Œè¯·é‡æ–°è¾“å…¥ã€‚&quot;</span>)</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            results = reranker_system.run_reranker_pipeline(query, top_k_initial=<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n--- åŸå§‹æ£€ç´¢ç»“æœ (Top 5) ---&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> results[<span class="string">&#x27;initial_retrieved_docs&#x27;</span>]:</span><br><span class="line">                <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(results[<span class="string">&#x27;initial_retrieved_docs&#x27;</span>]):</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span>: <span class="subst">&#123;doc[<span class="string">&#x27;text&#x27;</span>][:<span class="number">150</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;æ— åŸå§‹æ£€ç´¢æ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n--- LLMé‡æ’åçš„ç»“æœ ---&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> results[<span class="string">&#x27;reranked_docs&#x27;</span>]:</span><br><span class="line">                <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(results[<span class="string">&#x27;reranked_docs&#x27;</span>]):</span><br><span class="line">                    <span class="comment"># å°è¯•è·å–RRFåˆ†æ•°æˆ–ç›¸ä¼¼åº¦ï¼Œå¦‚æœå­˜åœ¨çš„è¯</span></span><br><span class="line">                    score_info = <span class="string">f&quot; (RRFåˆ†æ•°: <span class="subst">&#123;doc[<span class="string">&#x27;rrf_score&#x27;</span>]:<span class="number">.4</span>f&#125;</span>)&quot;</span> <span class="keyword">if</span> <span class="string">&#x27;rrf_score&#x27;</span> <span class="keyword">in</span> doc <span class="keyword">else</span> <span class="string">&quot;&quot;</span></span><br><span class="line">                    score_info = <span class="string">f&quot; (ç›¸ä¼¼åº¦: <span class="subst">&#123;doc[<span class="string">&#x27;similarity&#x27;</span>]:<span class="number">.4</span>f&#125;</span>)&quot;</span> <span class="keyword">if</span> <span class="string">&#x27;similarity&#x27;</span> <span class="keyword">in</span> doc <span class="keyword">else</span> score_info</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span><span class="subst">&#123;score_info&#125;</span>: <span class="subst">&#123;doc[<span class="string">&#x27;text&#x27;</span>][:<span class="number">150</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;æ— é‡æ’æ–‡æ¡£ã€‚&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\n--- æœ€ç»ˆç­”æ¡ˆ ---&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(results[<span class="string">&#x27;final_answer&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;\nå‘ç”Ÿé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">import</span> traceback</span><br><span class="line">            traceback.print_exc() <span class="comment"># æ‰“å°è¯¦ç»†é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            continue_choice = <span class="built_in">input</span>(<span class="string">&quot;æ˜¯å¦ç»§ç»­ï¼Ÿ(y/n): &quot;</span>).strip().lower()</span><br><span class="line">            <span class="keyword">if</span> continue_choice != <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PS D:\Camel_Test_Project&gt; python Reranker_simple.py</span><br><span class="line">æ­£åœ¨åˆå§‹åŒ–LLM ReRankerç³»ç»Ÿ...</span><br><span class="line">W0724 21:56:33.691000 38432 site-packages\torch\distributed\elastic\multiprocessing\redirects.py:29] NOTE: Redirects are currently not supported in Windows or MacOs.   </span><br><span class="line">ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆï¼</span><br><span class="line"></span><br><span class="line">æ­£åœ¨è®¾ç½®çŸ¥è¯†åº“ï¼ˆä½¿ç”¨é»˜è®¤CAMELè®ºæ–‡: https://arxiv.org/pdf/2303.17760.pdfï¼‰...        </span><br><span class="line">æ­£åœ¨ä¸‹è½½PDFæ–‡ä»¶...</span><br><span class="line">âœ“ PDFæ–‡ä»¶å·²ä¸‹è½½åˆ°: local_data/knowledge_base.pdf</span><br><span class="line">æ­£åœ¨å¤„ç†PDFæ–‡ä»¶å¹¶å»ºç«‹å‘é‡æ•°æ®åº“...</span><br><span class="line">çŸ¥è¯†åº“è®¾ç½®å®Œæˆï¼</span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰:</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¾“å…¥æˆ‘ä»¬æƒ³è¦æ£€ç´¢çš„å†…å®¹ï¼Œå› ä¸ºæµ‹è¯•çš„PDFæ–‡ä»¶ä»ä¸ºCAMELè®ºæ–‡å®˜æ–¹çº¿ä¸Šæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥é—®ä¸CAMELç›¸å…³çš„ï¼šâ€œcamelæ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæˆ‘AIå­¦ä¹ æœ‰ä»€ä¹ˆå¸®åŠ©ï¼Ÿâ€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰:camelæ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæˆ‘AIå­¦ä¹ æœ‰ä»€ä¹ˆå¸®åŠ©ï¼Ÿ</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">å¼€å§‹è¿è¡ŒLLMé‡æ’ç®¡é“ï¼ŒæŸ¥è¯¢: camelæ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæˆ‘AIå­¦ä¹ æœ‰ä»€ä¹ˆå¸®åŠ©ï¼Ÿ</span><br><span class="line">============================================================</span><br><span class="line">æ­£åœ¨åˆæ­¥æ£€ç´¢æ–‡æ¡£ (Top-5)...</span><br><span class="line">âœ“ åˆæ­¥æ£€ç´¢åˆ° 5 ä¸ªæ–‡æ¡£ã€‚</span><br><span class="line">æ­£åœ¨ä½¿ç”¨LLMè¿›è¡Œæ–‡æ¡£é‡æ’...</span><br><span class="line">âœ“ LLMé‡æ’å®Œæˆã€‚æ–°é¡ºåº: [5, 3, 4, 2, 1]</span><br><span class="line"></span><br><span class="line">æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...</span><br><span class="line">âœ“ ç­”æ¡ˆç”Ÿæˆå®Œæˆã€‚</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">LLMé‡æ’ç®¡é“æ‰§è¡Œå®Œæˆï¼</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">--- åŸå§‹æ£€ç´¢ç»“æœ (Top 5) ---</span><br><span class="line">æ–‡æ¡£ 1: Human Evaluation Guideline</span><br><span class="line"></span><br><span class="line">Thank you for participating in our task evaluation! We are comparing the performance of ChatGPT and a method called CAMEL ...</span><br><span class="line">æ–‡æ¡£ 2: Objective: Your task is to compare two messages, one generated by CAMEL and the other by ChatGPT. These messages will be displayed anonymously on your...       </span><br><span class="line">æ–‡æ¡£ 3: 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 4: Feedback: We highly value your feedback. If you have any suggestions, concerns, or encounter any technical issues during the evaluation, please feel f...       </span><br><span class="line">æ–‡æ¡£ 5: agent is asked to draw all the Camelidae species. It first reasons about what animals are included in the Camelidae family and then generates and save...       </span><br><span class="line"></span><br><span class="line">--- LLMé‡æ’åçš„ç»“æœ ---</span><br><span class="line">æ–‡æ¡£ 1: agent is asked to draw all the Camelidae species. It first reasons about what animals are included in the Camelidae family and then generates and save...       </span><br><span class="line">æ–‡æ¡£ 2: 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 3: Feedback: We highly value your feedback. If you have any suggestions, concerns, or encounter any technical issues during the evaluation, please feel f...       </span><br><span class="line">æ–‡æ¡£ 4: Objective: Your task is to compare two messages, one generated by CAMEL and the other by ChatGPT. These messages will be displayed anonymously on your...       </span><br><span class="line">æ–‡æ¡£ 5: Human Evaluation Guideline</span><br><span class="line"></span><br><span class="line">Thank you for participating in our task evaluation! We are comparing the performance of ChatGPT and a method called CAMEL ...</span><br><span class="line"></span><br><span class="line">--- æœ€ç»ˆç­”æ¡ˆ ---</span><br><span class="line">æ ¹æ®æä¾›çš„ä¿¡æ¯ï¼Œ&quot;camel&quot;åœ¨è¿™é‡Œæœ‰ä¸¤ä¸ªä¸åŒçš„å«ä¹‰ï¼š</span><br><span class="line"></span><br><span class="line">1. **ç”Ÿç‰©å­¦ä¸Šçš„é©¼ç§‘ï¼ˆCamelidaeï¼‰**ï¼šè¿™æ˜¯æŒ‡ä¸€ç±»å“ºä¹³åŠ¨ç‰©ï¼ŒåŒ…æ‹¬éª†é©¼ã€ç¾Šé©¼ç­‰ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå®šä¹‰ä¸æ‚¨çš„AIå­¦ä¹ æ²¡æœ‰ç›´æ¥å…³ç³»ã€‚</span><br><span class="line"></span><br><span class="line">2. **CAMELé¡¹ç›®**ï¼šè¿™æ˜¯ä¸€ä¸ªåä¸ºâ€œCommunicative Agents for â€˜Mindâ€™ Exploration of Large Language Model Societyâ€çš„ç ”ç©¶é¡¹ç›®ï¼Œç”±æ²™ç‰¹é˜¿æ‹‰ä¼¯é˜¿åœæœæ‹‰å›½ç‹ç§‘æŠ€å¤§å­¦ï¼ˆKAUSTï¼‰çš„ç ”ç©¶äººå‘˜å¼€å‘ã€‚CAMELé¡¹ç›®çš„ç›®çš„æ˜¯é€šè¿‡åˆ›å»ºäº¤äº’å¼ä»£ç†æ¥æ¢ç´¢å¤§å‹è¯­è¨€æ¨¡å‹çš„ç¤¾ä¼šâ€œå¿ƒæ™ºâ€ã€‚è¿™äº›ä»£ç† å¯ä»¥ç”Ÿæˆå›¾åƒã€è¿›è¡Œä»»åŠ¡æ¯”è¾ƒå’Œè¯„ä¼°ï¼Œå¹¶é€šè¿‡ç”¨æˆ·åé¦ˆä¸æ–­æ”¹è¿›ã€‚</span><br><span class="line"></span><br><span class="line">### å¯¹äºAIå­¦ä¹ çš„å¸®åŠ©ï¼š</span><br><span class="line">- **ç†è§£å¤§å‹è¯­è¨€æ¨¡å‹**ï¼šCAMELé¡¹ç›®å¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å¤§å‹è¯­è¨€æ¨¡å‹çš„å·¥ä½œåŸç†å’Œèƒ½åŠ›ã€‚ </span><br><span class="line">- **å®è·µåº”ç”¨**ï¼šé€šè¿‡å‚ä¸CAMELé¡¹ç›®ï¼Œä½ å¯ä»¥å®é™…æ“ä½œå’Œè¯„ä¼°ä¸åŒAIç³»ç»Ÿçš„æ€§èƒ½ï¼Œä»è€Œæå‡ä½  çš„å®è·µæŠ€èƒ½ã€‚</span><br><span class="line">- **ç ”ç©¶è´¡çŒ®**ï¼šä½ çš„åé¦ˆå’Œå‚ä¸å¯ä»¥ä¸ºAIç ”ç©¶æä¾›æœ‰ä»·å€¼çš„æ•°æ®ï¼Œæ¨åŠ¨AIæŠ€æœ¯çš„å‘å±•ã€‚      </span><br><span class="line"></span><br><span class="line">å¦‚æœä½ å¯¹ç”Ÿç‰©å­¦ä¸Šçš„é©¼ç§‘æ›´æ„Ÿå…´è¶£ï¼Œå»ºè®®æŸ¥é˜…ç›¸å…³çš„ç”Ÿç‰©å­¦èµ„æ–™ã€‚å¦‚æœä½ å¯¹AIå­¦ä¹ æ›´æ„Ÿå…´è¶£ï¼Œå¯ä»¥è¿›ä¸€æ­¥äº†è§£CAMELé¡¹ç›®å¹¶å‚ä¸å…¶ä¸­ã€‚</span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰:</span><br></pre></td></tr></table></figure>
<p>æ­¤æ—¶ç¬¬ä¸€è½®æ£€ç´¢ç”Ÿæˆå·²ç»å®Œæˆï¼Œä»£ç†è‡ªåŠ¨è¿›å…¥ç¬¬äºŒä¸ªé—®é¢˜æŸ¥è¯¢ã€‚æˆ‘ä»¬ç»§ç»­è¾“å…¥æˆ‘ä»¬çš„é—®é¢˜ï¼šâ€œcamelå…·å¤‡å“ªäº›ç‰¹æ€§ï¼Ÿâ€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰:camelå…·å¤‡å“ªäº›ç‰¹æ€§ï¼Ÿ            </span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">å¼€å§‹è¿è¡ŒLLMé‡æ’ç®¡é“ï¼ŒæŸ¥è¯¢: camelå…·å¤‡å“ªäº›ç‰¹æ€§ï¼Ÿ</span><br><span class="line">============================================================</span><br><span class="line">æ­£åœ¨åˆæ­¥æ£€ç´¢æ–‡æ¡£ (Top-5)...</span><br><span class="line">âœ“ åˆæ­¥æ£€ç´¢åˆ° 5 ä¸ªæ–‡æ¡£ã€‚</span><br><span class="line">æ­£åœ¨ä½¿ç”¨LLMè¿›è¡Œæ–‡æ¡£é‡æ’...</span><br><span class="line">âœ“ LLMé‡æ’å®Œæˆã€‚æ–°é¡ºåº: [1, 2, 3, 4, 5]</span><br><span class="line"></span><br><span class="line">æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...</span><br><span class="line">âœ“ ç­”æ¡ˆç”Ÿæˆå®Œæˆã€‚</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">LLMé‡æ’ç®¡é“æ‰§è¡Œå®Œæˆï¼</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">--- åŸå§‹æ£€ç´¢ç»“æœ (Top 5) ---</span><br><span class="line">æ–‡æ¡£ 1: 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 2: me instructions and necessary inputs until you think the task is completed. When the task is completed, you must only reply with a single word &lt;CAMEL_...       </span><br><span class="line">æ–‡æ¡£ 3: Human Evaluation Guideline</span><br><span class="line"></span><br><span class="line">Thank you for participating in our task evaluation! We are comparing the performance of ChatGPT and a method called CAMEL ...</span><br><span class="line">æ–‡æ¡£ 4: Objective: Your task is to compare two messages, one generated by CAMEL and the other by ChatGPT. These messages will be displayed anonymously on your...       </span><br><span class="line">æ–‡æ¡£ 5: Feedback: We highly value your feedback. If you have any suggestions, concerns, or encounter any technical issues during the evaluation, please feel f...       </span><br><span class="line"></span><br><span class="line">--- LLMé‡æ’åçš„ç»“æœ ---</span><br><span class="line">æ–‡æ¡£ 1: 3 2 0 2</span><br><span class="line"></span><br><span class="line">v o N 2</span><br><span class="line"></span><br><span class="line">] I</span><br><span class="line"></span><br><span class="line">A . s c [</span><br><span class="line"></span><br><span class="line">2 v 0 6 7 7 1 . 3 0 3 2 : v i X r a</span><br><span class="line"></span><br><span class="line">CAMEL: Communicative Agents for â€œMindâ€ Exploration of Large Language Model Soci...  </span><br><span class="line">æ–‡æ¡£ 2: me instructions and necessary inputs until you think the task is completed. When the task is completed, you must only reply with a single word &lt;CAMEL_...       </span><br><span class="line">æ–‡æ¡£ 3: Human Evaluation Guideline</span><br><span class="line"></span><br><span class="line">Thank you for participating in our task evaluation! We are comparing the performance of ChatGPT and a method called CAMEL ...</span><br><span class="line">æ–‡æ¡£ 4: Objective: Your task is to compare two messages, one generated by CAMEL and the other by ChatGPT. These messages will be displayed anonymously on your...       </span><br><span class="line">æ–‡æ¡£ 5: Feedback: We highly value your feedback. If you have any suggestions, concerns, or encounter any technical issues during the evaluation, please feel f...       </span><br><span class="line"></span><br><span class="line">--- æœ€ç»ˆç­”æ¡ˆ ---</span><br><span class="line">æ ¹æ®æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒCAMELï¼ˆCommunicative Agents for â€œMindâ€ Exploration of Large Language Model Societyï¼‰å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</span><br><span class="line"></span><br><span class="line">1. **äº¤äº’å¼ä»£ç†**ï¼šCAMELé¡¹ç›®ä½¿ç”¨äº¤äº’å¼ä»£ç†æ¥ç”Ÿæˆå’Œå¤„ç†ä»»åŠ¡ï¼Œè¿™äº›ä»£ç†å¯ä»¥æ¨¡æ‹Ÿäººç±»çš„å¯¹è¯å’Œæ€ç»´è¿‡ç¨‹ã€‚</span><br><span class="line">2. **ä»»åŠ¡å®Œæˆ**ï¼šCAMELä»£ç†èƒ½å¤Ÿæ¥æ”¶ä»»åŠ¡æŒ‡ä»¤ï¼Œå¹¶åœ¨ä»»åŠ¡å®Œæˆåå›å¤ç‰¹å®šçš„ç¡®è®¤è¯ `&lt;CAMEL_TASK_DONE&gt;`ã€‚</span><br><span class="line">3. **æ€§èƒ½è¯„ä¼°**ï¼šCAMELé¡¹ç›®åŒ…æ‹¬å¯¹ä¸åŒAIç³»ç»Ÿï¼ˆå¦‚ChatGPTå’ŒCAMELè‡ªèº«ï¼‰çš„æ€§èƒ½è¯„ä¼°ï¼Œé€šè¿‡ç”¨æˆ·åé¦ˆå’ŒæŠ•ç¥¨æ¥æ¯”è¾ƒå®ƒä»¬çš„è¡¨ç°ã€‚</span><br><span class="line">4. **ç”¨æˆ·å‚ä¸**ï¼šCAMELé¡¹ç›®é¼“åŠ±ç”¨æˆ·å‚ä¸ä»»åŠ¡è¯„ä¼°ï¼Œæä¾›åé¦ˆå’Œå»ºè®®ï¼Œä»¥å¸®åŠ©æ”¹è¿›AIç³»ç»Ÿçš„æ€§èƒ½ã€‚</span><br><span class="line">5. **ç”Ÿæˆå†…å®¹**ï¼šCAMELæ¡†æ¶å¯ä»¥ç”Ÿæˆå„ç§å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€å›¾åƒç­‰ï¼Œç”¨äºä»»åŠ¡å®Œæˆå’Œè¯„ä¼°ã€‚  </span><br><span class="line">6. **ç¤¾ä¼šâ€œå¿ƒæ™ºâ€æ¢ç´¢**ï¼šCAMELé¡¹ç›®æ—¨åœ¨é€šè¿‡ä»£ç†ä¹‹é—´çš„äº’åŠ¨æ¥æ¢ç´¢å¤§å‹è¯­è¨€æ¨¡å‹çš„ç¤¾ä¼šâ€œå¿ƒæ™ºâ€ï¼Œå³è¿™äº›æ¨¡å‹å¦‚ä½•ç†è§£å’Œå¤„ç†ç¤¾ä¼šäº’åŠ¨å’Œå¤æ‚ä»»åŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">è¿™äº›ç‰¹æ€§ä½¿å¾—CAMELé¡¹ç›®åœ¨AIç ”ç©¶å’Œåº”ç”¨ä¸­å…·æœ‰é‡è¦çš„æ„ä¹‰ï¼Œç‰¹åˆ«æ˜¯åœ¨ç†è§£å’Œå‘å±•æ›´é«˜çº§çš„äº¤äº’ å¼AIç³»ç»Ÿæ–¹é¢ã€‚</span><br><span class="line"></span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„æŸ¥è¯¢ï¼ˆè¾“å…¥&#x27;quit&#x27;é€€å‡ºï¼‰: quit</span><br><span class="line">æ„Ÿè°¢ä½¿ç”¨ï¼å†è§ï¼</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸¤è½®é—®ç­”è¾“å‡ºçš„æ’åºæ•ˆæœï¼š</p>
<p><strong>ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼šâ€œcamelæ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºæˆ‘AIå­¦ä¹ æœ‰ä»€ä¹ˆå¸®åŠ©ï¼Ÿâ€</strong></p>
<p>æ­£åœ¨åˆæ­¥æ£€ç´¢æ–‡æ¡£ (Top-5)â€¦<br>âœ“ åˆæ­¥æ£€ç´¢åˆ° 5 ä¸ªæ–‡æ¡£ã€‚<br>æ­£åœ¨ä½¿ç”¨LLMè¿›è¡Œæ–‡æ¡£é‡æ’â€¦<br>âœ“ LLMé‡æ’å®Œæˆã€‚æ–°é¡ºåº: [5, 3, 4, 2, 1]</p>
<ul>
<li><strong>åŸå§‹æ£€ç´¢ç»“æœï¼š</strong> æ–‡æ¡£3ï¼ˆâ€œCAMEL: Communicative Agents for â€˜Mindâ€™ Exploration of Large Language Model Sociâ€¦â€ï¼‰æ˜¯å…³äºCAMELé¡¹ç›®çš„æ ¸å¿ƒæ–‡æ¡£ï¼Œä½†æ˜¯ä»£ç†å°†å…¶æ’åœ¨ç¬¬ä¸‰ä½ã€‚è€Œæ–‡æ¡£5ï¼ˆâ€œagent is asked to draw all the Camelidae speciesâ€¦â€ï¼‰æ˜¯å…³äºç”Ÿç‰©å­¦ä¸Šçš„â€œé©¼ç§‘â€çš„ï¼Œä¸AIå­¦ä¹ çš„ç›¸å…³æ€§è¾ƒä½ï¼Œæ•…æ’åœ¨ç¬¬äº”ä½ã€‚</li>
<li><strong>LLMé‡æ’åçš„ç»“æœï¼š</strong> LLMå°†æ–‡æ¡£5ï¼ˆé©¼ç§‘ï¼‰é‡æ’åˆ°äº†ç¬¬ä¸€ä½ï¼Œè€Œå°†æ–‡æ¡£3ï¼ˆCAMELé¡¹ç›®ï¼‰é‡æ’åˆ°äº†ç¬¬äºŒä½ã€‚è¿™è¡¨æ˜LLMåœ¨è¿™æ¬¡é‡æ’ä¸­å°†ç”Ÿç‰©å­¦å«ä¹‰çš„â€œcamelâ€ç½®äºäº†æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå°½ç®¡æˆ‘ä»¬æŸ¥è¯¢çš„ååŠéƒ¨åˆ†æ˜ç¡®æŒ‡å‘äº†AIå­¦ä¹ ã€‚</li>
<li><strong>æœ€ç»ˆç­”æ¡ˆï¼š</strong> å°½ç®¡é‡æ’ç»“æœå°†æ¬¡ç›¸å…³æ–‡æ¡£æ’åœ¨äº†å‰é¢ï¼Œä½†æœ€ç»ˆç­”æ¡ˆä¾ç„¶èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«â€œcamelâ€çš„ä¸¤ç§å«ä¹‰ï¼ˆç”Ÿç‰©å­¦å’ŒCAMELé¡¹ç›®ï¼‰ï¼Œå¹¶è¯¦ç»†è§£é‡Šäº†CAMELé¡¹ç›®å¯¹AIå­¦ä¹ çš„å¸®åŠ©ï¼Œè¿™è¯´æ˜RAGçš„ç”Ÿæˆéƒ¨åˆ†èƒ½å¤Ÿæœ‰æ•ˆåœ°åˆ©ç”¨æ‰€æœ‰æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ï¼Œå³ä½¿æ–‡æ¡£é¡ºåºä¸å®Œå…¨ç†æƒ³ã€‚</li>
</ul>
<p><strong>ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼šâ€œcamelå…·å¤‡å“ªäº›ç‰¹æ€§ï¼Ÿâ€</strong></p>
<ul>
<li><strong>åŸå§‹æ£€ç´¢ç»“æœï¼š</strong> æ–‡æ¡£1ï¼ˆâ€œCAMEL: Communicative Agents for â€˜Mindâ€™ Exploration of Large Language Model Sociâ€¦â€ï¼‰æ˜¯å…³äºCAMELé¡¹ç›®æ ¸å¿ƒçš„æ–‡æ¡£ï¼Œæ’åœ¨ç¬¬ä¸€ä½ã€‚</li>
<li><strong>LLMé‡æ’åçš„ç»“æœï¼š</strong> LLMçš„é‡æ’é¡ºåºæ˜¯<code>[1, 2, 3, 4, 5]</code>ï¼Œä¸åŸå§‹æ£€ç´¢ç»“æœçš„é¡ºåºå®Œå…¨ä¸€è‡´ã€‚è¿™è¡¨æ˜LLMè®¤ä¸ºåŸå§‹æ£€ç´¢å™¨æä¾›çš„æ–‡æ¡£é¡ºåºå·²ç»è¶³å¤Ÿä¼˜åŒ–ï¼Œæˆ–è€…å®ƒæ²¡æœ‰æ‰¾åˆ°æ›´ä¼˜çš„é‡æ’æ–¹å¼ã€‚</li>
<li><strong>æœ€ç»ˆç­”æ¡ˆï¼š</strong> æœ€ç»ˆç­”æ¡ˆè¯¦ç»†åˆ—ä¸¾äº†CAMELé¡¹ç›®çš„å„é¡¹ç‰¹æ€§ï¼Œè¿™å¾—ç›ŠäºåŸå§‹æ£€ç´¢ç»“æœä¸­ç›¸å…³æ€§é«˜çš„æ–‡æ¡£ï¼ˆæ–‡æ¡£1ï¼‰å·²ç»ä½äºé å‰çš„ä½ç½®ã€‚</li>
</ul>
<p>å› æ­¤å¯è§**LLM ReRankerèƒ½å¤Ÿæ ¹æ®æŸ¥è¯¢å¯¹æ–‡æ¡£è¿›è¡Œé‡æ–°æ’åºã€‚**åœ¨ç¬¬ä¸€ä¸ªæŸ¥è¯¢ä¸­ï¼Œå®ƒæ”¹å˜äº†æ–‡æ¡£é¡ºåºï¼Œä½†å¹¶éæ€»æ˜¯å°†æœ€ç›¸å…³çš„æ–‡æ¡£ï¼ˆä»äººç±»è§’åº¦çœ‹ï¼‰æ’åœ¨é¦–ä½ï¼Œå¯èƒ½å—åˆ°æ–‡æ¡£å†…å®¹ä¸­â€œcamelâ€å¤šä¹‰æ€§çš„å½±å“ã€‚åœ¨ç¬¬äºŒä¸ªæŸ¥è¯¢ä¸­ï¼Œå®ƒç»´æŒäº†åŸå§‹é¡ºåºã€‚è¿™è¡¨æ˜LLMé‡æ’å™¨åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥ä¼˜åŒ–æ–‡æ¡£é¡ºåºï¼Œä½†åœ¨å¤„ç†å¤šä¹‰æ€§æŸ¥è¯¢æ—¶å¯èƒ½éœ€è¦æ›´ç²¾ç»†çš„æç¤ºè¯å·¥ç¨‹æˆ–ç»“åˆå…¶ä»–ä¿¡å·æ¥ç¡®ä¿æœ€é«˜ç›¸å…³æ€§çš„æ–‡æ¡£å§‹ç»ˆæ’åœ¨æœ€å‰é¢ã€‚ç„¶è€Œï¼Œå³ä½¿é‡æ’ç»“æœå¹¶éå®Œç¾ï¼Œ<strong>RAGçš„ç”Ÿæˆèƒ½åŠ›ä¾ç„¶èƒ½å¤Ÿä»æä¾›çš„ä¸Šä¸‹æ–‡ä¸­æå–ä¿¡æ¯å¹¶ç»™å‡ºè¾ƒä¸ºå…¨é¢çš„ç­”æ¡ˆã€‚</strong></p>
<h3 id="å…³äºTask1å’ŒTask2çš„åŒºåˆ«æ€è€ƒï¼šè¿™ä¸¤ä¸ªä»»åŠ¡éƒ½æ¶‰åŠåœ¨RAGåº”ç”¨ä¸­é›†æˆé‡æ’ï¼ˆReRankerï¼‰æ¨¡å—ï¼Œä½†å®ƒä»¬åœ¨å®ç°æ–¹å¼å’Œæ‰€ä¾èµ–çš„æŠ€æœ¯æ ˆä¸Šå­˜åœ¨æ˜¾è‘—åŒºåˆ«ï¼š"><a href="#å…³äºTask1å’ŒTask2çš„åŒºåˆ«æ€è€ƒï¼šè¿™ä¸¤ä¸ªä»»åŠ¡éƒ½æ¶‰åŠåœ¨RAGåº”ç”¨ä¸­é›†æˆé‡æ’ï¼ˆReRankerï¼‰æ¨¡å—ï¼Œä½†å®ƒä»¬åœ¨å®ç°æ–¹å¼å’Œæ‰€ä¾èµ–çš„æŠ€æœ¯æ ˆä¸Šå­˜åœ¨æ˜¾è‘—åŒºåˆ«ï¼š" class="headerlink" title="å…³äºTask1å’ŒTask2çš„åŒºåˆ«æ€è€ƒï¼šè¿™ä¸¤ä¸ªä»»åŠ¡éƒ½æ¶‰åŠåœ¨RAGåº”ç”¨ä¸­é›†æˆé‡æ’ï¼ˆReRankerï¼‰æ¨¡å—ï¼Œä½†å®ƒä»¬åœ¨å®ç°æ–¹å¼å’Œæ‰€ä¾èµ–çš„æŠ€æœ¯æ ˆä¸Šå­˜åœ¨æ˜¾è‘—åŒºåˆ«ï¼š"></a>å…³äºTask1å’ŒTask2çš„åŒºåˆ«æ€è€ƒï¼šè¿™ä¸¤ä¸ªä»»åŠ¡éƒ½æ¶‰åŠåœ¨RAGåº”ç”¨ä¸­é›†æˆé‡æ’ï¼ˆReRankerï¼‰æ¨¡å—ï¼Œä½†å®ƒä»¬åœ¨å®ç°æ–¹å¼å’Œæ‰€ä¾èµ–çš„æŠ€æœ¯æ ˆä¸Šå­˜åœ¨æ˜¾è‘—åŒºåˆ«ï¼š</h3><h4 id="Task-1ï¼šåŸºäºAPIè°ƒç”¨æˆ–æœ¬åœ°éƒ¨ç½²çš„é¢„è®­ç»ƒRerankeræ¨¡å‹é›†æˆ"><a href="#Task-1ï¼šåŸºäºAPIè°ƒç”¨æˆ–æœ¬åœ°éƒ¨ç½²çš„é¢„è®­ç»ƒRerankeræ¨¡å‹é›†æˆ" class="headerlink" title="Task 1ï¼šåŸºäºAPIè°ƒç”¨æˆ–æœ¬åœ°éƒ¨ç½²çš„é¢„è®­ç»ƒRerankeræ¨¡å‹é›†æˆ"></a>Task 1ï¼šåŸºäºAPIè°ƒç”¨æˆ–æœ¬åœ°éƒ¨ç½²çš„é¢„è®­ç»ƒRerankeræ¨¡å‹é›†æˆ</h4><ul>
<li><strong>å®ç°æ–¹å¼ï¼š</strong> è¿™ä¸ªä»»åŠ¡ä¾§é‡äºåˆ©ç”¨<strong>å¤–éƒ¨çš„ã€ä¸“é—¨è®­ç»ƒè¿‡çš„é‡æ’æ¨¡å‹æˆ–æœåŠ¡</strong>ã€‚<ul>
<li><strong>API è°ƒç”¨ï¼š</strong> åƒCohere ReRankè¿™æ ·çš„æœåŠ¡ï¼Œæä¾›äº†ä¸€ä¸ªAPIæ¥å£ï¼Œæ‚¨å¯ä»¥å°†æŸ¥è¯¢å’Œæ–‡æ¡£åˆ—è¡¨å‘é€ç»™å®ƒï¼Œå®ƒä¼šè¿”å›é‡æ’åçš„æ–‡æ¡£ã€‚è¿™ç§æ–¹å¼é€šå¸¸å¼€ç®±å³ç”¨ï¼Œæ€§èƒ½ç»è¿‡ä¼˜åŒ–ã€‚</li>
<li><strong>æœ¬åœ°éƒ¨ç½²Rerankeræ¨¡å‹ï¼š</strong> æŒ‡çš„æ˜¯ä¸‹è½½å¹¶è¿è¡Œä¸€ä¸ªå·²ç»é¢„è®­ç»ƒå¥½çš„é‡æ’æ¨¡å‹ï¼ˆä¾‹å¦‚åŸºäºBERTã€RoBERTaç­‰æ¶æ„çš„è·¨ç¼–ç å™¨æ¨¡å‹ï¼‰ï¼Œåœ¨æœ¬åœ°ç¯å¢ƒä¸­è¿›è¡Œæ–‡æ¡£é‡æ’ã€‚</li>
</ul>
</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong><ul>
<li><strong>æ•ˆç‡é«˜ã€æ€§èƒ½ä¼˜è¶Šï¼š</strong> è¿™äº›æ¨¡å‹é€šå¸¸æ˜¯ä¸“é—¨ä¸ºé‡æ’ä»»åŠ¡è®­ç»ƒçš„ï¼Œèƒ½å¤Ÿæ•æ‰æ–‡æ¡£å’ŒæŸ¥è¯¢ä¹‹é—´çš„ç»†å¾®ç›¸å…³æ€§ï¼Œæ€§èƒ½é€šå¸¸æ¯”é€šç”¨å¤§æ¨¡å‹åœ¨é‡æ’ä¸Šçš„è¡¨ç°æ›´ç¨³å®šå’Œé«˜æ•ˆã€‚</li>
<li><strong>å¼€ç®±å³ç”¨ï¼š</strong> é›†æˆè¿‡ç¨‹é€šå¸¸æ˜¯è°ƒç”¨SDKæˆ–APIï¼Œç›¸å¯¹ç®€å•å¿«æ·ã€‚</li>
<li><strong>èµ„æºæ¶ˆè€—ï¼š</strong> å¦‚æœæ˜¯æœ¬åœ°éƒ¨ç½²ï¼Œéœ€è¦ä¸€å®šçš„è®¡ç®—èµ„æºï¼›å¦‚æœè°ƒç”¨APIï¼Œåˆ™æ¶‰åŠå¤–éƒ¨æœåŠ¡è´¹ç”¨ã€‚</li>
</ul>
</li>
<li><strong>å‚è€ƒé“¾æ¥åˆ†æï¼š</strong> <code>https://github.com/camel-ai/camel/blob/master/camel/retrievers/cohere_rerank_retriever.py</code> æŒ‡å‘CAMELæ¡†æ¶ä¸­ä¸€ä¸ªä¸Cohere ReRankæœåŠ¡é›†æˆçš„æ£€ç´¢å™¨ã€‚è¿™æ˜ç¡®è¡¨ç¤ºTask 1æ˜¯å…³äºä½¿ç”¨<strong>å¤–éƒ¨çš„ã€ä¸“ä¸šçš„é‡æ’æœåŠ¡</strong>ã€‚</li>
</ul>
<h4 id="Task-2ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œæç¤ºè¯å·¥ç¨‹å®ç°Reranker"><a href="#Task-2ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œæç¤ºè¯å·¥ç¨‹å®ç°Reranker" class="headerlink" title="Task 2ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œæç¤ºè¯å·¥ç¨‹å®ç°Reranker"></a>Task 2ï¼šåŸºäºå¤§è¯­è¨€æ¨¡å‹å’Œæç¤ºè¯å·¥ç¨‹å®ç°Reranker</h4><ul>
<li><strong>å®ç°æ–¹å¼ï¼š</strong> è¿™ä¸ªä»»åŠ¡çš„æ ¸å¿ƒæ˜¯åˆ©ç”¨<strong>é€šç”¨å¤§è¯­è¨€æ¨¡å‹çš„é›¶æ ·æœ¬æˆ–å°‘æ ·æœ¬èƒ½åŠ›ï¼Œé€šè¿‡ç²¾å·§çš„æç¤ºè¯ï¼ˆPrompt Engineeringï¼‰æ¥â€œå¼•å¯¼â€LLMæ‰§è¡Œé‡æ’ä»»åŠ¡</strong>ã€‚<ul>
<li>æ‚¨éœ€è¦è®¾è®¡ä¸€ä¸ªæç¤ºè¯ï¼Œå‘Šè¯‰LLMå®ƒæ˜¯ä¸€ä¸ªâ€œé‡æ’åŠ©æ‰‹â€ï¼Œæä¾›æŸ¥è¯¢å’Œå¾…é‡æ’çš„æ–‡æ¡£åˆ—è¡¨ï¼Œå¹¶è¦æ±‚LLMè¾“å‡ºé‡æ’åçš„æ–‡æ¡£é¡ºåºæˆ–è¯„åˆ†ã€‚</li>
<li>é‡æ’çš„é€»è¾‘å®Œå…¨ç”±LLMçš„æ¨ç†èƒ½åŠ›å’Œæ‚¨çš„æç¤ºè¯è®¾è®¡å†³å®šã€‚</li>
</ul>
</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong><ul>
<li><strong>çµæ´»æ€§é«˜ï¼š</strong> å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚ï¼Œé€šè¿‡ä¿®æ”¹æç¤ºè¯æ¥è°ƒæ•´é‡æ’é€»è¾‘ï¼Œé€‚ç”¨äºå„ç§è‡ªå®šä¹‰åœºæ™¯ã€‚</li>
<li><strong>ä¸ä¾èµ–ç‰¹å®šRerankeræ¨¡å‹ï¼š</strong> åªè¦æœ‰é€šç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆå¦‚Qwenã€ChatGPTç­‰ï¼‰å³å¯å®ç°ï¼Œæ— éœ€é¢å¤–éƒ¨ç½²ä¸“é—¨çš„é‡æ’æ¨¡å‹ã€‚</li>
<li><strong>æ€§èƒ½æ³¢åŠ¨ï¼š</strong> é‡æ’æ•ˆæœé«˜åº¦ä¾èµ–äºLLMçš„ç†è§£èƒ½åŠ›å’Œæç¤ºè¯çš„è´¨é‡ï¼Œå¯èƒ½ä¸å¦‚ä¸“é—¨è®­ç»ƒçš„Rerankeræ¨¡å‹ç¨³å®šå’Œæè‡´ã€‚</li>
<li><strong>èµ„æºæ¶ˆè€—ï¼š</strong> è°ƒç”¨LLMçš„APIé€šå¸¸ä¼šæœ‰æˆæœ¬ï¼Œä¸”LLMçš„æ¨ç†é€Ÿåº¦å¯èƒ½æ¯”ä¸“é—¨çš„Rerankeræ…¢ã€‚</li>
</ul>
</li>
<li><strong>å‚è€ƒé“¾æ¥åˆ†æï¼š</strong> <code>https://github.com/fengju0213/NavigatorAI/blob/main/2Travel_information_generation.py</code> ä»¥åŠæ‚¨ä¹‹å‰è®©æˆ‘ä¼˜åŒ–è¿‡çš„ä»£ç ï¼Œéƒ½æ˜¯é€šè¿‡åœ¨CAMELæ¡†æ¶ä¸­ä½¿ç”¨ <code>ChatAgent</code>ï¼ˆå³ä¸€ä¸ªLLMä»£ç†ï¼‰å¹¶ç»“åˆè‡ªå®šä¹‰çš„ç³»ç»Ÿæ¶ˆæ¯å’Œç”¨æˆ·æ¶ˆæ¯æ¥æ¨¡æ‹Ÿé‡æ’è¿‡ç¨‹çš„ã€‚è¿™æ˜ç¡®è¡¨ç¤ºTask 2æ˜¯å…³äº<strong>é€šè¿‡æç¤ºè¯å·¥ç¨‹å°†LLMä½œä¸ºé‡æ’å™¨ä½¿ç”¨</strong>ã€‚</li>
</ul>
<h3 id="æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š"><a href="#æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š" class="headerlink" title="æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š"></a>æ ¸å¿ƒåŒºåˆ«æ€»ç»“ï¼š</h3><table>
<thead>
<tr>
<th>ç‰¹å¾</th>
<th>Task 1ï¼šAPI&#x2F;æœ¬åœ°éƒ¨ç½²Rerankeræ¨¡å‹</th>
<th>Task 2ï¼šLLM + æç¤ºè¯å·¥ç¨‹å®ç°Reranker</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é‡æ’æ ¸å¿ƒ</strong></td>
<td>ä¸“é—¨è®­ç»ƒçš„é‡æ’æ¨¡å‹&#x2F;æœåŠ¡</td>
<td>é€šç”¨å¤§è¯­è¨€æ¨¡å‹ (LLM) çš„æ¨ç†èƒ½åŠ›</td>
</tr>
<tr>
<td><strong>å®ç°æ–¹å¼</strong></td>
<td>è°ƒç”¨æˆç†Ÿçš„APIæˆ–SDKï¼Œæˆ–éƒ¨ç½²ç°æœ‰æ¨¡å‹</td>
<td>è®¾è®¡æç¤ºè¯ï¼Œå¼•å¯¼LLMè¿›è¡Œé‡æ’</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>é€šå¸¸æ›´ç¨³å®šã€é«˜æ•ˆï¼Œé’ˆå¯¹é‡æ’ä»»åŠ¡ä¼˜åŒ–</td>
<td>ä¾èµ–LLMèƒ½åŠ›å’Œæç¤ºè¯è´¨é‡ï¼Œå¯èƒ½æ³¢åŠ¨è¾ƒå¤§</td>
</tr>
<tr>
<td><strong>çµæ´»æ€§</strong></td>
<td>è¾ƒä½ï¼Œé‡æ’é€»è¾‘å›ºå®šåœ¨æ¨¡å‹ä¸­</td>
<td>è¾ƒé«˜ï¼Œå¯é€šè¿‡è°ƒæ•´æç¤ºè¯çµæ´»å®šåˆ¶é‡æ’é€»è¾‘</td>
</tr>
<tr>
<td><strong>èµ„æº</strong></td>
<td>å¯èƒ½éœ€è¦GPUï¼ˆæœ¬åœ°ï¼‰æˆ–APIè´¹ç”¨ï¼ˆäº‘æœåŠ¡ï¼‰</td>
<td>è°ƒç”¨LLMçš„APIè´¹ç”¨ï¼ŒLLMæœ¬èº«è¿è¡Œèµ„æº</td>
</tr>
<tr>
<td><strong>å¼€å‘éš¾åº¦</strong></td>
<td>ç›¸å¯¹è¾ƒä½ï¼Œå¤šä¸ºé…ç½®å’Œé›†æˆ</td>
<td>éœ€è¦ç²¾é€šæç¤ºè¯å·¥ç¨‹ï¼Œè°ƒè¯•LLMè¡Œä¸º</td>
</tr>
</tbody></table>
<h2 id="Task3"><a href="#Task3" class="headerlink" title="Task3"></a>Task3</h2><h3 id="å¯¼å‡ºæœ¬æ•™ç¨‹æ–‡æ¡£ä½œä¸ºä¸€ä¸ªPDFæ–‡ä»¶ï¼Œå°è¯•æ­å»ºä¸€ä¸ªå…·æœ‰å¤šæ¨¡æ€æ£€ç´¢èƒ½åŠ›çš„RAGåº”ç”¨æ¥å¸®åŠ©å…¶ä»–å­¦ä¹ è€…å›ç­”é—®é¢˜ã€‚"><a href="#å¯¼å‡ºæœ¬æ•™ç¨‹æ–‡æ¡£ä½œä¸ºä¸€ä¸ªPDFæ–‡ä»¶ï¼Œå°è¯•æ­å»ºä¸€ä¸ªå…·æœ‰å¤šæ¨¡æ€æ£€ç´¢èƒ½åŠ›çš„RAGåº”ç”¨æ¥å¸®åŠ©å…¶ä»–å­¦ä¹ è€…å›ç­”é—®é¢˜ã€‚" class="headerlink" title="å¯¼å‡ºæœ¬æ•™ç¨‹æ–‡æ¡£ä½œä¸ºä¸€ä¸ªPDFæ–‡ä»¶ï¼Œå°è¯•æ­å»ºä¸€ä¸ªå…·æœ‰å¤šæ¨¡æ€æ£€ç´¢èƒ½åŠ›çš„RAGåº”ç”¨æ¥å¸®åŠ©å…¶ä»–å­¦ä¹ è€…å›ç­”é—®é¢˜ã€‚"></a>å¯¼å‡ºæœ¬æ•™ç¨‹æ–‡æ¡£ä½œä¸ºä¸€ä¸ªPDFæ–‡ä»¶ï¼Œå°è¯•æ­å»ºä¸€ä¸ªå…·æœ‰å¤šæ¨¡æ€æ£€ç´¢èƒ½åŠ›çš„RAGåº”ç”¨æ¥å¸®åŠ©å…¶ä»–å­¦ä¹ è€…å›ç­”é—®é¢˜ã€‚</h3><p>ç”±äºæˆ‘æ²¡æœ‰æ‰¾åˆ°å¾ˆå¥½çš„å°†æœ¬æ•™ç¨‹æ–‡æ¡£è½¬åŒ–ä¸ºä¸€ä¸ªçº¿ä¸Šå¯ç›´æ¥æ•°æ®å‘é‡åŒ–çš„æ–¹æ³•ï¼Œä½†ç»è¿‡è¿è¡Œç¡®è®¤ç¡®å®å¯ä»¥å°†çº¿ä¸Šçš„PDFæ–‡æ¡£æœ¬åœ°ä¸‹è½½åˆå§‹åŒ–æ•°æ®åº“ã€‚<br>å› æ­¤æˆ‘ä»¬æ¼”ç¤ºæ—¶æš‚æ—¶é‡‡ç”¨æœ¬åœ°ä¸‹è½½å¥½çš„æœ¬æ•™ç¨‹PDFæ–‡æ¡£ä½œä¸ºæ¼”ç¤ºæ¡ˆä¾‹ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥è¯´æ˜ä¸€ä¸‹æ•´ä¸ªç³»ç»Ÿçš„å…·ä½“å®ç°ï¼š</p>
<h4 id="äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ"><a href="#äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ" class="headerlink" title="äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ"></a>äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ</h4><h5 id="é¡¹ç›®ç®€ä»‹"><a href="#é¡¹ç›®ç®€ä»‹" class="headerlink" title="é¡¹ç›®ç®€ä»‹"></a>é¡¹ç›®ç®€ä»‹</h5><p>è¿™æ˜¯ä¸€ä¸ªåŸºäºCAMELæ¡†æ¶çš„äº¤äº’å¼å¤šæ¨¡æ€RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿï¼Œé›†æˆäº†PDFæ–‡æ¡£å¤„ç†ã€ç½‘é¡µçˆ¬å–ã€çŸ¥è¯†å›¾è°±æ„å»ºå’Œå¤šç§æ£€ç´¢æ¨¡å¼ã€‚ç³»ç»Ÿæ”¯æŒæ–‡æœ¬ã€å›¾åƒã€è¡¨æ ¼ç­‰å¤šæ¨¡æ€å†…å®¹çš„æ™ºèƒ½æ£€ç´¢å’Œåˆ†æã€‚</p>
<h5 id="æ ¸å¿ƒç‰¹æ€§"><a href="#æ ¸å¿ƒç‰¹æ€§" class="headerlink" title="æ ¸å¿ƒç‰¹æ€§"></a>æ ¸å¿ƒç‰¹æ€§</h5><h6 id="å¤šæ¨¡æ€å†…å®¹å¤„ç†"><a href="#å¤šæ¨¡æ€å†…å®¹å¤„ç†" class="headerlink" title="å¤šæ¨¡æ€å†…å®¹å¤„ç†"></a>å¤šæ¨¡æ€å†…å®¹å¤„ç†</h6><ul>
<li><strong>PDFæ–‡æ¡£è§£æ</strong>ï¼šæ”¯æŒåœ¨çº¿PDFå’Œæœ¬åœ°PDFæ–‡ä»¶åŠ è½½</li>
<li><strong>å¤šæ¨¡æ€å…ƒç´ æå–</strong>ï¼šè‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†æ–‡æœ¬ã€å›¾åƒã€è¡¨æ ¼å†…å®¹</li>
<li><strong>æ™ºèƒ½å†…å®¹åˆ†ç±»</strong>ï¼šæŒ‰å†…å®¹ç±»å‹è¿›è¡Œåˆ†ç±»å­˜å‚¨å’Œæ£€ç´¢</li>
</ul>
<h6 id="å¤šç§æ£€ç´¢æ¨¡å¼"><a href="#å¤šç§æ£€ç´¢æ¨¡å¼" class="headerlink" title="å¤šç§æ£€ç´¢æ¨¡å¼"></a>å¤šç§æ£€ç´¢æ¨¡å¼</h6><ol>
<li><strong>å¿«é€Ÿæ£€ç´¢</strong>ï¼šåŸºç¡€å‘é‡æ£€ç´¢ï¼Œå¿«é€Ÿè·å–ç›¸å…³æ–‡æ¡£</li>
<li><strong>æ·±åº¦æ£€ç´¢</strong>ï¼šæŸ¥è¯¢é‡å†™ + HyDE + RRFèåˆçš„é«˜çº§æ£€ç´¢</li>
<li><strong>ä¸»é¢˜æ£€ç´¢</strong>ï¼šPDFæ–‡æ¡£ + ç½‘é¡µçˆ¬å–çš„ç»¼åˆæ£€ç´¢</li>
</ol>
<h6 id="AIæ™ºèƒ½åˆ†æ"><a href="#AIæ™ºèƒ½åˆ†æ" class="headerlink" title="AIæ™ºèƒ½åˆ†æ"></a>AIæ™ºèƒ½åˆ†æ</h6><ul>
<li><strong>CAMELæ¡†æ¶é›†æˆ</strong>ï¼šä½¿ç”¨CAMEL ModelFactoryè¿›è¡Œæ¨¡å‹ç®¡ç†</li>
<li><strong>æŸ¥è¯¢é‡å†™</strong>ï¼šæ™ºèƒ½ä¼˜åŒ–ç”¨æˆ·æŸ¥è¯¢ä»¥æé«˜æ£€ç´¢æ•ˆæœ</li>
<li><strong>HyDEå¢å¼º</strong>ï¼šå‡è®¾æ–‡æ¡£ç”ŸæˆæŠ€æœ¯æå‡æ£€ç´¢ç²¾åº¦</li>
<li><strong>RRFèåˆ</strong>ï¼šå¤šè·¯æ£€ç´¢ç»“æœçš„æ™ºèƒ½èåˆæ’åº</li>
</ul>
<h6 id="ç½‘é¡µç ”ç©¶ç³»ç»Ÿ"><a href="#ç½‘é¡µç ”ç©¶ç³»ç»Ÿ" class="headerlink" title="ç½‘é¡µç ”ç©¶ç³»ç»Ÿ"></a>ç½‘é¡µç ”ç©¶ç³»ç»Ÿ</h6><ul>
<li><strong>æ™ºèƒ½ç½‘é¡µçˆ¬å–</strong>ï¼šåŸºäºä¸»é¢˜çš„ç½‘é¡µå†…å®¹æŠ“å–</li>
<li><strong>çŸ¥è¯†å›¾è°±æ„å»º</strong>ï¼šè‡ªåŠ¨æ„å»ºä¸»é¢˜ç›¸å…³çš„çŸ¥è¯†å›¾è°±</li>
<li><strong>å¤šæºä¿¡æ¯èåˆ</strong>ï¼šPDFæ–‡æ¡£ä¸ç½‘é¡µä¿¡æ¯çš„æ™ºèƒ½æ•´åˆ</li>
</ul>
<h6 id="äº¤äº’å¼ä½“éªŒ"><a href="#äº¤äº’å¼ä½“éªŒ" class="headerlink" title="äº¤äº’å¼ä½“éªŒ"></a>äº¤äº’å¼ä½“éªŒ</h6><ul>
<li><strong>å®æ—¶å¯¹è¯ç•Œé¢</strong>ï¼šæ”¯æŒè¿ç»­é—®ç­”å’Œä¸Šä¸‹æ–‡ç†è§£</li>
<li><strong>ç»“æœå¯è§†åŒ–</strong>ï¼šè¯¦ç»†çš„æ£€ç´¢ç»“æœå±•ç¤ºå’Œåˆ†æ</li>
<li><strong>æŠ¥å‘Šç”Ÿæˆ</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆç ”ç©¶æŠ¥å‘Šå’Œç»“æœä¿å­˜</li>
</ul>
<h5 id="ç³»ç»Ÿæ¶æ„"><a href="#ç³»ç»Ÿæ¶æ„" class="headerlink" title="ç³»ç»Ÿæ¶æ„"></a>ç³»ç»Ÿæ¶æ„</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ</span><br><span class="line">â”œâ”€â”€ æ ¸å¿ƒç»„ä»¶</span><br><span class="line">â”‚   â”œâ”€â”€ SimpleLLMInterface (CAMELæ¨¡å‹æ¥å£)</span><br><span class="line">â”‚   â”œâ”€â”€ SimpleEmbeddingModel (åµŒå…¥æ¨¡å‹)</span><br><span class="line">â”‚   â”œâ”€â”€ SimpleVectorRetriever (å‘é‡æ£€ç´¢å™¨)</span><br><span class="line">â”‚   â””â”€â”€ SimpleRAGSystem (RAGæ ¸å¿ƒç³»ç»Ÿ)</span><br><span class="line">â”œâ”€â”€ æ£€ç´¢æ¨¡å¼</span><br><span class="line">â”‚   â”œâ”€â”€ å¿«é€Ÿæ£€ç´¢ (åŸºç¡€å‘é‡æ£€ç´¢)</span><br><span class="line">â”‚   â”œâ”€â”€ æ·±åº¦æ£€ç´¢ (é‡å†™+HyDE+RRF)</span><br><span class="line">â”‚   â””â”€â”€ ä¸»é¢˜æ£€ç´¢ (PDF+ç½‘é¡µçˆ¬å–)</span><br><span class="line">â”œâ”€â”€ ç½‘é¡µç ”ç©¶ç³»ç»Ÿ</span><br><span class="line">â”‚   â”œâ”€â”€ UniversalResearchSystem (é€šç”¨ç ”ç©¶ç³»ç»Ÿ)</span><br><span class="line">â”‚   â”œâ”€â”€ InteractiveResearchSystem (äº¤äº’å¼ç ”ç©¶)</span><br><span class="line">â”‚   â””â”€â”€ EnhancedInteractiveResearchSystem (å¢å¼ºç‰ˆ)</span><br><span class="line">â””â”€â”€ äº¤äº’ç•Œé¢</span><br><span class="line">    â”œâ”€â”€ çŸ¥è¯†åº“ç®¡ç†</span><br><span class="line">    â”œâ”€â”€ æŸ¥è¯¢å¤„ç†</span><br><span class="line">    â””â”€â”€ ç»“æœå±•ç¤º</span><br></pre></td></tr></table></figure>
<h5 id="æ ¸å¿ƒæ¡†æ¶"><a href="#æ ¸å¿ƒæ¡†æ¶" class="headerlink" title="æ ¸å¿ƒæ¡†æ¶"></a>æ ¸å¿ƒæ¡†æ¶</h5><ul>
<li><strong>CAMEL</strong>: AIæ™ºèƒ½ä½“æ¡†æ¶ï¼Œæä¾›æ¨¡å‹ç®¡ç†å’Œå·¥å…·é›†æˆ</li>
<li><strong>LangChain</strong>: å¤§è¯­è¨€æ¨¡å‹åº”ç”¨å¼€å‘æ¡†æ¶</li>
<li><strong>Sentence Transformers</strong>: æ–‡æœ¬åµŒå…¥å’Œè¯­ä¹‰æ£€ç´¢</li>
</ul>
<h5 id="æ–‡æ¡£å¤„ç†"><a href="#æ–‡æ¡£å¤„ç†" class="headerlink" title="æ–‡æ¡£å¤„ç†"></a>æ–‡æ¡£å¤„ç†</h5><ul>
<li><strong>PyPDF</strong>: PDFæ–‡æ¡£è§£æå’Œæ–‡æœ¬æå–</li>
<li><strong>Unstructured</strong>: å¤šæ¨¡æ€æ–‡æ¡£å…ƒç´ è¯†åˆ«å’Œå¤„ç†</li>
<li><strong>BeautifulSoup</strong>: HTMLå†…å®¹è§£æå’Œæ¸…ç†</li>
</ul>
<h5 id="æ£€ç´¢å’Œå­˜å‚¨"><a href="#æ£€ç´¢å’Œå­˜å‚¨" class="headerlink" title="æ£€ç´¢å’Œå­˜å‚¨"></a>æ£€ç´¢å’Œå­˜å‚¨</h5><ul>
<li><strong>Scikit-learn</strong>: å‘é‡ç›¸ä¼¼åº¦è®¡ç®—å’Œæœºå™¨å­¦ä¹ </li>
<li><strong>NumPy</strong>: æ•°å€¼è®¡ç®—å’Œå‘é‡æ“ä½œ</li>
<li><strong>Neo4j</strong>: çŸ¥è¯†å›¾è°±å­˜å‚¨å’ŒæŸ¥è¯¢ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<h5 id="ç½‘é¡µçˆ¬å–"><a href="#ç½‘é¡µçˆ¬å–" class="headerlink" title="ç½‘é¡µçˆ¬å–"></a>ç½‘é¡µçˆ¬å–</h5><ul>
<li><strong>Requests</strong>: HTTPè¯·æ±‚å’Œç½‘é¡µå†…å®¹è·å–</li>
<li><strong>Firecrawl</strong>: æ™ºèƒ½ç½‘é¡µå†…å®¹æŠ“å–</li>
<li><strong>SearchToolkit</strong>: ç½‘é¡µæœç´¢å’Œä¿¡æ¯æ£€ç´¢</li>
</ul>
<h4 id="åŸºæœ¬ä½¿ç”¨æµç¨‹"><a href="#åŸºæœ¬ä½¿ç”¨æµç¨‹" class="headerlink" title="åŸºæœ¬ä½¿ç”¨æµç¨‹"></a>åŸºæœ¬ä½¿ç”¨æµç¨‹</h4><ol>
<li><p><strong>é€‰æ‹©PDFæ¥æº</strong></p>
<ul>
<li>åœ¨çº¿PDFï¼ˆè¾“å…¥URLï¼‰</li>
<li>æœ¬åœ°PDFï¼ˆè¾“å…¥æ–‡ä»¶è·¯å¾„ï¼‰</li>
<li>é»˜è®¤ç¤ºä¾‹PDFï¼ˆCAMELè®ºæ–‡ï¼‰</li>
</ul>
</li>
<li><p><strong>é€‰æ‹©æ£€ç´¢æ¨¡å¼</strong></p>
<ul>
<li>å¿«é€Ÿæ£€ç´¢ï¼šé€‚åˆç®€å•é—®ç­”</li>
<li>æ·±åº¦æ£€ç´¢ï¼šé€‚åˆå¤æ‚åˆ†æ</li>
<li>ä¸»é¢˜æ£€ç´¢ï¼šé€‚åˆç»¼åˆç ”ç©¶</li>
</ul>
</li>
<li><p><strong>è¾“å…¥æŸ¥è¯¢é—®é¢˜</strong></p>
<ul>
<li>æ”¯æŒä¸­è‹±æ–‡æŸ¥è¯¢</li>
<li>æ”¯æŒå¤æ‚çš„å¤šæ­¥éª¤é—®é¢˜</li>
<li>æ”¯æŒä¸Šä¸‹æ–‡ç›¸å…³çš„è¿ç»­å¯¹è¯</li>
</ul>
</li>
<li><p><strong>æŸ¥çœ‹ç»“æœ</strong></p>
<ul>
<li>æ£€ç´¢åˆ°çš„ç›¸å…³æ–‡æ¡£</li>
<li>AIç”Ÿæˆçš„è¯¦ç»†ç­”æ¡ˆ</li>
<li>å¯é€‰çš„ç»“æœä¿å­˜åŠŸèƒ½</li>
</ul>
</li>
</ol>
<h5 id="é«˜çº§åŠŸèƒ½"><a href="#é«˜çº§åŠŸèƒ½" class="headerlink" title="é«˜çº§åŠŸèƒ½"></a>é«˜çº§åŠŸèƒ½</h5><h6 id="ç½‘é¡µç ”ç©¶æ¨¡å¼"><a href="#ç½‘é¡µç ”ç©¶æ¨¡å¼" class="headerlink" title="ç½‘é¡µç ”ç©¶æ¨¡å¼"></a>ç½‘é¡µç ”ç©¶æ¨¡å¼</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨å¢å¼ºç‰ˆç ”ç©¶ç³»ç»Ÿ</span></span><br><span class="line">python RAG_WEB_TOPIC_Enhanced.py</span><br></pre></td></tr></table></figure>

<h6 id="è‡ªå®šä¹‰æ£€ç´¢å‚æ•°"><a href="#è‡ªå®šä¹‰æ£€ç´¢å‚æ•°" class="headerlink" title="è‡ªå®šä¹‰æ£€ç´¢å‚æ•°"></a>è‡ªå®šä¹‰æ£€ç´¢å‚æ•°</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨ä»£ç ä¸­è°ƒæ•´æ£€ç´¢å‚æ•°</span></span><br><span class="line">results = rag_system.enhanced_query(</span><br><span class="line">    original_query=query,</span><br><span class="line">    use_rewriting=<span class="literal">True</span>,      <span class="comment"># å¯ç”¨æŸ¥è¯¢é‡å†™</span></span><br><span class="line">    use_hyde=<span class="literal">True</span>,           <span class="comment"># å¯ç”¨HyDEå¢å¼º</span></span><br><span class="line">    use_rrf=<span class="literal">True</span>,            <span class="comment"># å¯ç”¨RRFèåˆ</span></span><br><span class="line">    top_k=<span class="number">5</span>,                 <span class="comment"># è¿”å›æ–‡æ¡£æ•°é‡</span></span><br><span class="line">    multimodal_preference=[<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="string">&#x27;table&#x27;</span>]  <span class="comment"># å¤šæ¨¡æ€åå¥½</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="æ£€ç´¢æ¨¡å¼"><a href="#æ£€ç´¢æ¨¡å¼" class="headerlink" title="æ£€ç´¢æ¨¡å¼"></a>æ£€ç´¢æ¨¡å¼</h5><h6 id="å¿«é€Ÿæ£€ç´¢"><a href="#å¿«é€Ÿæ£€ç´¢" class="headerlink" title="å¿«é€Ÿæ£€ç´¢"></a>å¿«é€Ÿæ£€ç´¢</h6><ul>
<li><strong>ç”¨é€”</strong>ï¼šåŸºç¡€é—®ç­”å’Œå¿«é€Ÿä¿¡æ¯æŸ¥æ‰¾</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šé€Ÿåº¦å¿«ï¼Œèµ„æºæ¶ˆè€—ä½</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç®€å•äº‹å®æŸ¥è¯¢ï¼Œæ¦‚å¿µè§£é‡Š</li>
</ul>
<h6 id="æ·±åº¦æ£€ç´¢"><a href="#æ·±åº¦æ£€ç´¢" class="headerlink" title="æ·±åº¦æ£€ç´¢"></a>æ·±åº¦æ£€ç´¢</h6><ul>
<li><strong>ç”¨é€”</strong>ï¼šå¤æ‚åˆ†æå’Œæ·±åº¦ç ”ç©¶</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå¤šæ­¥éª¤å¤„ç†ï¼Œç»“æœç²¾ç¡®</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå­¦æœ¯ç ”ç©¶ï¼ŒæŠ€æœ¯åˆ†æ</li>
</ul>
<h6 id="ä¸»é¢˜æ£€ç´¢"><a href="#ä¸»é¢˜æ£€ç´¢" class="headerlink" title="ä¸»é¢˜æ£€ç´¢"></a>ä¸»é¢˜æ£€ç´¢</h6><ul>
<li><strong>ç”¨é€”</strong>ï¼šç»¼åˆä¿¡æ¯æ”¶é›†å’Œè·¨æºç ”ç©¶</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šç»“åˆPDFå’Œç½‘é¡µä¿¡æ¯</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¸‚åœºè°ƒç ”ï¼Œè¶‹åŠ¿åˆ†æ</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å…·ä½“çš„å®ç°ä»£ç ï¼š</p>
<h4 id="å®ç°ä»£ç ï¼š"><a href="#å®ç°ä»£ç ï¼š" class="headerlink" title="å®ç°ä»£ç ï¼š"></a>å®ç°ä»£ç ï¼š</h4><h5 id="å®ç°ä»£ç ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š"><a href="#å®ç°ä»£ç ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š" class="headerlink" title="å®ç°ä»£ç ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š"></a>å®ç°ä»£ç ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š</h5><p><strong>ä¸»ä»£ç </strong>ï¼šã€Interactive_Multimodal_RAG.pyã€‘é›†æˆâ€œå¿«é€Ÿæ£€ç´¢â€+â€œæ·±åº¦æ£€ç´¢â€çš„å¤šæ¨¡æ€RAGåº”ç”¨<br><strong>åˆ†æ”¯ä»£ç </strong>ï¼šã€RAG_WEB_TOPIC_Enhanced.py + RAG_WEB_TOPIC.pyã€‘é›†æˆâ€œä¸»é¢˜â€æ£€ç´¢çš„Web æŠ“å– + çŸ¥è¯†å›¾è°±æ„å»ºçš„ç»¼åˆRAGåº”ç”¨</p>
<p>è¯´æ˜ï¼šRAG_WEB_TOPIC_Enhanced.py ç³»ç»ŸåŸºäº RAG_WEB_TOPIC.py æ”¹è¿›å¼€å‘ï¼Œåœ¨ä½¿ç”¨è¿è¡ŒRAG_WEB_TOPIC_Enhanced.py çš„æ—¶å€™ä¼šåŒæ—¶è¿è¡Œ RAG_WEB_TOPIC.py ä¸­çš„ä¸€äº›åŸºç¡€ä¾èµ–å’Œé…ç½®ã€‚</p>
<p><strong>ä¸»ä»£ç </strong>ï¼šã€Interactive_Multimodal_RAG.pyã€‘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br><span class="line">1024</span><br><span class="line">1025</span><br><span class="line">1026</span><br><span class="line">1027</span><br><span class="line">1028</span><br><span class="line">1029</span><br><span class="line">1030</span><br><span class="line">1031</span><br><span class="line">1032</span><br><span class="line">1033</span><br><span class="line">1034</span><br><span class="line">1035</span><br><span class="line">1036</span><br><span class="line">1037</span><br><span class="line">1038</span><br><span class="line">1039</span><br><span class="line">1040</span><br><span class="line">1041</span><br><span class="line">1042</span><br><span class="line">1043</span><br><span class="line">1044</span><br><span class="line">1045</span><br><span class="line">1046</span><br><span class="line">1047</span><br><span class="line">1048</span><br><span class="line">1049</span><br><span class="line">1050</span><br><span class="line">1051</span><br><span class="line">1052</span><br><span class="line">1053</span><br><span class="line">1054</span><br><span class="line">1055</span><br><span class="line">1056</span><br><span class="line">1057</span><br><span class="line">1058</span><br><span class="line">1059</span><br><span class="line">1060</span><br><span class="line">1061</span><br><span class="line">1062</span><br><span class="line">1063</span><br><span class="line">1064</span><br><span class="line">1065</span><br><span class="line">1066</span><br><span class="line">1067</span><br><span class="line">1068</span><br><span class="line">1069</span><br><span class="line">1070</span><br><span class="line">1071</span><br><span class="line">1072</span><br><span class="line">1073</span><br><span class="line">1074</span><br><span class="line">1075</span><br><span class="line">1076</span><br><span class="line">1077</span><br><span class="line">1078</span><br><span class="line">1079</span><br><span class="line">1080</span><br><span class="line">1081</span><br><span class="line">1082</span><br><span class="line">1083</span><br><span class="line">1084</span><br><span class="line">1085</span><br><span class="line">1086</span><br><span class="line">1087</span><br><span class="line">1088</span><br><span class="line">1089</span><br><span class="line">1090</span><br><span class="line">1091</span><br><span class="line">1092</span><br><span class="line">1093</span><br><span class="line">1094</span><br><span class="line">1095</span><br><span class="line">1096</span><br><span class="line">1097</span><br><span class="line">1098</span><br><span class="line">1099</span><br><span class="line">1100</span><br><span class="line">1101</span><br><span class="line">1102</span><br><span class="line">1103</span><br><span class="line">1104</span><br><span class="line">1105</span><br><span class="line">1106</span><br><span class="line">1107</span><br><span class="line">1108</span><br><span class="line">1109</span><br><span class="line">1110</span><br><span class="line">1111</span><br><span class="line">1112</span><br><span class="line">1113</span><br><span class="line">1114</span><br><span class="line">1115</span><br><span class="line">1116</span><br><span class="line">1117</span><br><span class="line">1118</span><br><span class="line">1119</span><br><span class="line">1120</span><br><span class="line">1121</span><br><span class="line">1122</span><br><span class="line">1123</span><br><span class="line">1124</span><br><span class="line">1125</span><br><span class="line">1126</span><br><span class="line">1127</span><br><span class="line">1128</span><br><span class="line">1129</span><br><span class="line">1130</span><br><span class="line">1131</span><br><span class="line">1132</span><br><span class="line">1133</span><br><span class="line">1134</span><br><span class="line">1135</span><br><span class="line">1136</span><br><span class="line">1137</span><br><span class="line">1138</span><br><span class="line">1139</span><br><span class="line">1140</span><br><span class="line">1141</span><br><span class="line">1142</span><br><span class="line">1143</span><br><span class="line">1144</span><br><span class="line">1145</span><br><span class="line">1146</span><br><span class="line">1147</span><br><span class="line">1148</span><br><span class="line">1149</span><br><span class="line">1150</span><br><span class="line">1151</span><br><span class="line">1152</span><br><span class="line">1153</span><br><span class="line">1154</span><br><span class="line">1155</span><br><span class="line">1156</span><br><span class="line">1157</span><br><span class="line">1158</span><br><span class="line">1159</span><br><span class="line">1160</span><br><span class="line">1161</span><br><span class="line">1162</span><br><span class="line">1163</span><br><span class="line">1164</span><br><span class="line">1165</span><br><span class="line">1166</span><br><span class="line">1167</span><br><span class="line">1168</span><br><span class="line">1169</span><br><span class="line">1170</span><br><span class="line">1171</span><br><span class="line">1172</span><br><span class="line">1173</span><br><span class="line">1174</span><br><span class="line">1175</span><br><span class="line">1176</span><br><span class="line">1177</span><br><span class="line">1178</span><br><span class="line">1179</span><br><span class="line">1180</span><br><span class="line">1181</span><br><span class="line">1182</span><br><span class="line">1183</span><br><span class="line">1184</span><br><span class="line">1185</span><br><span class="line">1186</span><br><span class="line">1187</span><br><span class="line">1188</span><br><span class="line">1189</span><br><span class="line">1190</span><br><span class="line">1191</span><br><span class="line">1192</span><br><span class="line">1193</span><br><span class="line">1194</span><br><span class="line">1195</span><br><span class="line">1196</span><br><span class="line">1197</span><br><span class="line">1198</span><br><span class="line">1199</span><br><span class="line">1200</span><br><span class="line">1201</span><br><span class="line">1202</span><br><span class="line">1203</span><br><span class="line">1204</span><br><span class="line">1205</span><br><span class="line">1206</span><br><span class="line">1207</span><br><span class="line">1208</span><br><span class="line">1209</span><br><span class="line">1210</span><br><span class="line">1211</span><br><span class="line">1212</span><br><span class="line">1213</span><br><span class="line">1214</span><br><span class="line">1215</span><br><span class="line">1216</span><br><span class="line">1217</span><br><span class="line">1218</span><br><span class="line">1219</span><br><span class="line">1220</span><br><span class="line">1221</span><br><span class="line">1222</span><br><span class="line">1223</span><br><span class="line">1224</span><br><span class="line">1225</span><br><span class="line">1226</span><br><span class="line">1227</span><br><span class="line">1228</span><br><span class="line">1229</span><br><span class="line">1230</span><br><span class="line">1231</span><br><span class="line">1232</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ</span></span><br><span class="line"><span class="string">æ”¯æŒPDFä¸Šä¼ ã€å¤šç§æ£€ç´¢æ¨¡å¼å’Œç½‘é¡µçˆ¬å–åŠŸèƒ½</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span>, <span class="type">Any</span>, <span class="type">Optional</span></span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics.pairwise <span class="keyword">import</span> cosine_similarity</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ CAMELç›¸å…³å¯¼å…¥</span></span><br><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType</span><br><span class="line"></span><br><span class="line"><span class="comment"># PDFå¤„ç†</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> pypdf <span class="keyword">import</span> PdfReader</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç¼ºå°‘pypdfåº“ï¼Œè¯·è¿è¡Œ: pip install pypdf&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> unstructured.partition.auto <span class="keyword">import</span> partition</span><br><span class="line">    <span class="keyword">from</span> unstructured.documents.elements <span class="keyword">import</span> Text, Image, Table</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç¼ºå°‘unstructuredåº“ï¼Œè¯·è¿è¡Œ: pip install unstructured&quot;</span>)</span><br><span class="line">    sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åµŒå…¥æ¨¡å‹</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> sentence_transformers <span class="keyword">import</span> SentenceTransformer</span><br><span class="line">    EMBEDDING_AVAILABLE = <span class="literal">True</span></span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç¼ºå°‘sentence-transformersåº“&quot;</span>)</span><br><span class="line">    EMBEDDING_AVAILABLE = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥ç½‘é¡µç ”ç©¶ç³»ç»Ÿ</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">from</span> RAG_WEB_TOPIC_Enhanced <span class="keyword">import</span> EnhancedInteractiveResearchSystem</span><br><span class="line">    WEB_RESEARCH_AVAILABLE = <span class="literal">True</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Web research system available&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ImportError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Web research system not available&quot;</span>)</span><br><span class="line">    WEB_RESEARCH_AVAILABLE = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleLLMInterface</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;LLMæ¥å£ - ä½¿ç”¨CAMEL ModelFactory&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, api_key: <span class="built_in">str</span>, model_name: <span class="built_in">str</span> = <span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>, use_camel: <span class="built_in">bool</span> = <span class="literal">True</span></span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> api_key:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;API key is required&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.api_key = api_key</span><br><span class="line">        <span class="variable language_">self</span>.model_name = model_name</span><br><span class="line">        <span class="variable language_">self</span>.use_camel = use_camel</span><br><span class="line">        <span class="variable language_">self</span>.model = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> use_camel:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># ä½¿ç”¨CAMEL ModelFactoryåˆå§‹åŒ–æ¨¡å‹</span></span><br><span class="line">                <span class="variable language_">self</span>.model = ModelFactory.create(</span><br><span class="line">                    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">                    model_type=model_name,</span><br><span class="line">                    url=<span class="string">&#x27;https://api-inference.modelscope.cn/v1/&#x27;</span>,</span><br><span class="line">                    api_key=api_key</span><br><span class="line">                )</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;CAMEL LLM initialized: <span class="subst">&#123;model_name&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;API key: <span class="subst">&#123;api_key[:<span class="number">10</span>]&#125;</span>...<span class="subst">&#123;api_key[-<span class="number">4</span>:]&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;CAMEL initialization failed, using fallback: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.model = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Direct API LLM initialized: <span class="subst">&#123;model_name&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;API key: <span class="subst">&#123;api_key[:<span class="number">10</span>]&#125;</span>...<span class="subst">&#123;api_key[-<span class="number">4</span>:]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate</span>(<span class="params">self, prompt: <span class="built_in">str</span>, max_tokens: <span class="built_in">int</span> = <span class="number">500</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ç”Ÿæˆæ–‡æœ¬å›ç­” - ä½¿ç”¨CAMELæ¨¡å‹æˆ–ç›´æ¥APIè°ƒç”¨&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># å¦‚æœCAMELæ¨¡å‹å¯ç”¨ï¼Œå°è¯•ä½¿ç”¨</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.model <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Generating response with CAMEL model...&quot;</span>)</span><br><span class="line">                <span class="comment"># ä½¿ç”¨CAMELæ¨¡å‹ç”Ÿæˆå›ç­”</span></span><br><span class="line">                <span class="keyword">from</span> camel.messages <span class="keyword">import</span> BaseMessage</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># åˆ›å»ºç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">                user_message = BaseMessage.make_user_message(</span><br><span class="line">                    role_name=<span class="string">&quot;user&quot;</span>,</span><br><span class="line">                    content=prompt</span><br><span class="line">                )</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è°ƒç”¨æ¨¡å‹ç”Ÿæˆå›ç­”</span></span><br><span class="line">                response = <span class="variable language_">self</span>.model.run([user_message])</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># ä¿®å¤ï¼šæ­£ç¡®å¤„ç†CAMELæ¨¡å‹çš„å“åº”</span></span><br><span class="line">                <span class="keyword">if</span> response:</span><br><span class="line">                    <span class="comment"># å¦‚æœå“åº”æ˜¯BaseMessageå¯¹è±¡</span></span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">hasattr</span>(response, <span class="string">&#x27;content&#x27;</span>):</span><br><span class="line">                        <span class="keyword">return</span> response.content</span><br><span class="line">                    <span class="comment"># å¦‚æœå“åº”æ˜¯åˆ—è¡¨ï¼Œå–ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">                    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(response, <span class="built_in">list</span>) <span class="keyword">and</span> <span class="built_in">len</span>(response) &gt; <span class="number">0</span>:</span><br><span class="line">                        first_response = response[<span class="number">0</span>]</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">hasattr</span>(first_response, <span class="string">&#x27;content&#x27;</span>):</span><br><span class="line">                            <span class="keyword">return</span> first_response.content</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            <span class="keyword">return</span> <span class="built_in">str</span>(first_response)</span><br><span class="line">                    <span class="comment"># å¦‚æœå“åº”æ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">                    <span class="keyword">elif</span> <span class="built_in">isinstance</span>(response, <span class="built_in">str</span>):</span><br><span class="line">                        <span class="keyword">return</span> response</span><br><span class="line">                    <span class="comment"># å…¶ä»–æƒ…å†µè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="keyword">return</span> <span class="built_in">str</span>(response)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">raise</span> Exception(<span class="string">&quot;No response generated from CAMEL model&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;CAMEL generation failed, using fallback: <span class="subst">&#123;<span class="built_in">str</span>(e)[:<span class="number">100</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                <span class="comment"># é™çº§åˆ°ç›´æ¥APIè°ƒç”¨</span></span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">self</span>._fallback_generate(prompt, max_tokens)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># ç›´æ¥ä½¿ç”¨APIè°ƒç”¨</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Generating response with direct API call...&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>._fallback_generate(prompt, max_tokens)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_fallback_generate</span>(<span class="params">self, prompt: <span class="built_in">str</span>, max_tokens: <span class="built_in">int</span> = <span class="number">500</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;é™çº§æ–¹æ¡ˆï¼šç›´æ¥APIè°ƒç”¨ - å¢åŠ é‡è¯•æœºåˆ¶å’Œè¶…æ—¶å¤„ç†&quot;&quot;&quot;</span></span><br><span class="line">        max_retries = <span class="number">3</span></span><br><span class="line">        timeout_seconds = <span class="number">60</span>  <span class="comment"># å¢åŠ è¶…æ—¶æ—¶é—´</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> attempt <span class="keyword">in</span> <span class="built_in">range</span>(max_retries):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">import</span> requests</span><br><span class="line">                </span><br><span class="line">                headers = &#123;</span><br><span class="line">                    <span class="string">&quot;Authorization&quot;</span>: <span class="string">f&quot;Bearer <span class="subst">&#123;self.api_key&#125;</span>&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/json&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                data = &#123;</span><br><span class="line">                    <span class="string">&quot;model&quot;</span>: <span class="variable language_">self</span>.model_name,</span><br><span class="line">                    <span class="string">&quot;messages&quot;</span>: [&#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: prompt&#125;],</span><br><span class="line">                    <span class="string">&quot;max_tokens&quot;</span>: max_tokens,</span><br><span class="line">                    <span class="string">&quot;temperature&quot;</span>: <span class="number">0.7</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;APIè°ƒç”¨ <span class="subst">&#123;attempt + <span class="number">1</span>&#125;</span>/<span class="subst">&#123;max_retries&#125;</span>...&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                response = requests.post(</span><br><span class="line">                    <span class="string">&quot;https://api-inference.modelscope.cn/v1/chat/completions&quot;</span>,</span><br><span class="line">                    headers=headers,</span><br><span class="line">                    json=data,</span><br><span class="line">                    timeout=timeout_seconds</span><br><span class="line">                )</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">                    result = response.json()</span><br><span class="line">                    <span class="keyword">if</span> <span class="string">&#x27;choices&#x27;</span> <span class="keyword">in</span> result <span class="keyword">and</span> <span class="built_in">len</span>(result[<span class="string">&#x27;choices&#x27;</span>]) &gt; <span class="number">0</span>:</span><br><span class="line">                        content = result[<span class="string">&#x27;choices&#x27;</span>][<span class="number">0</span>][<span class="string">&#x27;message&#x27;</span>][<span class="string">&#x27;content&#x27;</span>]</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;âˆš APIè°ƒç”¨æˆåŠŸ&quot;</span>)</span><br><span class="line">                        <span class="keyword">return</span> content</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        <span class="keyword">raise</span> Exception(<span class="string">f&quot;APIå“åº”æ ¼å¼é”™è¯¯: <span class="subst">&#123;result&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">raise</span> Exception(<span class="string">f&quot;APIè°ƒç”¨å¤±è´¥ (çŠ¶æ€ç : <span class="subst">&#123;response.status_code&#125;</span>): <span class="subst">&#123;response.text&#125;</span>&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> requests.exceptions.Timeout:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;APIè°ƒç”¨è¶…æ—¶ (å°è¯• <span class="subst">&#123;attempt + <span class="number">1</span>&#125;</span>/<span class="subst">&#123;max_retries&#125;</span>)&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> attempt == max_retries - <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">f&quot;æŠ±æ­‰ï¼Œç”±äºç½‘ç»œè¶…æ—¶ï¼Œæ— æ³•ç”Ÿæˆå›ç­”ã€‚è¯·ç¨åé‡è¯•ã€‚&quot;</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">except</span> requests.exceptions.ConnectionError:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;ç½‘ç»œè¿æ¥é”™è¯¯ (å°è¯• <span class="subst">&#123;attempt + <span class="number">1</span>&#125;</span>/<span class="subst">&#123;max_retries&#125;</span>)&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> attempt == max_retries - <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">f&quot;æŠ±æ­‰ï¼Œç½‘ç»œè¿æ¥å¤±è´¥ï¼Œæ— æ³•ç”Ÿæˆå›ç­”ã€‚è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚&quot;</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;APIè°ƒç”¨å¤±è´¥ (å°è¯• <span class="subst">&#123;attempt + <span class="number">1</span>&#125;</span>/<span class="subst">&#123;max_retries&#125;</span>): <span class="subst">&#123;<span class="built_in">str</span>(e)[:<span class="number">100</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> attempt == max_retries - <span class="number">1</span>:</span><br><span class="line">                    <span class="keyword">return</span> <span class="string">f&quot;ç”Ÿæˆç­”æ¡ˆæ—¶å‡ºç°é”™è¯¯: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æŠ±æ­‰ï¼Œå¤šæ¬¡å°è¯•åä»æ— æ³•ç”Ÿæˆå›ç­”ï¼Œè¯·ç¨åé‡è¯•ã€‚&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleEmbeddingModel</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç®€åŒ–çš„åµŒå…¥æ¨¡å‹&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, model_name: <span class="built_in">str</span> = <span class="string">&#x27;intfloat/e5-large-v2&#x27;</span></span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> EMBEDDING_AVAILABLE:</span><br><span class="line">            <span class="keyword">raise</span> ImportError(<span class="string">&quot;sentence-transformers not available&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.model = SentenceTransformer(model_name)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âˆš Embedding model loaded: <span class="subst">&#123;model_name&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Failed to load embedding model: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">encode</span>(<span class="params">self, texts: <span class="type">List</span>[<span class="built_in">str</span>]</span>) -&gt; np.ndarray:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ–‡æœ¬ç¼–ç &quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.model.encode(texts, convert_to_numpy=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Encoding failed: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> np.array([])</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleVectorRetriever</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç®€åŒ–çš„å‘é‡æ£€ç´¢å™¨&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, embedding_model: SimpleEmbeddingModel</span>):</span><br><span class="line">        <span class="variable language_">self</span>.embedding_model = embedding_model</span><br><span class="line">        <span class="variable language_">self</span>.documents = []</span><br><span class="line">        <span class="variable language_">self</span>.doc_metadata = []</span><br><span class="line">        <span class="variable language_">self</span>.document_ids = []</span><br><span class="line">        <span class="variable language_">self</span>.doc_embeddings = <span class="literal">None</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;âˆš Simple vector retriever initialized&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_documents</span>(<span class="params">self, texts: <span class="type">List</span>[<span class="built_in">str</span>], metadata: <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ·»åŠ æ–‡æ¡£&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> texts:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ç”Ÿæˆæ–‡æ¡£ID</span></span><br><span class="line">            new_ids = [<span class="string">f&quot;doc_<span class="subst">&#123;<span class="built_in">len</span>(self.documents) + i&#125;</span>&quot;</span> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(texts))]</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å­˜å‚¨æ–‡æ¡£</span></span><br><span class="line">            <span class="variable language_">self</span>.documents.extend(texts)</span><br><span class="line">            <span class="variable language_">self</span>.doc_metadata.extend(metadata)</span><br><span class="line">            <span class="variable language_">self</span>.document_ids.extend(new_ids)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è®¡ç®—åµŒå…¥</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Computing embeddings for <span class="subst">&#123;<span class="built_in">len</span>(texts)&#125;</span> documents...&quot;</span>)</span><br><span class="line">            new_embeddings = <span class="variable language_">self</span>.embedding_model.encode(texts)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>.doc_embeddings <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="variable language_">self</span>.doc_embeddings = new_embeddings</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="variable language_">self</span>.doc_embeddings = np.vstack([<span class="variable language_">self</span>.doc_embeddings, new_embeddings])</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Added <span class="subst">&#123;<span class="built_in">len</span>(texts)&#125;</span> documents to retriever&quot;</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Error adding documents: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">query</span>(<span class="params">self, query_text: <span class="built_in">str</span>, top_k: <span class="built_in">int</span> = <span class="number">5</span>, filter_type: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€ç´¢ç›¸å…³æ–‡æ¡£&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.documents <span class="keyword">or</span> <span class="variable language_">self</span>.doc_embeddings <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;No documents in retriever&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># è®¡ç®—æŸ¥è¯¢åµŒå…¥</span></span><br><span class="line">            query_embedding = <span class="variable language_">self</span>.embedding_model.encode([query_text])</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è®¡ç®—ç›¸ä¼¼åº¦</span></span><br><span class="line">            similarities = cosine_similarity(query_embedding, <span class="variable language_">self</span>.doc_embeddings)[<span class="number">0</span>]</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># è·å–top_kç»“æœ</span></span><br><span class="line">            top_indices = np.argsort(similarities)[::-<span class="number">1</span>][:top_k * <span class="number">2</span>]</span><br><span class="line">            </span><br><span class="line">            results = []</span><br><span class="line">            <span class="keyword">for</span> idx <span class="keyword">in</span> top_indices:</span><br><span class="line">                <span class="keyword">if</span> idx &gt;= <span class="built_in">len</span>(<span class="variable language_">self</span>.documents):</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                    </span><br><span class="line">                doc_type = <span class="variable language_">self</span>.doc_metadata[idx].get(<span class="string">&#x27;type&#x27;</span>, <span class="string">&#x27;unknown&#x27;</span>)</span><br><span class="line">                <span class="keyword">if</span> filter_type <span class="keyword">and</span> doc_type != filter_type:</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">                results.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;text&#x27;</span>: <span class="variable language_">self</span>.documents[idx],</span><br><span class="line">                    <span class="string">&#x27;similarity&#x27;</span>: <span class="built_in">float</span>(similarities[idx]),</span><br><span class="line">                    <span class="string">&#x27;metadata&#x27;</span>: <span class="variable language_">self</span>.doc_metadata[idx],</span><br><span class="line">                    <span class="string">&#x27;id&#x27;</span>: <span class="variable language_">self</span>.document_ids[idx]</span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(results) &gt;= top_k:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Retrieved <span class="subst">&#123;<span class="built_in">len</span>(results)&#125;</span> documents&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> results</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;Query failed: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleRAGSystem</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç®€åŒ–çš„RAGç³»ç»Ÿ - é›†æˆCAMEL ModelFactory&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, api_key: <span class="built_in">str</span>, model_name: <span class="built_in">str</span> = <span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>, use_camel: <span class="built_in">bool</span> = <span class="literal">True</span></span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> api_key:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;é”™è¯¯ï¼šAPI key required&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> use_camel:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Initializing Simple RAG System with CAMEL...&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Initializing Simple RAG System with direct API...&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä½¿ç”¨LLMæ¥å£ï¼ˆCAMELæˆ–ç›´æ¥APIï¼‰</span></span><br><span class="line">            <span class="variable language_">self</span>.llm = SimpleLLMInterface(api_key=api_key, model_name=model_name, use_camel=use_camel)</span><br><span class="line">            <span class="comment"># ä¿æŒåŸæœ‰çš„åµŒå…¥æ¨¡å‹å’Œæ£€ç´¢å™¨</span></span><br><span class="line">            <span class="variable language_">self</span>.embedding_model = SimpleEmbeddingModel()</span><br><span class="line">            <span class="variable language_">self</span>.vector_retriever = SimpleVectorRetriever(<span class="variable language_">self</span>.embedding_model)</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">self</span>.knowledge_base_initialized = <span class="literal">False</span></span><br><span class="line">            <span class="variable language_">self</span>.multimodal_content_store = &#123;&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âˆš Simple RAG System initialized successfully!&quot;</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é”™è¯¯ï¼šInitialization failed: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">setup_knowledge_base</span>(<span class="params">self, pdf_url: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>, pdf_path: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è®¾ç½®çŸ¥è¯†åº“&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> pdf_url:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;â†“ Loading PDF from URL: <span class="subst">&#123;pdf_url&#125;</span>&quot;</span>)</span><br><span class="line">                response = requests.get(pdf_url, timeout=<span class="number">30</span>)</span><br><span class="line">                response.raise_for_status()</span><br><span class="line">                pdf_bytes = response.content</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âˆš PDF downloaded (<span class="subst">&#123;<span class="built_in">len</span>(pdf_bytes)&#125;</span> bytes)&quot;</span>)</span><br><span class="line">                pdf_file = io.BytesIO(pdf_bytes)</span><br><span class="line">                elements = partition(file=pdf_file)</span><br><span class="line">            <span class="keyword">elif</span> pdf_path:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Loading PDF from: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pdf_path):</span><br><span class="line">                    <span class="keyword">raise</span> FileNotFoundError(<span class="string">f&quot;é”™è¯¯ï¼šPDF not found: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">                elements = partition(filename=pdf_path)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âˆš PDF loaded successfully&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">&quot;é”™è¯¯ï¼šEither pdf_url or pdf_path required&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é”™è¯¯ï¼šPDF loading error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">raise</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¤„ç†æ–‡æ¡£å…ƒç´ </span></span><br><span class="line">        texts_to_embed = []</span><br><span class="line">        metadata_to_embed = []</span><br><span class="line">        multimodal_id_counter = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> element <span class="keyword">in</span> elements:</span><br><span class="line">            element_text = <span class="built_in">str</span>(element).strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> element_text <span class="keyword">or</span> <span class="built_in">len</span>(element_text) &lt; <span class="number">10</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            </span><br><span class="line">            multimodal_id = <span class="string">f&quot;multimodal_<span class="subst">&#123;multimodal_id_counter&#125;</span>&quot;</span></span><br><span class="line">            multimodal_id_counter += <span class="number">1</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(element, Text):</span><br><span class="line">                texts_to_embed.append(element_text)</span><br><span class="line">                metadata_to_embed.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;source&#x27;</span>: <span class="string">&#x27;pdf&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;multimodal_id&#x27;</span>: multimodal_id</span><br><span class="line">                &#125;)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(element, Image):</span><br><span class="line">                <span class="comment"># å›¾åƒå¤„ç†</span></span><br><span class="line">                image_description = <span class="string">f&quot;å›¾åƒå†…å®¹: <span class="subst">&#123;element_text&#125;</span>&quot;</span></span><br><span class="line">                texts_to_embed.append(image_description)</span><br><span class="line">                metadata_to_embed.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;source&#x27;</span>: <span class="string">&#x27;pdf&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;multimodal_id&#x27;</span>: multimodal_id</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="variable language_">self</span>.multimodal_content_store[multimodal_id] = &#123;</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;image&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;data&#x27;</span>: element_text</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(element, Table):</span><br><span class="line">                <span class="comment"># è¡¨æ ¼å¤„ç†</span></span><br><span class="line">                table_description = <span class="string">f&quot;è¡¨æ ¼å†…å®¹: <span class="subst">&#123;element_text&#125;</span>&quot;</span></span><br><span class="line">                texts_to_embed.append(table_description)</span><br><span class="line">                metadata_to_embed.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;table&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;source&#x27;</span>: <span class="string">&#x27;pdf&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;multimodal_id&#x27;</span>: multimodal_id</span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="variable language_">self</span>.multimodal_content_store[multimodal_id] = &#123;</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;table&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;data&#x27;</span>: element_text</span><br><span class="line">                &#125;</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="comment"># å…¶ä»–ç±»å‹ä½œä¸ºæ–‡æœ¬å¤„ç†</span></span><br><span class="line">                texts_to_embed.append(element_text)</span><br><span class="line">                metadata_to_embed.append(&#123;</span><br><span class="line">                    <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;source&#x27;</span>: <span class="string">&#x27;pdf&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;multimodal_id&#x27;</span>: multimodal_id</span><br><span class="line">                &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> texts_to_embed:</span><br><span class="line">            <span class="variable language_">self</span>.vector_retriever.add_documents(texts_to_embed, metadata_to_embed)</span><br><span class="line">            <span class="variable language_">self</span>.knowledge_base_initialized = <span class="literal">True</span></span><br><span class="line">            </span><br><span class="line">            text_count = <span class="built_in">sum</span>(<span class="number">1</span> <span class="keyword">for</span> meta <span class="keyword">in</span> metadata_to_embed <span class="keyword">if</span> meta.get(<span class="string">&#x27;type&#x27;</span>) == <span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">            image_count = <span class="built_in">sum</span>(<span class="number">1</span> <span class="keyword">for</span> meta <span class="keyword">in</span> metadata_to_embed <span class="keyword">if</span> meta.get(<span class="string">&#x27;type&#x27;</span>) == <span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">            table_count = <span class="built_in">sum</span>(<span class="number">1</span> <span class="keyword">for</span> meta <span class="keyword">in</span> metadata_to_embed <span class="keyword">if</span> meta.get(<span class="string">&#x27;type&#x27;</span>) == <span class="string">&#x27;table&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âˆš Knowledge base setup complete: <span class="subst">&#123;<span class="built_in">len</span>(texts_to_embed)&#125;</span> elements&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot; Content: <span class="subst">&#123;text_count&#125;</span> text, <span class="subst">&#123;image_count&#125;</span> images, <span class="subst">&#123;table_count&#125;</span> tables&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;No content extracted from PDF&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_available_retrieval_methods</span>(<span class="params">self</span>) -&gt; <span class="type">List</span>[<span class="built_in">str</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è·å–å¯ç”¨çš„æ£€ç´¢æ–¹æ³•&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> [<span class="string">&quot;Vector&quot;</span>, <span class="string">&quot;Enhanced&quot;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_query_rewriting</span>(<span class="params">self, original_query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æŸ¥è¯¢é‡å†™ - ä½¿ç”¨CAMELæ¨¡å‹&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            prompt = <span class="string">f&quot;&quot;&quot;è¯·é‡å†™ä»¥ä¸‹æŸ¥è¯¢ï¼Œä½¿å…¶æ›´é€‚åˆæ–‡æ¡£æ£€ç´¢å’Œä¿¡æ¯æå–ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">åŸå§‹æŸ¥è¯¢ï¼š<span class="subst">&#123;original_query&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é‡å†™è¦æ±‚ï¼š</span></span><br><span class="line"><span class="string">1. ä¿æŒæŸ¥è¯¢çš„æ ¸å¿ƒæ„å›¾</span></span><br><span class="line"><span class="string">2. ä½¿ç”¨æ›´å…·ä½“å’Œæ˜ç¡®çš„è¯æ±‡</span></span><br><span class="line"><span class="string">3. é€‚åˆå‘é‡æ£€ç´¢å’Œè¯­ä¹‰åŒ¹é…</span></span><br><span class="line"><span class="string">4. åªè¿”å›é‡å†™åçš„æŸ¥è¯¢ï¼Œä¸è¦å…¶ä»–è§£é‡Š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é‡å†™åçš„æŸ¥è¯¢ï¼š&quot;&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            rewritten_query = <span class="variable language_">self</span>.llm.generate(prompt, max_tokens=<span class="number">100</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ¸…ç†è¿”å›ç»“æœï¼Œåªä¿ç•™é‡å†™çš„æŸ¥è¯¢</span></span><br><span class="line">            <span class="keyword">if</span> rewritten_query <span class="keyword">and</span> <span class="keyword">not</span> rewritten_query.startswith(<span class="string">&quot;æŠ±æ­‰&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> rewritten_query.startswith(<span class="string">&quot;ç”Ÿæˆç­”æ¡ˆæ—¶å‡ºç°é”™è¯¯&quot;</span>):</span><br><span class="line">                <span class="comment"># æå–å®é™…çš„é‡å†™æŸ¥è¯¢</span></span><br><span class="line">                lines = rewritten_query.strip().split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">                <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">                    line = line.strip()</span><br><span class="line">                    <span class="keyword">if</span> line <span class="keyword">and</span> <span class="keyword">not</span> line.startswith(<span class="string">&#x27;é‡å†™åçš„æŸ¥è¯¢&#x27;</span>) <span class="keyword">and</span> <span class="keyword">not</span> line.startswith(<span class="string">&#x27;åŸå§‹æŸ¥è¯¢&#x27;</span>):</span><br><span class="line">                        rewritten_query = line</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Query rewritten: <span class="subst">&#123;original_query&#125;</span> -&gt; <span class="subst">&#123;rewritten_query[:<span class="number">50</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> rewritten_query.strip()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šQuery rewriting failed, using original query&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> original_query</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šQuery rewriting failed: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> original_query</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_hyde_generation</span>(<span class="params">self, query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;HyDEå‡è®¾æ–‡æ¡£ç”Ÿæˆ - ä½¿ç”¨CAMELæ¨¡å‹&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            prompt = <span class="string">f&quot;&quot;&quot;åŸºäºä»¥ä¸‹æŸ¥è¯¢ï¼Œç”Ÿæˆä¸€ä¸ªå‡è®¾æ€§çš„æ–‡æ¡£ç‰‡æ®µï¼Œè¯¥ç‰‡æ®µå¯èƒ½åŒ…å«æŸ¥è¯¢çš„ç­”æ¡ˆï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æŸ¥è¯¢ï¼š<span class="subst">&#123;query&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¦æ±‚ï¼š</span></span><br><span class="line"><span class="string">1. ç”Ÿæˆä¸€ä¸ª200-300å­—çš„æ–‡æ¡£ç‰‡æ®µ</span></span><br><span class="line"><span class="string">2. å†…å®¹åº”è¯¥ç›´æ¥å›ç­”æŸ¥è¯¢é—®é¢˜</span></span><br><span class="line"><span class="string">3. ä½¿ç”¨ä¸“ä¸šå’Œå‡†ç¡®çš„è¯­è¨€</span></span><br><span class="line"><span class="string">4. åŒ…å«ç›¸å…³çš„æŠ€æœ¯ç»†èŠ‚å’Œæ¦‚å¿µ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å‡è®¾æ–‡æ¡£ï¼š&quot;&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            hyde_doc = <span class="variable language_">self</span>.llm.generate(prompt, max_tokens=<span class="number">300</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> hyde_doc <span class="keyword">and</span> <span class="keyword">not</span> hyde_doc.startswith(<span class="string">&quot;æŠ±æ­‰&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> hyde_doc.startswith(<span class="string">&quot;ç”Ÿæˆç­”æ¡ˆæ—¶å‡ºç°é”™è¯¯&quot;</span>):</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;ğŸ“ HyDE document generated: <span class="subst">&#123;<span class="built_in">len</span>(hyde_doc)&#125;</span> characters&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> hyde_doc.strip()</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šHyDE generation failed, using original query&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> query</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šHyDE generation failed: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> query</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_rrf_fusion</span>(<span class="params">self, all_results: <span class="type">List</span>[<span class="type">List</span>[<span class="type">Dict</span>]], k: <span class="built_in">int</span> = <span class="number">60</span></span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;RRFèåˆå¤šä¸ªæ£€ç´¢ç»“æœ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            doc_scores = &#123;&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> results <span class="keyword">in</span> all_results:</span><br><span class="line">                <span class="keyword">for</span> rank, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(results):</span><br><span class="line">                    doc_id = doc.get(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                    <span class="keyword">if</span> doc_id:</span><br><span class="line">                        rrf_score = <span class="number">1.0</span> / (k + rank + <span class="number">1</span>)</span><br><span class="line">                        <span class="keyword">if</span> doc_id <span class="keyword">in</span> doc_scores:</span><br><span class="line">                            doc_scores[doc_id][<span class="string">&#x27;score&#x27;</span>] += rrf_score</span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            doc_scores[doc_id] = &#123;</span><br><span class="line">                                <span class="string">&#x27;doc&#x27;</span>: doc,</span><br><span class="line">                                <span class="string">&#x27;score&#x27;</span>: rrf_score</span><br><span class="line">                            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æŒ‰åˆ†æ•°æ’åº</span></span><br><span class="line">            sorted_docs = <span class="built_in">sorted</span>(doc_scores.values(), key=<span class="keyword">lambda</span> x: x[<span class="string">&#x27;score&#x27;</span>], reverse=<span class="literal">True</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä¸ºæ–‡æ¡£æ·»åŠ RRFåˆ†æ•°</span></span><br><span class="line">            final_docs = []</span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> sorted_docs:</span><br><span class="line">                doc = item[<span class="string">&#x27;doc&#x27;</span>].copy()</span><br><span class="line">                doc[<span class="string">&#x27;rrf_score&#x27;</span>] = item[<span class="string">&#x27;score&#x27;</span>]</span><br><span class="line">                final_docs.append(doc)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> final_docs</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šRRF fusion failed: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> all_results[<span class="number">0</span>] <span class="keyword">if</span> all_results <span class="keyword">else</span> []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">enhanced_query</span>(<span class="params">self, original_query: <span class="built_in">str</span>, use_rewriting: <span class="built_in">bool</span> = <span class="literal">True</span>, use_hyde: <span class="built_in">bool</span> = <span class="literal">True</span>,</span></span><br><span class="line"><span class="params">                      use_rrf: <span class="built_in">bool</span> = <span class="literal">True</span>, top_k: <span class="built_in">int</span> = <span class="number">5</span>, rrf_k: <span class="built_in">int</span> = <span class="number">60</span>,</span></span><br><span class="line"><span class="params">                      multimodal_preference: <span class="type">Optional</span>[<span class="type">List</span>[<span class="built_in">str</span>]] = <span class="literal">None</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰§è¡Œå¢å¼ºå‹RAGæŸ¥è¯¢&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.knowledge_base_initialized:</span><br><span class="line">            <span class="keyword">raise</span> RuntimeError(<span class="string">&quot;Knowledge base not initialized&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ ¹æ®å‚æ•°ç¡®å®šæ£€ç´¢ç±»å‹</span></span><br><span class="line">        <span class="keyword">if</span> use_rewriting <span class="keyword">and</span> use_hyde <span class="keyword">and</span> use_rrf:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\næ‰§è¡Œæ·±åº¦æ£€ç´¢...&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å¼€å§‹æ‰§è¡Œæ·±åº¦RAGæŸ¥è¯¢&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\næ‰§è¡Œæ£€ç´¢...&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line">        query_for_retrieval = original_query</span><br><span class="line">        rewritten_query = <span class="literal">None</span></span><br><span class="line">        hyde_doc = <span class="literal">None</span></span><br><span class="line">        retrieval_method = <span class="string">&quot;Vector&quot;</span></span><br><span class="line">        all_retrieved_results = []</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤1: æŸ¥è¯¢é‡å†™</span></span><br><span class="line">        <span class="keyword">if</span> use_rewriting:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;\næ­¥éª¤1: æŸ¥è¯¢é‡å†™&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;åŸå§‹æŸ¥è¯¢: <span class="subst">&#123;original_query&#125;</span>&quot;</span>)</span><br><span class="line">            rewritten_query = <span class="variable language_">self</span>._query_rewriting(original_query)</span><br><span class="line">            query_for_retrieval = rewritten_query</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é‡å†™æŸ¥è¯¢: <span class="subst">&#123;rewritten_query&#125;</span>&quot;</span>)</span><br><span class="line">            retrieval_method += <span class="string">&quot;+Rewriting&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤2: æ–‡æ¡£æ£€ç´¢</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\næ­¥éª¤2: æ–‡æ¡£æ£€ç´¢&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line">        <span class="keyword">if</span> use_hyde <span class="keyword">and</span> use_rrf:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ä½¿ç”¨HyDE+RRFç»„åˆæ–¹æ³•è¿›è¡Œæ£€ç´¢...&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ä½¿ç”¨RRFç®—æ³•è¿›è¡Œæ··åˆæ£€ç´¢ï¼ˆHyDEå¢å¼ºå‘é‡æ£€ç´¢ï¼‰...&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ä½¿ç”¨åŸºç¡€å‘é‡æ£€ç´¢...&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># HyDEç”Ÿæˆ</span></span><br><span class="line">        <span class="keyword">if</span> use_hyde:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ‰§è¡ŒHyDEå¢å¼ºå‘é‡æ£€ç´¢...&quot;</span>)</span><br><span class="line">            hyde_doc = <span class="variable language_">self</span>._hyde_generation(query_for_retrieval)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ç”Ÿæˆçš„å‡è®¾æ–‡æ¡£:&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(hyde_doc)</span><br><span class="line">            retrieval_method += <span class="string">&quot;+HyDE&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¤šæ¨¡æ€æ£€ç´¢</span></span><br><span class="line">        text_results = <span class="variable language_">self</span>.vector_retriever.query(query_for_retrieval, top_k=top_k, filter_type=<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">        all_retrieved_results.append(text_results)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;âœ“ HyDEå‘é‡æ£€ç´¢å®Œæˆï¼Œè·å¾— <span class="subst">&#123;<span class="built_in">len</span>(text_results)&#125;</span> ä¸ªç»“æœ&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> multimodal_preference:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;image&#x27;</span> <span class="keyword">in</span> multimodal_preference:</span><br><span class="line">                image_results = <span class="variable language_">self</span>.vector_retriever.query(query_for_retrieval, top_k=top_k, filter_type=<span class="string">&#x27;image&#x27;</span>)</span><br><span class="line">                all_retrieved_results.append(image_results)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âœ“ å›¾åƒæ£€ç´¢å®Œæˆï¼Œè·å¾— <span class="subst">&#123;<span class="built_in">len</span>(image_results)&#125;</span> ä¸ªç»“æœ&quot;</span>)</span><br><span class="line">                retrieval_method += <span class="string">&quot;+Image&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;table&#x27;</span> <span class="keyword">in</span> multimodal_preference:</span><br><span class="line">                table_results = <span class="variable language_">self</span>.vector_retriever.query(query_for_retrieval, top_k=top_k, filter_type=<span class="string">&#x27;table&#x27;</span>)</span><br><span class="line">                all_retrieved_results.append(table_results)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âœ“ è¡¨æ ¼æ£€ç´¢å®Œæˆï¼Œè·å¾— <span class="subst">&#123;<span class="built_in">len</span>(table_results)&#125;</span> ä¸ªç»“æœ&quot;</span>)</span><br><span class="line">                retrieval_method += <span class="string">&quot;+Table&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> hyde_doc:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ‰§è¡ŒBM25æ£€ç´¢ï¼ˆä½¿ç”¨åŸå§‹æŸ¥è¯¢ï¼‰...&quot;</span>)</span><br><span class="line">            hyde_results = <span class="variable language_">self</span>.vector_retriever.query(hyde_doc, top_k=top_k)</span><br><span class="line">            all_retrieved_results.append(hyde_results)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âœ“ BM25æ£€ç´¢æˆåŠŸï¼Œè·å¾— <span class="subst">&#123;<span class="built_in">len</span>(hyde_results)&#125;</span> ä¸ªç»“æœ&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># RRFèåˆ</span></span><br><span class="line">        <span class="keyword">if</span> use_rrf <span class="keyword">and</span> <span class="built_in">len</span>(all_retrieved_results) &gt; <span class="number">1</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ä½¿ç”¨RRFç®—æ³•èåˆæ£€ç´¢ç»“æœ...&quot;</span>)</span><br><span class="line">            final_retrieved_docs = <span class="variable language_">self</span>._rrf_fusion(all_retrieved_results, k=rrf_k)</span><br><span class="line">            retrieval_method += <span class="string">&quot;+RRF&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç»Ÿè®¡å”¯ä¸€æ–‡æ¡£æ•°é‡</span></span><br><span class="line">            unique_doc_ids = <span class="built_in">set</span>()</span><br><span class="line">            <span class="keyword">for</span> res_list <span class="keyword">in</span> all_retrieved_results:</span><br><span class="line">                <span class="keyword">for</span> doc <span class="keyword">in</span> res_list:</span><br><span class="line">                    unique_doc_ids.add(doc.get(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;&#x27;</span>))</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;RRFèåˆå®Œæˆï¼Œå…±å¤„ç† <span class="subst">&#123;<span class="built_in">len</span>(unique_doc_ids)&#125;</span> ä¸ªå”¯ä¸€æ–‡æ¡£ï¼Œè¿”å›å‰ <span class="subst">&#123;top_k&#125;</span> ä¸ªç»“æœ&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;HyDE+RRFæ£€ç´¢å®Œæˆï¼Œè¿”å› <span class="subst">&#123;<span class="built_in">len</span>(final_retrieved_docs)&#125;</span> ä¸ªæ–‡æ¡£&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            unique_docs = &#123;&#125;</span><br><span class="line">            <span class="keyword">for</span> res_list <span class="keyword">in</span> all_retrieved_results:</span><br><span class="line">                <span class="keyword">for</span> doc <span class="keyword">in</span> res_list:</span><br><span class="line">                    <span class="keyword">if</span> doc.get(<span class="string">&#x27;id&#x27;</span>) <span class="keyword">not</span> <span class="keyword">in</span> unique_docs:</span><br><span class="line">                        unique_docs[doc.get(<span class="string">&#x27;id&#x27;</span>)] = doc</span><br><span class="line">            final_retrieved_docs = <span class="built_in">list</span>(unique_docs.values())</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£åˆå¹¶å®Œæˆï¼Œè¿”å› <span class="subst">&#123;<span class="built_in">len</span>(final_retrieved_docs)&#125;</span> ä¸ªæ–‡æ¡£&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é™åˆ¶æœ€ç»ˆæ–‡æ¡£æ•°é‡</span></span><br><span class="line">        final_retrieved_docs = final_retrieved_docs[:top_k]</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºæ£€ç´¢åˆ°çš„æ–‡æ¡£é¢„è§ˆ</span></span><br><span class="line">        <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(final_retrieved_docs, <span class="number">1</span>):</span><br><span class="line">            similarity = doc.get(<span class="string">&#x27;similarity&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">            rrf_score = <span class="built_in">getattr</span>(doc, <span class="string">&#x27;rrf_score&#x27;</span>, similarity)  <span class="comment"># å¦‚æœæœ‰RRFåˆ†æ•°åˆ™ä½¿ç”¨ï¼Œå¦åˆ™ä½¿ç”¨ç›¸ä¼¼åº¦</span></span><br><span class="line">            text_preview = doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)[:<span class="number">200</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)) &gt; <span class="number">200</span> <span class="keyword">else</span> doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i&#125;</span> (RRFåˆ†æ•°: <span class="subst">&#123;rrf_score:<span class="number">.4</span>f&#125;</span>):&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;text_preview&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ­¥éª¤3: ç­”æ¡ˆç”Ÿæˆ</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ­¥éª¤3: ç­”æ¡ˆç”Ÿæˆ&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ„å»ºä¸Šä¸‹æ–‡</span></span><br><span class="line">        context_texts = []</span><br><span class="line">        <span class="keyword">for</span> doc <span class="keyword">in</span> final_retrieved_docs:</span><br><span class="line">            context_texts.append(doc[<span class="string">&#x27;text&#x27;</span>])</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ</span></span><br><span class="line">        separator = <span class="string">&#x27;\n---\n&#x27;</span></span><br><span class="line">        context_str = separator.join(context_texts)</span><br><span class="line">        </span><br><span class="line">        prompt_for_llm = <span class="string">f&quot;&quot;&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–‡æ¡£åˆ†æåŠ©æ‰‹ã€‚è¯·åŸºäºä»¥ä¸‹PDFæ–‡æ¡£å†…å®¹å›ç­”ç”¨æˆ·é—®é¢˜ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ–‡æ¡£å†…å®¹ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;context_str&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç”¨æˆ·é—®é¢˜ï¼š<span class="subst">&#123;original_query&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å›ç­”è¦æ±‚ï¼š</span></span><br><span class="line"><span class="string">1. ä»”ç»†é˜…è¯»å¹¶ç†è§£æ–‡æ¡£å†…å®¹</span></span><br><span class="line"><span class="string">2. åŸºäºæ–‡æ¡£å†…å®¹æä¾›å‡†ç¡®ã€è¯¦ç»†çš„ç­”æ¡ˆ</span></span><br><span class="line"><span class="string">3. å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®è¯´æ˜</span></span><br><span class="line"><span class="string">4. ä½¿ç”¨æ¸…æ™°çš„ç»“æ„ç»„ç»‡ç­”æ¡ˆ</span></span><br><span class="line"><span class="string">5. å¼•ç”¨å…·ä½“çš„æ–‡æ¡£å†…å®¹æ”¯æŒä½ çš„å›ç­”</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·æä¾›è¯¦ç»†çš„ç­”æ¡ˆï¼š&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ...&quot;</span>)</span><br><span class="line">        final_answer = <span class="variable language_">self</span>.llm.generate(prompt_for_llm, max_tokens=<span class="number">800</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> final_answer <span class="keyword">and</span> <span class="keyword">not</span> final_answer.startswith(<span class="string">&quot;æŠ±æ­‰&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> final_answer.startswith(<span class="string">&quot;ç”Ÿæˆç­”æ¡ˆæ—¶å‡ºç°é”™è¯¯&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âˆš ç­”æ¡ˆç”ŸæˆæˆåŠŸ&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æœ€ç»ˆç­”æ¡ˆ:&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(final_answer)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;è­¦å‘Šï¼šç­”æ¡ˆç”Ÿæˆå¤±è´¥ï¼Œæä¾›åŸºäºæ£€ç´¢æ–‡æ¡£çš„ç®€åŒ–å›ç­”&quot;</span>)</span><br><span class="line">            <span class="comment"># æä¾›åŸºäºæ£€ç´¢æ–‡æ¡£çš„ç®€åŒ–å›ç­”</span></span><br><span class="line">            simple_answer = <span class="string">f&quot;åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£å†…å®¹ï¼Œå…³äº&#x27;<span class="subst">&#123;original_query&#125;</span>&#x27;çš„ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ï¼š\n\n&quot;</span></span><br><span class="line">            <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(final_retrieved_docs[:<span class="number">3</span>], <span class="number">1</span>):</span><br><span class="line">                simple_answer += <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;doc[<span class="string">&#x27;text&#x27;</span>][:<span class="number">200</span>]&#125;</span>...\n\n&quot;</span></span><br><span class="line">            final_answer = simple_answer</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æœ€ç»ˆç­”æ¡ˆ:&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(final_answer)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="string">&#x27;original_query&#x27;</span>: original_query,</span><br><span class="line">            <span class="string">&#x27;rewritten_query&#x27;</span>: rewritten_query,</span><br><span class="line">            <span class="string">&#x27;hyde_doc&#x27;</span>: hyde_doc,</span><br><span class="line">            <span class="string">&#x27;retrieved_docs&#x27;</span>: final_retrieved_docs,</span><br><span class="line">            <span class="string">&#x27;final_answer&#x27;</span>: final_answer,</span><br><span class="line">            <span class="string">&#x27;retrieval_method&#x27;</span>: retrieval_method</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InteractiveMultimodalRAG</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ - é›†æˆCAMEL ModelFactory&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.api_key = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.rag_system = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.web_research_system = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.knowledge_base_loaded = <span class="literal">False</span></span><br><span class="line">        <span class="variable language_">self</span>.current_pdf_source = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize_system</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–ç³»ç»Ÿ - ä½¿ç”¨CAMEL ModelFactory&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;åˆå§‹åŒ–äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line">        load_dotenv()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è·å–APIå¯†é’¥</span></span><br><span class="line">        <span class="variable language_">self</span>.api_key = os.getenv(<span class="string">&#x27;MODELSCOPE_SDK_TOKEN&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.api_key:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šé”™è¯¯ï¼šè¯·è®¾ç½®MODELSCOPE_SDK_TOKENç¯å¢ƒå˜é‡&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æç¤ºï¼šåœ¨.envæ–‡ä»¶ä¸­æ·»åŠ  MODELSCOPE_SDK_TOKEN=your_api_key&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ä½¿ç”¨é›†æˆCAMELçš„ç®€åŒ–RAGç³»ç»Ÿ</span></span><br><span class="line">            <span class="variable language_">self</span>.rag_system = SimpleRAGSystem(api_key=<span class="variable language_">self</span>.api_key, model_name=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âˆš é›†æˆCAMELçš„RAGç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åˆå§‹åŒ–ç½‘é¡µç ”ç©¶ç³»ç»Ÿ</span></span><br><span class="line">            <span class="keyword">if</span> WEB_RESEARCH_AVAILABLE:</span><br><span class="line">                <span class="keyword">try</span>:</span><br><span class="line">                    <span class="variable language_">self</span>.web_research_system = EnhancedInteractiveResearchSystem()</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;âˆš ç½‘é¡µç ”ç©¶ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ&quot;</span>)</span><br><span class="line">                <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;ï¼è­¦å‘Šï¼š ç½‘é¡µç ”ç©¶ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                    <span class="variable language_">self</span>.web_research_system = <span class="literal">None</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ï¼é”™è¯¯ï¼šç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_pdf_knowledge_base</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åŠ è½½PDFçŸ¥è¯†åº“&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\nPDFçŸ¥è¯†åº“è®¾ç½®&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;1. åœ¨çº¿PDF (è¾“å…¥URL)&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;2. æœ¬åœ°PDF (è¾“å…¥æ–‡ä»¶è·¯å¾„)&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;3. ä½¿ç”¨é»˜è®¤ç¤ºä¾‹PDF&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        choice = <span class="built_in">input</span>(<span class="string">&quot;\nè¯·é€‰æ‹©PDFæ¥æº (1-3): &quot;</span>).strip()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> choice == <span class="string">&quot;1&quot;</span>:</span><br><span class="line">                pdf_url = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥PDFçš„URL: &quot;</span>).strip()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> pdf_url:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šURLä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;â†“ æ­£åœ¨åŠ è½½åœ¨çº¿PDF: <span class="subst">&#123;pdf_url&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.rag_system.setup_knowledge_base(pdf_url=pdf_url)</span><br><span class="line">                <span class="variable language_">self</span>.current_pdf_source = <span class="string">f&quot;åœ¨çº¿PDF: <span class="subst">&#123;pdf_url&#125;</span>&quot;</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="string">&quot;2&quot;</span>:</span><br><span class="line">                pdf_path = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥PDFæ–‡ä»¶è·¯å¾„: &quot;</span>).strip()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> pdf_path:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šæ–‡ä»¶è·¯å¾„ä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(pdf_path):</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">f&quot;é”™è¯¯ï¼šæ–‡ä»¶ä¸å­˜åœ¨: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;çŠ¶æ€æŸ¥è¯¢ï¼š æ­£åœ¨åŠ è½½æœ¬åœ°PDF: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.rag_system.setup_knowledge_base(pdf_path=pdf_path)</span><br><span class="line">                <span class="variable language_">self</span>.current_pdf_source = <span class="string">f&quot;æœ¬åœ°PDF: <span class="subst">&#123;pdf_path&#125;</span>&quot;</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">elif</span> choice == <span class="string">&quot;3&quot;</span>:</span><br><span class="line">                pdf_url = <span class="string">&quot;https://arxiv.org/pdf/2303.17760.pdf&quot;</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;â†“ æ­£åœ¨åŠ è½½é»˜è®¤ç¤ºä¾‹PDF: <span class="subst">&#123;pdf_url&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.rag_system.setup_knowledge_base(pdf_url=pdf_url)</span><br><span class="line">                <span class="variable language_">self</span>.current_pdf_source = <span class="string">f&quot;ç¤ºä¾‹PDF: CAMELè®ºæ–‡&quot;</span></span><br><span class="line">                </span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;é”™è¯¯ï¼šæ— æ•ˆé€‰æ‹©&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">self</span>.knowledge_base_loaded = <span class="literal">True</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âˆš PDFçŸ¥è¯†åº“åŠ è½½æˆåŠŸï¼&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é”™è¯¯ï¼šPDFåŠ è½½å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">execute_query</span>(<span class="params">self, query: <span class="built_in">str</span>, retrieval_mode: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰§è¡ŒæŸ¥è¯¢&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.knowledge_base_loaded:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;çŸ¥è¯†åº“æœªåŠ è½½ï¼Œè¯·å…ˆåŠ è½½PDF&quot;</span>&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\næ‰§è¡ŒæŸ¥è¯¢: <span class="subst">&#123;query&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ£€ç´¢æ¨¡å¼: <span class="subst">&#123;retrieval_mode&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> retrieval_mode == <span class="string">&quot;å¿«é€Ÿæ£€ç´¢&quot;</span>:</span><br><span class="line">                <span class="comment"># åŸºç¡€å‘é‡æ£€ç´¢ - ç›´æ¥æ£€ç´¢ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">self</span>.quick_retrieval(query)</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">elif</span> retrieval_mode == <span class="string">&quot;æ·±åº¦æ£€ç´¢&quot;</span>:</span><br><span class="line">                <span class="comment"># å®Œæ•´å¢å¼ºæ£€ç´¢</span></span><br><span class="line">                results = <span class="variable language_">self</span>.rag_system.enhanced_query(</span><br><span class="line">                    original_query=query,</span><br><span class="line">                    use_rewriting=<span class="literal">True</span>,</span><br><span class="line">                    use_hyde=<span class="literal">True</span>,</span><br><span class="line">                    use_rrf=<span class="literal">True</span>,</span><br><span class="line">                    top_k=<span class="number">5</span>,</span><br><span class="line">                    multimodal_preference=[<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;image&#x27;</span>, <span class="string">&#x27;table&#x27;</span>]</span><br><span class="line">                )</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">elif</span> retrieval_mode == <span class="string">&quot;ä¸»é¢˜æ£€ç´¢&quot;</span>:</span><br><span class="line">                <span class="comment"># ç½‘é¡µçˆ¬å–æ£€ç´¢ - ä½¿ç”¨çœŸå®çš„ç½‘é¡µç ”ç©¶ç³»ç»Ÿ</span></span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">self</span>.topic_retrieval(query)</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">f&quot;æœªçŸ¥æ£€ç´¢æ¨¡å¼: <span class="subst">&#123;retrieval_mode&#125;</span>&quot;</span>&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> results</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">f&quot;æŸ¥è¯¢æ‰§è¡Œå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">quick_retrieval</span>(<span class="params">self, query: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¿«é€Ÿæ£€ç´¢ - åŸºç¡€å‘é‡æ£€ç´¢ç›´æ¥ç”Ÿæˆç­”æ¡ˆ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\næ‰§è¡Œå¿«é€Ÿæ£€ç´¢...&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">40</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># ç›´æ¥è¿›è¡Œå‘é‡æ£€ç´¢</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨è¿›è¡Œå‘é‡æ£€ç´¢...&quot;</span>)</span><br><span class="line">            retrieved_docs = <span class="variable language_">self</span>.rag_system.vector_retriever.query(query, top_k=<span class="number">3</span>, filter_type=<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> retrieved_docs:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;æœªæ‰¾åˆ°ç›¸å…³æ–‡æ¡£&quot;</span>&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âˆš æ£€ç´¢åˆ° <span class="subst">&#123;<span class="built_in">len</span>(retrieved_docs)&#125;</span> ä¸ªç›¸å…³æ–‡æ¡£&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ˜¾ç¤ºæ£€ç´¢åˆ°çš„æ–‡æ¡£</span></span><br><span class="line">            <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(retrieved_docs, <span class="number">1</span>):</span><br><span class="line">                similarity = doc.get(<span class="string">&#x27;similarity&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">                text_preview = doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)[:<span class="number">150</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)) &gt; <span class="number">150</span> <span class="keyword">else</span> doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i&#125;</span> (ç›¸ä¼¼åº¦: <span class="subst">&#123;similarity:<span class="number">.3</span>f&#125;</span>):&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;   <span class="subst">&#123;text_preview&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>()</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ„å»ºç®€å•çš„ä¸Šä¸‹æ–‡</span></span><br><span class="line">            context_texts = [doc[<span class="string">&#x27;text&#x27;</span>] <span class="keyword">for</span> doc <span class="keyword">in</span> retrieved_docs]</span><br><span class="line">            context_str = <span class="string">&#x27;\n---\n&#x27;</span>.join(context_texts)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...&quot;</span>)</span><br><span class="line">            prompt = <span class="string">f&quot;&quot;&quot;åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">æ–‡æ¡£å†…å®¹ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;context_str&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é—®é¢˜ï¼š<span class="subst">&#123;query&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·æä¾›ç®€æ´æ˜ç¡®çš„ç­”æ¡ˆï¼š&quot;&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            final_answer = <span class="variable language_">self</span>.rag_system.llm.generate(prompt, max_tokens=<span class="number">400</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âˆš å¿«é€Ÿæ£€ç´¢å®Œæˆ&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&#x27;original_query&#x27;</span>: query,</span><br><span class="line">                <span class="string">&#x27;retrieved_docs&#x27;</span>: retrieved_docs,</span><br><span class="line">                <span class="string">&#x27;final_answer&#x27;</span>: final_answer,</span><br><span class="line">                <span class="string">&#x27;retrieval_method&#x27;</span>: <span class="string">&#x27;Quick Vector Retrieval&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">f&quot;å¿«é€Ÿæ£€ç´¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">topic_retrieval</span>(<span class="params">self, query: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¸»é¢˜æ£€ç´¢ - é›†æˆç½‘é¡µç ”ç©¶ç³»ç»Ÿ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\næ‰§è¡Œç½‘é¡µæ£€ç´¢...&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">40</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.web_research_system:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;è­¦å‘Šï¼šç½‘é¡µç ”ç©¶ç³»ç»Ÿä¸å¯ç”¨ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">self</span>.perform_fallback_topic_search(query)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä½¿ç”¨ç½‘é¡µç ”ç©¶ç³»ç»Ÿè¿›è¡Œæœç´¢</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨è¿›è¡Œç½‘é¡µç ”ç©¶...&quot;</span>)</span><br><span class="line">            web_content = <span class="string">&quot;&quot;</span></span><br><span class="line">            web_sources = []</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># æ£€æŸ¥å¯ç”¨çš„æ–¹æ³•å¹¶è°ƒç”¨æ­£ç¡®çš„æ–¹æ³•</span></span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>.web_research_system, <span class="string">&#x27;research_and_analyze&#x27;</span>):</span><br><span class="line">                    <span class="comment"># ä½¿ç”¨æ­£ç¡®çš„æ–¹æ³•å</span></span><br><span class="line">                    research_result = <span class="variable language_">self</span>.web_research_system.research_and_analyze(query)</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">isinstance</span>(research_result, <span class="built_in">dict</span>):</span><br><span class="line">                        web_content = research_result.get(<span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                        web_sources = research_result.get(<span class="string">&#x27;sources&#x27;</span>, [])</span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        web_content = <span class="built_in">str</span>(research_result)</span><br><span class="line">                        web_sources = [<span class="string">&quot;ç½‘é¡µç ”ç©¶ç»“æœ&quot;</span>]</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;âˆš ç½‘é¡µç ”ç©¶å®Œæˆ&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">elif</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>.web_research_system, <span class="string">&#x27;toolkit&#x27;</span>) <span class="keyword">and</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>.web_research_system.toolkit, <span class="string">&#x27;search_web_for_topic&#x27;</span>):</span><br><span class="line">                    <span class="comment"># ä½¿ç”¨å·¥å…·åŒ…æœç´¢</span></span><br><span class="line">                    search_result = <span class="variable language_">self</span>.web_research_system.toolkit.search_web_for_topic(query, <span class="string">&quot;&quot;</span>)</span><br><span class="line">                    web_content = search_result</span><br><span class="line">                    web_sources = [<span class="string">&quot;ç½‘é¡µæœç´¢ç»“æœ&quot;</span>]</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;âˆš ç½‘é¡µæœç´¢å®Œæˆ&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">elif</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>.web_research_system, <span class="string">&#x27;run_interactive_session&#x27;</span>):</span><br><span class="line">                    <span class="comment"># å°è¯•ä½¿ç”¨äº¤äº’å¼ä¼šè¯æ–¹æ³•</span></span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;è­¦å‘Šï¼šä½¿ç”¨äº¤äº’å¼ç ”ç©¶ç³»ç»Ÿï¼Œä½†æ— æ³•ç›´æ¥è°ƒç”¨&quot;</span>)</span><br><span class="line">                    web_content = <span class="string">f&quot;å…³äº&#x27;<span class="subst">&#123;query&#125;</span>&#x27;çš„ç½‘é¡µç ”ç©¶ä¿¡æ¯éœ€è¦äº¤äº’å¼æ“ä½œ&quot;</span></span><br><span class="line">                    web_sources = [<span class="string">&quot;äº¤äº’å¼ç ”ç©¶ç³»ç»Ÿ&quot;</span>]</span><br><span class="line">                    </span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;è­¦å‘Šï¼šç½‘é¡µç ”ç©¶ç³»ç»Ÿæ–¹æ³•ä¸å¯ç”¨&quot;</span>)</span><br><span class="line">                    web_content = <span class="string">f&quot;å…³äº&#x27;<span class="subst">&#123;query&#125;</span>&#x27;çš„ç½‘é¡µæœç´¢ä¿¡æ¯æš‚æ—¶ä¸å¯ç”¨&quot;</span></span><br><span class="line">                    web_sources = []</span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šç½‘é¡µæœç´¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                web_content = <span class="string">f&quot;ç½‘é¡µæœç´¢é‡åˆ°é”™è¯¯: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span></span><br><span class="line">                web_sources = []</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åŒæ—¶è¿›è¡ŒPDFæ£€ç´¢</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨æ£€ç´¢PDFæ–‡æ¡£...&quot;</span>)</span><br><span class="line">            pdf_docs = <span class="variable language_">self</span>.rag_system.vector_retriever.query(query, top_k=<span class="number">3</span>, filter_type=<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åˆå¹¶ç»“æœ</span></span><br><span class="line">            combined_context = <span class="string">&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ·»åŠ PDFå†…å®¹</span></span><br><span class="line">            <span class="keyword">if</span> pdf_docs:</span><br><span class="line">                pdf_context = <span class="string">&quot;\n&quot;</span>.join([doc[<span class="string">&#x27;text&#x27;</span>] <span class="keyword">for</span> doc <span class="keyword">in</span> pdf_docs])</span><br><span class="line">                combined_context += <span class="string">f&quot;PDFæ–‡æ¡£å†…å®¹ï¼š\n<span class="subst">&#123;pdf_context&#125;</span>\n\n&quot;</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;âˆš æ£€ç´¢åˆ° <span class="subst">&#123;<span class="built_in">len</span>(pdf_docs)&#125;</span> ä¸ªPDFæ–‡æ¡£&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ·»åŠ ç½‘é¡µå†…å®¹</span></span><br><span class="line">            <span class="keyword">if</span> web_content <span class="keyword">and</span> web_content.strip() <span class="keyword">and</span> <span class="keyword">not</span> web_content.startswith(<span class="string">&quot;å…³äº&quot;</span>) <span class="keyword">and</span> <span class="keyword">not</span> web_content.startswith(<span class="string">&quot;ç½‘é¡µæœç´¢é‡åˆ°é”™è¯¯&quot;</span>):</span><br><span class="line">                combined_context += <span class="string">f&quot;ç½‘é¡µæœç´¢å†…å®¹ï¼š\n<span class="subst">&#123;web_content&#125;</span>\n\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> combined_context.strip():</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;è­¦å‘Šï¼šæœªæ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">self</span>.perform_fallback_topic_search(query)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç”Ÿæˆç»¼åˆç­”æ¡ˆ</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ç”Ÿæˆç»¼åˆç­”æ¡ˆ...&quot;</span>)</span><br><span class="line">            prompt = <span class="string">f&quot;&quot;&quot;åŸºäºä»¥ä¸‹PDFæ–‡æ¡£å’Œç½‘é¡µæœç´¢çš„ä¿¡æ¯ï¼Œå›ç­”é—®é¢˜ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"><span class="subst">&#123;combined_context&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é—®é¢˜ï¼š<span class="subst">&#123;query&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·æä¾›ç»¼åˆæ€§çš„è¯¦ç»†ç­”æ¡ˆï¼š&quot;&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            final_answer = <span class="variable language_">self</span>.rag_system.llm.generate(prompt, max_tokens=<span class="number">800</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;ä¸»é¢˜æ£€ç´¢å®Œæˆ&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&#x27;original_query&#x27;</span>: query,</span><br><span class="line">                <span class="string">&#x27;pdf_docs&#x27;</span>: pdf_docs,</span><br><span class="line">                <span class="string">&#x27;web_sources&#x27;</span>: web_sources,</span><br><span class="line">                <span class="string">&#x27;final_answer&#x27;</span>: final_answer,</span><br><span class="line">                <span class="string">&#x27;retrieval_method&#x27;</span>: <span class="string">&#x27;PDF+Web Topic Retrieval&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;è­¦å‘Šï¼šä¸»é¢˜æ£€ç´¢å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.perform_fallback_topic_search(query)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">perform_web_research</span>(<span class="params">self, query: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ‰§è¡Œç½‘é¡µç ”ç©¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨è¿›è¡Œç½‘é¡µç ”ç©¶...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># æ¨¡æ‹Ÿç½‘é¡µç ”ç©¶ç»“æœ</span></span><br><span class="line">            web_content = <span class="string">f&quot;åŸºäºç½‘é¡µæœç´¢çš„<span class="subst">&#123;query&#125;</span>ç›¸å…³ä¿¡æ¯ï¼š\n&quot;</span></span><br><span class="line">            web_content += <span class="string">&quot;- ç½‘é¡µæ¥æº1çš„ç›¸å…³å†…å®¹\n&quot;</span></span><br><span class="line">            web_content += <span class="string">&quot;- ç½‘é¡µæ¥æº2çš„ç›¸å…³å†…å®¹\n&quot;</span></span><br><span class="line">            web_content += <span class="string">&quot;- ç½‘é¡µæ¥æº3çš„ç›¸å…³å†…å®¹&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&quot;web_content&quot;</span>: web_content,</span><br><span class="line">                <span class="string">&quot;sources&quot;</span>: [<span class="string">&quot;ç½‘é¡µæ¥æº1&quot;</span>, <span class="string">&quot;ç½‘é¡µæ¥æº2&quot;</span>, <span class="string">&quot;ç½‘é¡µæ¥æº3&quot;</span>],</span><br><span class="line">                <span class="string">&quot;method&quot;</span>: <span class="string">&quot;web_research&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;ç½‘é¡µç ”ç©¶å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">f&quot;ç½‘é¡µç ”ç©¶å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">perform_fallback_topic_search</span>(<span class="params">self, query: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;å¤‡ç”¨ä¸»é¢˜æœç´¢ - ä»…ä½¿ç”¨PDFæ£€ç´¢&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ‰§è¡Œå¤‡ç”¨ä¸»é¢˜æœç´¢ï¼ˆä»…PDFæ£€ç´¢ï¼‰...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># è¿›è¡ŒPDFæ£€ç´¢</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨æ£€ç´¢PDFæ–‡æ¡£...&quot;</span>)</span><br><span class="line">            pdf_docs = <span class="variable language_">self</span>.rag_system.vector_retriever.query(query, top_k=<span class="number">5</span>, filter_type=<span class="string">&#x27;text&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> pdf_docs:</span><br><span class="line">                <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">&quot;æœªæ‰¾åˆ°ç›¸å…³PDFæ–‡æ¡£&quot;</span>&#125;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;æ£€ç´¢åˆ° <span class="subst">&#123;<span class="built_in">len</span>(pdf_docs)&#125;</span> ä¸ªPDFæ–‡æ¡£&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ˜¾ç¤ºæ£€ç´¢åˆ°çš„æ–‡æ¡£</span></span><br><span class="line">            <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(pdf_docs, <span class="number">1</span>):</span><br><span class="line">                similarity = doc.get(<span class="string">&#x27;similarity&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">                text_preview = doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)[:<span class="number">150</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)) &gt; <span class="number">150</span> <span class="keyword">else</span> doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i&#125;</span> (ç›¸ä¼¼åº¦: <span class="subst">&#123;similarity:<span class="number">.3</span>f&#125;</span>):&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;   <span class="subst">&#123;text_preview&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>()</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ„å»ºä¸Šä¸‹æ–‡</span></span><br><span class="line">            pdf_context = <span class="string">&quot;\n&quot;</span>.join([doc[<span class="string">&#x27;text&#x27;</span>] <span class="keyword">for</span> doc <span class="keyword">in</span> pdf_docs])</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç”Ÿæˆç­”æ¡ˆ</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...&quot;</span>)</span><br><span class="line">            prompt = <span class="string">f&quot;&quot;&quot;åŸºäºä»¥ä¸‹PDFæ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">PDFæ–‡æ¡£å†…å®¹ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;pdf_context&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">é—®é¢˜ï¼š<span class="subst">&#123;query&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·æä¾›è¯¦ç»†çš„ç­”æ¡ˆï¼Œç‰¹åˆ«å…³æ³¨CAMELæ¡†æ¶çš„ç‰¹æ€§å’Œå·¥å…·ï¼š&quot;&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            final_answer = <span class="variable language_">self</span>.rag_system.llm.generate(prompt, max_tokens=<span class="number">800</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;âˆš å¤‡ç”¨ä¸»é¢˜æœç´¢å®Œæˆ&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&#x27;original_query&#x27;</span>: query,</span><br><span class="line">                <span class="string">&#x27;retrieved_docs&#x27;</span>: pdf_docs,</span><br><span class="line">                <span class="string">&#x27;final_answer&#x27;</span>: final_answer,</span><br><span class="line">                <span class="string">&#x27;retrieval_method&#x27;</span>: <span class="string">&#x27;Fallback PDF Topic Retrieval&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;å¤‡ç”¨ä¸»é¢˜æœç´¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">f&quot;å¤‡ç”¨ä¸»é¢˜æœç´¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">merge_web_and_pdf_results</span>(<span class="params">self, web_results: <span class="type">Dict</span>, pdf_results: <span class="type">Dict</span>, query: <span class="built_in">str</span></span>) -&gt; <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå¹¶ç½‘é¡µå’ŒPDFæ£€ç´¢ç»“æœ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># åˆå¹¶ä¸Šä¸‹æ–‡</span></span><br><span class="line">            combined_context = <span class="string">&quot;&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ·»åŠ PDFå†…å®¹</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;retrieved_docs&#x27;</span> <span class="keyword">in</span> pdf_results:</span><br><span class="line">                pdf_context = <span class="string">&quot;\n&quot;</span>.join([doc[<span class="string">&#x27;text&#x27;</span>] <span class="keyword">for</span> doc <span class="keyword">in</span> pdf_results[<span class="string">&#x27;retrieved_docs&#x27;</span>]])</span><br><span class="line">                combined_context += <span class="string">f&quot;PDFæ–‡æ¡£å†…å®¹ï¼š\n<span class="subst">&#123;pdf_context&#125;</span>\n\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># æ·»åŠ ç½‘é¡µå†…å®¹</span></span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;web_content&#x27;</span> <span class="keyword">in</span> web_results:</span><br><span class="line">                combined_context += <span class="string">f&quot;ç½‘é¡µæœç´¢å†…å®¹ï¼š\n<span class="subst">&#123;web_results[<span class="string">&#x27;web_content&#x27;</span>]&#125;</span>\n\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç”Ÿæˆç»¼åˆç­”æ¡ˆ</span></span><br><span class="line">            prompt = <span class="string">f&quot;åŸºäºä»¥ä¸‹PDFæ–‡æ¡£å’Œç½‘é¡µæœç´¢çš„ä¿¡æ¯ï¼Œå›ç­”é—®é¢˜ï¼š\n\n<span class="subst">&#123;combined_context&#125;</span>\n\né—®é¢˜ï¼š<span class="subst">&#123;query&#125;</span>\n\nè¯·æä¾›ç»¼åˆæ€§çš„è¯¦ç»†ç­”æ¡ˆã€‚&quot;</span></span><br><span class="line">            </span><br><span class="line">            final_answer = <span class="variable language_">self</span>.rag_system.llm.generate(prompt, max_tokens=<span class="number">800</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="string">&#x27;original_query&#x27;</span>: query,</span><br><span class="line">                <span class="string">&#x27;pdf_docs&#x27;</span>: pdf_results.get(<span class="string">&#x27;retrieved_docs&#x27;</span>, []),</span><br><span class="line">                <span class="string">&#x27;web_sources&#x27;</span>: web_results.get(<span class="string">&#x27;sources&#x27;</span>, []),</span><br><span class="line">                <span class="string">&#x27;final_answer&#x27;</span>: final_answer,</span><br><span class="line">                <span class="string">&#x27;retrieval_method&#x27;</span>: <span class="string">&#x27;PDF+Webä¸»é¢˜æ£€ç´¢&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="string">&quot;error&quot;</span>: <span class="string">f&quot;ç»“æœåˆå¹¶å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display_results</span>(<span class="params">self, results: <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;error&#x27;</span> <span class="keyword">in</span> results:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é”™è¯¯: <span class="subst">&#123;results[<span class="string">&#x27;error&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">20</span> + <span class="string">&quot; æ·±åº¦æ£€ç´¢ç»“æœ &quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">20</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;åŸç»“å§‹æŸ¥è¯¢: <span class="subst">&#123;results.get(<span class="string">&#x27;original_query&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>)&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> results.get(<span class="string">&#x27;rewritten_query&#x27;</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é‡å†™æŸ¥è¯¢: <span class="subst">&#123;results[<span class="string">&#x27;rewritten_query&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æ£€ç´¢æ–¹æ³•: <span class="subst">&#123;results.get(<span class="string">&#x27;retrieval_method&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>)&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºæ£€ç´¢åˆ°çš„æ–‡æ¡£</span></span><br><span class="line">        retrieved_docs = results.get(<span class="string">&#x27;retrieved_docs&#x27;</span>, [])</span><br><span class="line">        <span class="keyword">if</span> retrieved_docs:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;\næ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±<span class="subst">&#123;<span class="built_in">len</span>(retrieved_docs)&#125;</span>ä¸ª):&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>()</span><br><span class="line">            <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(retrieved_docs, <span class="number">1</span>):</span><br><span class="line">                rrf_score = doc.get(<span class="string">&#x27;rrf_score&#x27;</span>, doc.get(<span class="string">&#x27;similarity&#x27;</span>, <span class="number">0</span>))</span><br><span class="line">                text_preview = doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)[:<span class="number">200</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)) &gt; <span class="number">200</span> <span class="keyword">else</span> doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;æ–‡æ¡£ <span class="subst">&#123;i&#125;</span>:&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;ç›¸å…³åº¦åˆ†æ•°: <span class="subst">&#123;rrf_score&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;å†…å®¹é¢„è§ˆ: <span class="subst">&#123;text_preview&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºæœ€ç»ˆç­”æ¡ˆ</span></span><br><span class="line">        final_answer = results.get(<span class="string">&#x27;final_answer&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(final_answer)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è¯¢é—®æ˜¯å¦ä¿å­˜ç»“æœ</span></span><br><span class="line">        save_choice = <span class="built_in">input</span>(<span class="string">&quot;\nè¯¢é—®ï¼šæ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶ï¼Ÿ(y/n): &quot;</span>).strip().lower()</span><br><span class="line">        <span class="keyword">if</span> save_choice == <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">            <span class="variable language_">self</span>._save_results_to_file(results)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_save_results_to_file</span>(<span class="params">self, results: <span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¿å­˜ç»“æœåˆ°æ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line">            timestamp = datetime.now().strftime(<span class="string">&#x27;%Y%m%d_%H%M%S&#x27;</span>)</span><br><span class="line">            filename = <span class="string">f&quot;rag_query_result_<span class="subst">&#123;timestamp&#125;</span>.txt&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(<span class="string">&quot;=&quot;</span>*<span class="number">60</span> + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">&quot;RAGæŸ¥è¯¢ç»“æœæŠ¥å‘Š\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">&quot;=&quot;</span>*<span class="number">60</span> + <span class="string">&quot;\n\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">f&quot;æŸ¥è¯¢æ—¶é—´: <span class="subst">&#123;datetime.now().strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)&#125;</span>\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">f&quot;åŸå§‹æŸ¥è¯¢: <span class="subst">&#123;results.get(<span class="string">&#x27;original_query&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>)&#125;</span>\n&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> results.get(<span class="string">&#x27;rewritten_query&#x27;</span>):</span><br><span class="line">                    f.write(<span class="string">f&quot;é‡å†™æŸ¥è¯¢: <span class="subst">&#123;results[<span class="string">&#x27;rewritten_query&#x27;</span>]&#125;</span>\n&quot;</span>)</span><br><span class="line">                f.write(<span class="string">f&quot;æ£€ç´¢æ–¹æ³•: <span class="subst">&#123;results.get(<span class="string">&#x27;retrieval_method&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>)&#125;</span>\n\n&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># ä¿å­˜æ£€ç´¢æ–‡æ¡£</span></span><br><span class="line">                retrieved_docs = results.get(<span class="string">&#x27;retrieved_docs&#x27;</span>, [])</span><br><span class="line">                <span class="keyword">if</span> retrieved_docs:</span><br><span class="line">                    f.write(<span class="string">f&quot;æ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±<span class="subst">&#123;<span class="built_in">len</span>(retrieved_docs)&#125;</span>ä¸ª):\n&quot;</span>)</span><br><span class="line">                    f.write(<span class="string">&quot;-&quot;</span> * <span class="number">40</span> + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                    <span class="keyword">for</span> i, doc <span class="keyword">in</span> <span class="built_in">enumerate</span>(retrieved_docs, <span class="number">1</span>):</span><br><span class="line">                        rrf_score = doc.get(<span class="string">&#x27;rrf_score&#x27;</span>, doc.get(<span class="string">&#x27;similarity&#x27;</span>, <span class="number">0</span>))</span><br><span class="line">                        f.write(<span class="string">f&quot;\næ–‡æ¡£ <span class="subst">&#123;i&#125;</span>:\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">f&quot;ç›¸å…³åº¦åˆ†æ•°: <span class="subst">&#123;rrf_score&#125;</span>\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">f&quot;å†…å®¹: <span class="subst">&#123;doc.get(<span class="string">&#x27;text&#x27;</span>, <span class="string">&#x27;&#x27;</span>)&#125;</span>\n&quot;</span>)</span><br><span class="line">                        f.write(<span class="string">&quot;-&quot;</span> * <span class="number">40</span> + <span class="string">&quot;\n&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># ä¿å­˜æœ€ç»ˆç­”æ¡ˆ</span></span><br><span class="line">                f.write(<span class="string">f&quot;\nç”Ÿæˆç­”æ¡ˆ:\n&quot;</span>)</span><br><span class="line">                f.write(results.get(<span class="string">&#x27;final_answer&#x27;</span>, <span class="string">&#x27;N/A&#x27;</span>))</span><br><span class="line">                f.write(<span class="string">&quot;\n\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;âˆš ç»“æœå·²ä¿å­˜åˆ°: <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;é”™è¯¯ï¼šä¿å­˜å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_interactive_session</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è¿è¡Œäº¤äº’å¼ä¼šè¯&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.initialize_system():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\näº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;åŠŸèƒ½ç‰¹æ€§:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;- æ”¯æŒåœ¨çº¿/æœ¬åœ°PDFåŠ è½½&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;- ä¸‰ç§æ£€ç´¢æ¨¡å¼&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;- ç½‘é¡µçˆ¬å–é›†æˆ&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;- å¤šæ¨¡æ€å†…å®¹å¤„ç†&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åŠ è½½çŸ¥è¯†åº“</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.load_pdf_knowledge_base():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;çŸ¥è¯†åº“åŠ è½½å¤±è´¥ï¼Œé€€å‡ºç³»ç»Ÿ&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;\nå½“å‰çŸ¥è¯†åº“: <span class="subst">&#123;self.current_pdf_source&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ğŸ”§ å¯ç”¨æ£€ç´¢æ–¹æ³•: <span class="subst">&#123;<span class="string">&#x27;, &#x27;</span>.join(self.rag_system.get_available_retrieval_methods())&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;æŸ¥è¯¢é€‰é¡¹&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è·å–ç”¨æˆ·æŸ¥è¯¢</span></span><br><span class="line">                query = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (è¾“å…¥ &#x27;quit&#x27; é€€å‡º, &#x27;reload&#x27; é‡æ–°åŠ è½½PDF): &quot;</span>).strip()</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> query.lower() == <span class="string">&#x27;quit&#x27;</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">elif</span> query.lower() == <span class="string">&#x27;reload&#x27;</span>:</span><br><span class="line">                    <span class="keyword">if</span> <span class="variable language_">self</span>.load_pdf_knowledge_base():</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">f&quot;âˆš çŸ¥è¯†åº“å·²é‡æ–°åŠ è½½: <span class="subst">&#123;self.current_pdf_source&#125;</span>&quot;</span>)</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                <span class="keyword">elif</span> <span class="keyword">not</span> query:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;é—®é¢˜ä¸èƒ½ä¸ºç©º&quot;</span>)</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># é€‰æ‹©æ£€ç´¢æ¨¡å¼</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;\né€‰æ‹©æ£€ç´¢æ¨¡å¼:&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;1. å¿«é€Ÿæ£€ç´¢ (åŸºç¡€å‘é‡æ£€ç´¢)&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;2. æ·±åº¦æ£€ç´¢ (é‡å†™+HyDE+RRF)&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;3. ä¸»é¢˜æ£€ç´¢ (PDF+ç½‘é¡µçˆ¬å–)&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                mode_choice = <span class="built_in">input</span>(<span class="string">&quot;è¯·é€‰æ‹©æ¨¡å¼ (1-3): &quot;</span>).strip()</span><br><span class="line">                </span><br><span class="line">                mode_map = &#123;</span><br><span class="line">                    <span class="string">&quot;1&quot;</span>: <span class="string">&quot;å¿«é€Ÿæ£€ç´¢&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;2&quot;</span>: <span class="string">&quot;æ·±åº¦æ£€ç´¢&quot;</span>, </span><br><span class="line">                    <span class="string">&quot;3&quot;</span>: <span class="string">&quot;ä¸»é¢˜æ£€ç´¢&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                retrieval_mode = mode_map.get(mode_choice)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> retrieval_mode:</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;æ— æ•ˆé€‰æ‹©ï¼Œä½¿ç”¨é»˜è®¤å¿«é€Ÿæ£€ç´¢&quot;</span>)</span><br><span class="line">                    retrieval_mode = <span class="string">&quot;å¿«é€Ÿæ£€ç´¢&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">                results = <span class="variable language_">self</span>.execute_query(query, retrieval_mode)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># æ˜¾ç¤ºç»“æœ</span></span><br><span class="line">                <span class="variable language_">self</span>.display_results(results)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è¯¢é—®æ˜¯å¦ç»§ç»­</span></span><br><span class="line">                continue_choice = <span class="built_in">input</span>(<span class="string">&quot;\næ˜¯å¦ç»§ç»­æŸ¥è¯¢ï¼Ÿ(y/n): &quot;</span>).strip().lower()</span><br><span class="line">                <span class="keyword">if</span> continue_choice != <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;\n\nç”¨æˆ·ä¸­æ–­ï¼Œé€€å‡ºç³»ç»Ÿ&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;ç³»ç»Ÿé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;\næ„Ÿè°¢ä½¿ç”¨äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸»å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        interactive_rag = InteractiveMultimodalRAG()</span><br><span class="line">        interactive_rag.run_interactive_session()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ç³»ç»Ÿå¯åŠ¨å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        sys.exit(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>


<p><strong>åˆ†æ”¯ä»£ç 1</strong>ï¼šã€RAG_WEB_TOPIC_Enhanced.pyã€‘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span>, <span class="type">Optional</span>, <span class="type">Any</span></span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"><span class="keyword">import</span> agentops</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> Fore, init</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> camel.loaders <span class="keyword">import</span> Firecrawl, UnstructuredIO</span><br><span class="line"><span class="keyword">from</span> camel.retrievers <span class="keyword">import</span> AutoRetriever</span><br><span class="line"><span class="keyword">from</span> camel.toolkits <span class="keyword">import</span> FunctionTool, SearchToolkit</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType, StorageType</span><br><span class="line"><span class="keyword">from</span> camel.embeddings <span class="keyword">import</span> SentenceTransformerEncoder</span><br><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.societies <span class="keyword">import</span> RolePlaying</span><br><span class="line"><span class="keyword">from</span> camel.utils <span class="keyword">import</span> print_text_animated</span><br><span class="line"><span class="keyword">from</span> camel.storages <span class="keyword">import</span> Neo4jGraph</span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> KnowledgeGraphAgent, ChatAgent</span><br><span class="line"><span class="keyword">from</span> camel.messages <span class="keyword">import</span> BaseMessage</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥åŸå§‹ç³»ç»Ÿçš„æ‰€æœ‰ç±»å’Œé…ç½®</span></span><br><span class="line"><span class="keyword">from</span> RAG_WEB_TOPIC <span class="keyword">import</span> (</span><br><span class="line">    ResearchConfig, ConfigManager, UniversalResearchSystem, </span><br><span class="line">    InteractiveResearchSystem</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ– colorama</span></span><br><span class="line">init(autoreset=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…¨å±€ä¼šè¯æ•°æ®è®°å½•</span></span><br><span class="line">research_session_data = &#123;</span><br><span class="line">    <span class="string">&#x27;start_time&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">&#x27;end_time&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line">    <span class="string">&#x27;topic&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;research_question&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;search_results&#x27;</span>: [],</span><br><span class="line">    <span class="string">&#x27;retrieval_results&#x27;</span>: [],</span><br><span class="line">    <span class="string">&#x27;knowledge_graphs&#x27;</span>: [],</span><br><span class="line">    <span class="string">&#x27;conversation_history&#x27;</span>: [],</span><br><span class="line">    <span class="string">&#x27;generated_files&#x27;</span>: [],</span><br><span class="line">    <span class="string">&#x27;system_stats&#x27;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EnhancedInteractiveResearchSystem</span>(<span class="title class_ inherited__">InteractiveResearchSystem</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å¢å¼ºç‰ˆäº¤äº’å¼ç ”ç©¶ç³»ç»Ÿ - æ”¯æŒæœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.session_data = research_session_data</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">log_search_result</span>(<span class="params">self, query: <span class="built_in">str</span>, results: <span class="type">Any</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è®°å½•æœç´¢ç»“æœ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.session_data[<span class="string">&#x27;search_results&#x27;</span>].append(&#123;</span><br><span class="line">            <span class="string">&#x27;query&#x27;</span>: query,</span><br><span class="line">            <span class="string">&#x27;results&#x27;</span>: <span class="built_in">str</span>(results)[:<span class="number">1000</span>],  <span class="comment"># é™åˆ¶é•¿åº¦</span></span><br><span class="line">            <span class="string">&#x27;timestamp&#x27;</span>: datetime.now().isoformat()</span><br><span class="line">        &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">log_retrieval_result</span>(<span class="params">self, urls: <span class="type">List</span>[<span class="built_in">str</span>], query: <span class="built_in">str</span>, results: <span class="type">Any</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è®°å½•æ£€ç´¢ç»“æœ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.session_data[<span class="string">&#x27;retrieval_results&#x27;</span>].append(&#123;</span><br><span class="line">            <span class="string">&#x27;urls&#x27;</span>: urls,</span><br><span class="line">            <span class="string">&#x27;query&#x27;</span>: query,</span><br><span class="line">            <span class="string">&#x27;results&#x27;</span>: <span class="built_in">str</span>(results)[:<span class="number">1000</span>],  <span class="comment"># é™åˆ¶é•¿åº¦</span></span><br><span class="line">            <span class="string">&#x27;timestamp&#x27;</span>: datetime.now().isoformat()</span><br><span class="line">        &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">log_knowledge_graph</span>(<span class="params">self, text_input: <span class="built_in">str</span>, topic: <span class="built_in">str</span>, result: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è®°å½•çŸ¥è¯†å›¾è°±æ„å»º&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.session_data[<span class="string">&#x27;knowledge_graphs&#x27;</span>].append(&#123;</span><br><span class="line">            <span class="string">&#x27;input_text&#x27;</span>: text_input[:<span class="number">500</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(text_input) &gt; <span class="number">500</span> <span class="keyword">else</span> text_input,</span><br><span class="line">            <span class="string">&#x27;topic&#x27;</span>: topic,</span><br><span class="line">            <span class="string">&#x27;result&#x27;</span>: result[:<span class="number">500</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(result) &gt; <span class="number">500</span> <span class="keyword">else</span> result,</span><br><span class="line">            <span class="string">&#x27;timestamp&#x27;</span>: datetime.now().isoformat()</span><br><span class="line">        &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">log_conversation</span>(<span class="params">self, role: <span class="built_in">str</span>, content: <span class="built_in">str</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è®°å½•å¯¹è¯å†å²&quot;&quot;&quot;</span></span><br><span class="line">        <span class="variable language_">self</span>.session_data[<span class="string">&#x27;conversation_history&#x27;</span>].append(&#123;</span><br><span class="line">            <span class="string">&#x27;role&#x27;</span>: role,</span><br><span class="line">            <span class="string">&#x27;content&#x27;</span>: content[:<span class="number">800</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(content) &gt; <span class="number">800</span> <span class="keyword">else</span> content,</span><br><span class="line">            <span class="string">&#x27;timestamp&#x27;</span>: datetime.now().isoformat()</span><br><span class="line">        &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_enhanced_research_tools</span>(<span class="params">self, topic: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[FunctionTool]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆ›å»ºå¢å¼ºç‰ˆç ”ç©¶å·¥å…·ï¼ˆå¸¦æ—¥å¿—è®°å½•ï¼‰&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">enhanced_retrieve_urls</span>(<span class="params">urls: <span class="type">List</span>[<span class="built_in">str</span>], query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">            result = <span class="variable language_">self</span>.toolkit.retrieve_information_from_urls(urls, query)</span><br><span class="line">            <span class="variable language_">self</span>.log_retrieval_result(urls, query, result)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">enhanced_search_topic</span>(<span class="params">query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">            result = <span class="variable language_">self</span>.toolkit.search_web_for_topic(query, topic)</span><br><span class="line">            <span class="variable language_">self</span>.log_search_result(query, result)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">enhanced_build_kg</span>(<span class="params">text_input: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">            result = <span class="variable language_">self</span>.toolkit.build_knowledge_graph(text_input, topic)</span><br><span class="line">            <span class="variable language_">self</span>.log_knowledge_graph(text_input, topic, result)</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            FunctionTool(enhanced_retrieve_urls),</span><br><span class="line">            FunctionTool(enhanced_search_topic),</span><br><span class="line">            FunctionTool(enhanced_build_kg),</span><br><span class="line">        ]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">generate_final_research_report</span>(<span class="params">self</span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ç”Ÿæˆæœ€ç»ˆç ”ç©¶æŠ¥å‘Š&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.model:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;âŒ AIæ¨¡å‹æœªåˆå§‹åŒ–ï¼Œæ— æ³•ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">&quot;ğŸ“Š æ­£åœ¨ç”Ÿæˆæœ€ç»ˆç ”ç©¶æŠ¥å‘Š...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¡ç®—ç»Ÿè®¡æ•°æ®</span></span><br><span class="line">        duration = <span class="string">&quot;æœªçŸ¥&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;start_time&#x27;</span>] <span class="keyword">and</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;end_time&#x27;</span>]:</span><br><span class="line">            start = datetime.fromisoformat(<span class="variable language_">self</span>.session_data[<span class="string">&#x27;start_time&#x27;</span>])</span><br><span class="line">            end = datetime.fromisoformat(<span class="variable language_">self</span>.session_data[<span class="string">&#x27;end_time&#x27;</span>])</span><br><span class="line">            duration = <span class="built_in">str</span>(end - start)</span><br><span class="line">        </span><br><span class="line">        total_searches = <span class="built_in">len</span>(<span class="variable language_">self</span>.session_data[<span class="string">&#x27;search_results&#x27;</span>])</span><br><span class="line">        total_retrievals = <span class="built_in">len</span>(<span class="variable language_">self</span>.session_data[<span class="string">&#x27;retrieval_results&#x27;</span>])</span><br><span class="line">        total_kg = <span class="built_in">len</span>(<span class="variable language_">self</span>.session_data[<span class="string">&#x27;knowledge_graphs&#x27;</span>])</span><br><span class="line">        total_conversations = <span class="built_in">len</span>(<span class="variable language_">self</span>.session_data[<span class="string">&#x27;conversation_history&#x27;</span>])</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ”¶é›†å…³é”®ä¿¡æ¯</span></span><br><span class="line">        search_summary = <span class="string">&quot;\n&quot;</span>.join([<span class="string">f&quot;- <span class="subst">&#123;item[<span class="string">&#x27;query&#x27;</span>]&#125;</span>: <span class="subst">&#123;item[<span class="string">&#x27;results&#x27;</span>][:<span class="number">200</span>]&#125;</span>...&quot;</span> </span><br><span class="line">                                   <span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;search_results&#x27;</span>][:<span class="number">5</span>]])</span><br><span class="line">        </span><br><span class="line">        retrieval_summary = <span class="string">&quot;\n&quot;</span>.join([<span class="string">f&quot;- <span class="subst">&#123;item[<span class="string">&#x27;query&#x27;</span>]&#125;</span>: <span class="subst">&#123;item[<span class="string">&#x27;results&#x27;</span>][:<span class="number">200</span>]&#125;</span>...&quot;</span> </span><br><span class="line">                                      <span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;retrieval_results&#x27;</span>][:<span class="number">5</span>]])</span><br><span class="line">        </span><br><span class="line">        conversation_summary = <span class="string">&quot;\n&quot;</span>.join([<span class="string">f&quot;**<span class="subst">&#123;item[<span class="string">&#x27;role&#x27;</span>]&#125;</span>**: <span class="subst">&#123;item[<span class="string">&#x27;content&#x27;</span>][:<span class="number">300</span>]&#125;</span>...&quot;</span> </span><br><span class="line">                                         <span class="keyword">for</span> item <span class="keyword">in</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;conversation_history&#x27;</span>][:<span class="number">10</span>]])</span><br><span class="line">        </span><br><span class="line">        report_prompt = <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">åŸºäºä»¥ä¸‹ç ”ç©¶ç³»ç»Ÿçš„å®Œæ•´è¿è¡Œæ•°æ®ï¼Œç”Ÿæˆä¸€ä»½è¯¦ç»†çš„æœ€ç»ˆç ”ç©¶æŠ¥å‘Šï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## ç ”ç©¶åŸºæœ¬ä¿¡æ¯ï¼š</span></span><br><span class="line"><span class="string">- ç ”ç©¶ä¸»é¢˜: <span class="subst">&#123;self.session_data[<span class="string">&#x27;topic&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">- ç ”ç©¶é—®é¢˜: <span class="subst">&#123;self.session_data[<span class="string">&#x27;research_question&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">- ç ”ç©¶æ—¶é•¿: <span class="subst">&#123;duration&#125;</span></span></span><br><span class="line"><span class="string">- å¼€å§‹æ—¶é—´: <span class="subst">&#123;self.session_data[<span class="string">&#x27;start_time&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string">- ç»“æŸæ—¶é—´: <span class="subst">&#123;self.session_data[<span class="string">&#x27;end_time&#x27;</span>]&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## ç³»ç»Ÿè¿è¡Œç»Ÿè®¡ï¼š</span></span><br><span class="line"><span class="string">- æ‰§è¡Œæœç´¢æ¬¡æ•°: <span class="subst">&#123;total_searches&#125;</span></span></span><br><span class="line"><span class="string">- æ‰§è¡Œæ£€ç´¢æ¬¡æ•°: <span class="subst">&#123;total_retrievals&#125;</span></span></span><br><span class="line"><span class="string">- ç”ŸæˆçŸ¥è¯†å›¾è°±æ•°é‡: <span class="subst">&#123;total_kg&#125;</span></span></span><br><span class="line"><span class="string">- å¯¹è¯è½®æ¬¡: <span class="subst">&#123;total_conversations&#125;</span></span></span><br><span class="line"><span class="string">- ç”Ÿæˆæ–‡ä»¶æ•°é‡: <span class="subst">&#123;<span class="built_in">len</span>(self.session_data[<span class="string">&#x27;generated_files&#x27;</span>])&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## æœç´¢ç»“æœæ‘˜è¦ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;search_summary&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## æ£€ç´¢ç»“æœæ‘˜è¦ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;retrieval_summary&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## å¯¹è¯å†å²æ‘˜è¦ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;conversation_summary&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## ç”Ÿæˆçš„æ–‡ä»¶ï¼š</span></span><br><span class="line"><span class="string"><span class="subst">&#123;<span class="string">&#x27;, &#x27;</span>.join(self.session_data[<span class="string">&#x27;generated_files&#x27;</span>])&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·æŒ‰ä»¥ä¸‹ç»“æ„ç”Ÿæˆæœ€ç»ˆç ”ç©¶æŠ¥å‘Šï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># <span class="subst">&#123;self.session_data[<span class="string">&#x27;topic&#x27;</span>]&#125;</span> - ç ”ç©¶æœ€ç»ˆæŠ¥å‘Š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 1. æ‰§è¡Œæ‘˜è¦</span></span><br><span class="line"><span class="string">- ç ”ç©¶ç›®æ ‡å’ŒèŒƒå›´</span></span><br><span class="line"><span class="string">- ä¸»è¦å‘ç°æ¦‚è¿°</span></span><br><span class="line"><span class="string">- ç³»ç»Ÿè¿è¡Œæ•ˆæœè¯„ä¼°</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 2. ç ”ç©¶æ–¹æ³•å’Œè¿‡ç¨‹</span></span><br><span class="line"><span class="string">- æ•°æ®æ”¶é›†æ–¹æ³•</span></span><br><span class="line"><span class="string">- æ£€ç´¢å’Œåˆ†ææµç¨‹</span></span><br><span class="line"><span class="string">- çŸ¥è¯†å›¾è°±æ„å»ºè¿‡ç¨‹</span></span><br><span class="line"><span class="string">- æŠ€æœ¯å·¥å…·ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 3. è¯¦ç»†ç ”ç©¶ç»“æœ</span></span><br><span class="line"><span class="string">- æ ¸å¿ƒå‘ç°å’Œæ•°æ®</span></span><br><span class="line"><span class="string">- å…³é”®ä¿¡æ¯åˆ†æ</span></span><br><span class="line"><span class="string">- é‡è¦è§‚ç‚¹æ•´ç†</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 4. ç³»ç»Ÿæ€§èƒ½åˆ†æ</span></span><br><span class="line"><span class="string">- RAGæ£€ç´¢æ•ˆæœè¯„ä¼°</span></span><br><span class="line"><span class="string">- çŸ¥è¯†å›¾è°±æ„å»ºè´¨é‡</span></span><br><span class="line"><span class="string">- å¯¹è¯ç³»ç»Ÿè¡¨ç°</span></span><br><span class="line"><span class="string">- æ•°æ®å¤„ç†æ•ˆç‡</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 5. ç»“è®ºå’Œå»ºè®®</span></span><br><span class="line"><span class="string">- ç ”ç©¶ç»“è®ºæ€»ç»“</span></span><br><span class="line"><span class="string">- å‘ç°çš„é—®é¢˜å’Œå±€é™</span></span><br><span class="line"><span class="string">- æ”¹è¿›å»ºè®®</span></span><br><span class="line"><span class="string">- åç»­ç ”ç©¶æ–¹å‘</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 6. æŠ€æœ¯é™„å½•</span></span><br><span class="line"><span class="string">- ç³»ç»Ÿé…ç½®å‚æ•°</span></span><br><span class="line"><span class="string">- ç”Ÿæˆçš„æ–‡ä»¶æ¸…å•</span></span><br><span class="line"><span class="string">- æ•°æ®æ¥æºç»Ÿè®¡</span></span><br><span class="line"><span class="string">- è¿è¡Œæ—¥å¿—æ‘˜è¦</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·ç¡®ä¿æŠ¥å‘Šå†…å®¹è¯¦å®ã€åˆ†ææ·±å…¥ã€ç»“è®ºå®¢è§‚ï¼Œé‡ç‚¹å›ç­”ç ”ç©¶é—®é¢˜ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># åˆ›å»ºæŠ¥å‘Šç”Ÿæˆæ™ºèƒ½ä½“</span></span><br><span class="line">            report_agent = ChatAgent(</span><br><span class="line">                system_message=BaseMessage.make_assistant_message(</span><br><span class="line">                    role_name=<span class="string">&quot;ç ”ç©¶æŠ¥å‘Šä¸“å®¶&quot;</span>,</span><br><span class="line">                    content=<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç ”ç©¶åˆ†æå¸ˆå’ŒæŠ€æœ¯ç³»ç»Ÿè¯„ä¼°ä¸“å®¶ï¼Œæ“…é•¿ç”Ÿæˆè¯¦ç»†çš„ç ”ç©¶æŠ¥å‘Šå’Œç³»ç»Ÿè¯„ä¼°æŠ¥å‘Šã€‚&quot;</span></span><br><span class="line">                ),</span><br><span class="line">                model=<span class="variable language_">self</span>.model</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            user_msg = BaseMessage.make_user_message(</span><br><span class="line">                role_name=<span class="string">&quot;æŠ¥å‘Šè¯·æ±‚è€…&quot;</span>, </span><br><span class="line">                content=report_prompt</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            response = report_agent.step(user_msg)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ä¿å­˜æœ€ç»ˆæŠ¥å‘Š</span></span><br><span class="line">            timestamp = datetime.now().strftime(<span class="string">&#x27;%Y%m%d_%H%M%S&#x27;</span>)</span><br><span class="line">            topic_safe = <span class="string">&quot;&quot;</span>.join(c <span class="keyword">for</span> c <span class="keyword">in</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;topic&#x27;</span>] <span class="keyword">if</span> c.isalnum() <span class="keyword">or</span> c <span class="keyword">in</span> (<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;_&#x27;</span>)).rstrip()</span><br><span class="line">            topic_safe = topic_safe.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;_&#x27;</span>)[:<span class="number">50</span>]  <span class="comment"># é™åˆ¶æ–‡ä»¶åé•¿åº¦</span></span><br><span class="line">            </span><br><span class="line">            report_filename = <span class="string">f&quot;final_research_report_<span class="subst">&#123;topic_safe&#125;</span>_<span class="subst">&#123;timestamp&#125;</span>.md&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(report_filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(response.msg.content)</span><br><span class="line">            </span><br><span class="line">            <span class="variable language_">self</span>.session_data[<span class="string">&#x27;generated_files&#x27;</span>].append(report_filename)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;âœ… æœ€ç»ˆæŠ¥å‘Šå·²ä¿å­˜: <span class="subst">&#123;report_filename&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> response.msg.content</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            error_msg = <span class="string">f&quot;âŒ æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span></span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + error_msg)</span><br><span class="line">            <span class="keyword">return</span> error_msg</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_enhanced_interactive_research</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è¿è¡Œå¢å¼ºç‰ˆäº¤äº’å¼ç ”ç©¶ï¼ˆå«æœ€ç»ˆæŠ¥å‘Šï¼‰&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.model <span class="keyword">or</span> <span class="keyword">not</span> <span class="variable language_">self</span>.research_system:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">&quot;âŒ ç³»ç»Ÿæœªæ­£ç¡®åˆå§‹åŒ–ï¼Œæ— æ³•è¿è¡Œ&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;ğŸš€ å¢å¼ºç‰ˆé€šç”¨AIç ”ç©¶ç³»ç»Ÿï¼ˆå«æœ€ç»ˆæŠ¥å‘Šï¼‰&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">70</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># é‡ç½®ä¼šè¯æ•°æ®</span></span><br><span class="line">                <span class="variable language_">self</span>.session_data.update(&#123;</span><br><span class="line">                    <span class="string">&#x27;start_time&#x27;</span>: datetime.now().isoformat(),</span><br><span class="line">                    <span class="string">&#x27;end_time&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line">                    <span class="string">&#x27;topic&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;research_question&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                    <span class="string">&#x27;search_results&#x27;</span>: [],</span><br><span class="line">                    <span class="string">&#x27;retrieval_results&#x27;</span>: [],</span><br><span class="line">                    <span class="string">&#x27;knowledge_graphs&#x27;</span>: [],</span><br><span class="line">                    <span class="string">&#x27;conversation_history&#x27;</span>: [],</span><br><span class="line">                    <span class="string">&#x27;generated_files&#x27;</span>: [],</span><br><span class="line">                    <span class="string">&#x27;system_stats&#x27;</span>: &#123;&#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è·å–ç”¨æˆ·è¾“å…¥</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;\nè¯·è¾“å…¥ç ”ç©¶ä¿¡æ¯:&quot;</span>)</span><br><span class="line">                topic = <span class="built_in">input</span>(Fore.CYAN + <span class="string">&quot;ç ”ç©¶ä¸»é¢˜: &quot;</span>).strip()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> topic:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                research_question = <span class="built_in">input</span>(Fore.CYAN + <span class="string">&quot;å…·ä½“é—®é¢˜: &quot;</span>).strip()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> research_question:</span><br><span class="line">                    research_question = <span class="string">f&quot;å…³äº<span class="subst">&#123;topic&#125;</span>çš„ç»¼åˆä¿¡æ¯&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è®°å½•ç ”ç©¶ä¿¡æ¯</span></span><br><span class="line">                <span class="variable language_">self</span>.session_data[<span class="string">&#x27;topic&#x27;</span>] = topic</span><br><span class="line">                <span class="variable language_">self</span>.session_data[<span class="string">&#x27;research_question&#x27;</span>] = research_question</span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;\nğŸ“‹ å¼€å§‹ç ”ç©¶:&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;   ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;   é—®é¢˜: <span class="subst">&#123;research_question&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">70</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># åˆ›å»ºå¢å¼ºç‰ˆç ”ç©¶å·¥å…·å’Œä»»åŠ¡</span></span><br><span class="line">                tools = <span class="variable language_">self</span>.create_enhanced_research_tools(topic)</span><br><span class="line">                task_prompt = <span class="variable language_">self</span>.create_research_task(topic, research_question)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># åˆ›å»ºè§’è‰²æ‰®æ¼”ç³»ç»Ÿ</span></span><br><span class="line">                role_play_session = RolePlaying(</span><br><span class="line">                    assistant_role_name=<span class="string">&quot;AIç ”ç©¶åŠ©ç†&quot;</span>,</span><br><span class="line">                    user_role_name=<span class="string">&quot;ç ”ç©¶ç”¨æˆ·&quot;</span>,</span><br><span class="line">                    assistant_agent_kwargs=<span class="built_in">dict</span>(</span><br><span class="line">                        model=<span class="variable language_">self</span>.model,</span><br><span class="line">                        tools=tools,</span><br><span class="line">                    ),</span><br><span class="line">                    user_agent_kwargs=<span class="built_in">dict</span>(model=<span class="variable language_">self</span>.model),</span><br><span class="line">                    task_prompt=task_prompt,</span><br><span class="line">                    with_task_specify=<span class="literal">False</span>,</span><br><span class="line">                )</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è®°å½•åˆå§‹å¯¹è¯</span></span><br><span class="line">                <span class="variable language_">self</span>.log_conversation(<span class="string">&quot;ç³»ç»Ÿ&quot;</span>, <span class="string">f&quot;å¼€å§‹ç ”ç©¶: <span class="subst">&#123;topic&#125;</span> - <span class="subst">&#123;research_question&#125;</span>&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># æ‰§è¡Œç ”ç©¶</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;ğŸ¤– AIåŠ©ç†å·²å‡†å¤‡å°±ç»ª&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;ğŸ‘¤ å¼€å§‹ç ”ç©¶å¯¹è¯...&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                input_msg = role_play_session.init_chat()</span><br><span class="line">                chat_turn_limit = <span class="number">8</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(chat_turn_limit):</span><br><span class="line">                    <span class="built_in">print</span>(Fore.MAGENTA + <span class="string">f&quot;\n--- ç ”ç©¶è½®æ¬¡ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span> ---&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        assistant_response, user_response = role_play_session.step(input_msg)</span><br><span class="line">                        </span><br><span class="line">                        <span class="comment"># è®°å½•å¯¹è¯</span></span><br><span class="line">                        <span class="variable language_">self</span>.log_conversation(<span class="string">&quot;åŠ©ç†&quot;</span>, assistant_response.msg.content)</span><br><span class="line">                        <span class="variable language_">self</span>.log_conversation(<span class="string">&quot;ç”¨æˆ·&quot;</span>, user_response.msg.content)</span><br><span class="line">                        </span><br><span class="line">                        <span class="keyword">if</span> assistant_response.terminated <span class="keyword">or</span> user_response.terminated:</span><br><span class="line">                            <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… ç ”ç©¶ä»»åŠ¡å®Œæˆ&quot;</span>)</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="comment"># æ˜¾ç¤ºè¿›åº¦</span></span><br><span class="line">                        <span class="built_in">print</span>(Fore.CYAN + <span class="string">f&quot;ğŸ”„ åŠ©ç†: <span class="subst">&#123;assistant_response.msg.content[:<span class="number">200</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;ğŸ”„ ç”¨æˆ·: <span class="subst">&#123;user_response.msg.content[:<span class="number">200</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                        </span><br><span class="line">                        input_msg = assistant_response.msg</span><br><span class="line">                        time.sleep(<span class="number">1</span>)  <span class="comment"># é¿å…è¯·æ±‚è¿‡å¿«</span></span><br><span class="line">                        </span><br><span class="line">                    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                        <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;ç ”ç©¶è¿‡ç¨‹å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è®°å½•ç»“æŸæ—¶é—´</span></span><br><span class="line">                <span class="variable language_">self</span>.session_data[<span class="string">&#x27;end_time&#x27;</span>] = datetime.now().isoformat()</span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">80</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… è§’è‰²æ‰®æ¼”ç ”ç©¶é˜¶æ®µå®Œæˆ&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;=&quot;</span>*<span class="number">80</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;\nğŸ¯ å¼€å§‹ç”Ÿæˆæœ€ç»ˆç ”ç©¶æŠ¥å‘Š...&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">70</span>)</span><br><span class="line">                </span><br><span class="line">                final_report = <span class="variable language_">self</span>.generate_final_research_report()</span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(Fore.MAGENTA + <span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">100</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.MAGENTA + <span class="string">&quot;ğŸ“Š æœ€ç»ˆç ”ç©¶æŠ¥å‘Šé¢„è§ˆ&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.MAGENTA + <span class="string">&quot;=&quot;</span>*<span class="number">100</span>)</span><br><span class="line">                <span class="built_in">print</span>(final_report[:<span class="number">1000</span>] + <span class="string">&quot;...&quot;</span> <span class="keyword">if</span> <span class="built_in">len</span>(final_report) &gt; <span class="number">1000</span> <span class="keyword">else</span> final_report)</span><br><span class="line">                <span class="built_in">print</span>(Fore.MAGENTA + <span class="string">&quot;=&quot;</span>*<span class="number">100</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># æ˜¾ç¤ºç”Ÿæˆçš„æ–‡ä»¶ç»Ÿè®¡</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;\nğŸ“ æœ¬æ¬¡ç ”ç©¶å…±ç”Ÿæˆ <span class="subst">&#123;<span class="built_in">len</span>(self.session_data[<span class="string">&#x27;generated_files&#x27;</span>])&#125;</span> ä¸ªæ–‡ä»¶:&quot;</span>)</span><br><span class="line">                <span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable language_">self</span>.session_data[<span class="string">&#x27;generated_files&#x27;</span>]:</span><br><span class="line">                    <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;   ğŸ“„ <span class="subst">&#123;file&#125;</span>&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è¯¢é—®æ˜¯å¦ç»§ç»­</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">70</span>)</span><br><span class="line">                continue_research = <span class="built_in">input</span>(Fore.CYAN + <span class="string">&quot;æ˜¯å¦ç»§ç»­æ–°çš„ç ”ç©¶? (y/n): &quot;</span>).strip().lower()</span><br><span class="line">                <span class="keyword">if</span> continue_research != <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;\nç”¨æˆ·ä¸­æ–­ç ”ç©¶&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;ç³»ç»Ÿé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;\nğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨å¢å¼ºç‰ˆé€šç”¨AIç ”ç©¶ç³»ç»Ÿï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸»å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;ğŸ¯ å¢å¼ºç‰ˆé€šç”¨AIç ”ç©¶ç³»ç»Ÿå¯åŠ¨ï¼ˆå«æœ€ç»ˆæŠ¥å‘Šï¼‰&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        enhanced_system = EnhancedInteractiveResearchSystem()</span><br><span class="line">        enhanced_system.run_enhanced_interactive_research()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;âŒ ç³»ç»Ÿå¯åŠ¨å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;ğŸ’¡ è¯·æ£€æŸ¥é…ç½®å’Œä¾èµ–é¡¹&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>



<p><strong>åˆ†æ”¯ä»£ç 2</strong>ï¼šã€RAG_WEB_TOPIC.pyã€‘</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span>, <span class="type">Dict</span>, <span class="type">Optional</span></span><br><span class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass</span><br><span class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</span><br><span class="line"><span class="keyword">import</span> agentops</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> Fore, init</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> camel.loaders <span class="keyword">import</span> Firecrawl, UnstructuredIO</span><br><span class="line"><span class="keyword">from</span> camel.retrievers <span class="keyword">import</span> AutoRetriever</span><br><span class="line"><span class="keyword">from</span> camel.toolkits <span class="keyword">import</span> FunctionTool, SearchToolkit</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType, StorageType</span><br><span class="line"><span class="keyword">from</span> camel.embeddings <span class="keyword">import</span> SentenceTransformerEncoder</span><br><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.societies <span class="keyword">import</span> RolePlaying</span><br><span class="line"><span class="keyword">from</span> camel.utils <span class="keyword">import</span> print_text_animated</span><br><span class="line"><span class="keyword">from</span> camel.storages <span class="keyword">import</span> Neo4jGraph</span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> KnowledgeGraphAgent</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½ç¯å¢ƒå˜é‡</span></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ– colorama</span></span><br><span class="line">init(autoreset=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@dataclass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResearchConfig</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç ”ç©¶ç³»ç»Ÿé…ç½®ç±»&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># APIé…ç½® - ç›´æ¥é…ç½®æ‰€æœ‰å¿…è¦å¯†é’¥</span></span><br><span class="line">    agentops_api_key: <span class="built_in">str</span> = <span class="string">&quot;3e6edf79-2c28-400f-8433-cf4fa764444d&quot;</span></span><br><span class="line">    firecrawl_api_key: <span class="built_in">str</span> = <span class="string">&quot;fc-58764a3cc0184450b220d2dd1ca687c2&quot;</span></span><br><span class="line">    modelscope_api_key: <span class="built_in">str</span> = <span class="string">&quot;64af0689-2660-4285-99ff-270e4c7416a3&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Neo4jé…ç½®</span></span><br><span class="line">    neo4j_url: <span class="built_in">str</span> = <span class="string">&quot;bolt://localhost:7687&quot;</span></span><br><span class="line">    neo4j_username: <span class="built_in">str</span> = <span class="string">&quot;neo4j&quot;</span></span><br><span class="line">    neo4j_password: <span class="built_in">str</span> = <span class="string">&quot;tyy20060315&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¨¡å‹é…ç½®</span></span><br><span class="line">    model_platform: <span class="built_in">str</span> = <span class="string">&quot;openai_compatible&quot;</span></span><br><span class="line">    model_name: <span class="built_in">str</span> = <span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span></span><br><span class="line">    model_url: <span class="built_in">str</span> = <span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å­˜å‚¨é…ç½®</span></span><br><span class="line">    vector_storage_path: <span class="built_in">str</span> = <span class="string">&quot;research_data&quot;</span></span><br><span class="line">    storage_type: <span class="built_in">str</span> = <span class="string">&quot;qdrant&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æœç´¢é…ç½®</span></span><br><span class="line">    max_search_results: <span class="built_in">int</span> = <span class="number">10</span></span><br><span class="line">    max_urls_to_process: <span class="built_in">int</span> = <span class="number">5</span></span><br><span class="line">    similarity_threshold: <span class="built_in">float</span> = <span class="number">0.3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConfigManager</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é…ç½®ç®¡ç†å™¨ - å®‰å…¨åœ°å¤„ç†æ•æ„Ÿä¿¡æ¯&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config_file: <span class="built_in">str</span> = <span class="string">&quot;config.json&quot;</span></span>):</span><br><span class="line">        <span class="variable language_">self</span>.config_file = Path(config_file)</span><br><span class="line">        <span class="variable language_">self</span>.config = ResearchConfig()</span><br><span class="line">        <span class="variable language_">self</span>._load_config()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_load_config</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä»é…ç½®æ–‡ä»¶å’Œç¯å¢ƒå˜é‡åŠ è½½é…ç½®&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># ç›´æ¥ä½¿ç”¨é…ç½®çš„APIå¯†é’¥ï¼Œå¦‚æœç¯å¢ƒå˜é‡å­˜åœ¨åˆ™ä¼˜å…ˆä½¿ç”¨ç¯å¢ƒå˜é‡</span></span><br><span class="line">        <span class="variable language_">self</span>.config.agentops_api_key = os.getenv(<span class="string">&quot;AGENTOPS_API_KEY&quot;</span>, <span class="variable language_">self</span>.config.agentops_api_key)</span><br><span class="line">        <span class="variable language_">self</span>.config.firecrawl_api_key = os.getenv(<span class="string">&quot;FIRECRAWL_API_KEY&quot;</span>, <span class="variable language_">self</span>.config.firecrawl_api_key)</span><br><span class="line">        <span class="variable language_">self</span>.config.modelscope_api_key = os.getenv(<span class="string">&quot;MODELSCOPE_SDK_TOKEN&quot;</span>, <span class="variable language_">self</span>.config.modelscope_api_key)</span><br><span class="line">        <span class="variable language_">self</span>.config.neo4j_password = os.getenv(<span class="string">&quot;NEO4J_PASSWORD&quot;</span>, <span class="variable language_">self</span>.config.neo4j_password)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¾ç½®ç¯å¢ƒå˜é‡ä»¥ä¾›å…¶ä»–ç»„ä»¶ä½¿ç”¨</span></span><br><span class="line">        os.environ[<span class="string">&quot;AGENTOPS_API_KEY&quot;</span>] = <span class="variable language_">self</span>.config.agentops_api_key</span><br><span class="line">        os.environ[<span class="string">&quot;FIRECRAWL_API_KEY&quot;</span>] = <span class="variable language_">self</span>.config.firecrawl_api_key</span><br><span class="line">        os.environ[<span class="string">&quot;MODELSCOPE_SDK_TOKEN&quot;</span>] = <span class="variable language_">self</span>.config.modelscope_api_key</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä»é…ç½®æ–‡ä»¶åŠ è½½éæ•æ„Ÿé…ç½®</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.config_file.exists():</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">with</span> <span class="built_in">open</span>(<span class="variable language_">self</span>.config_file, <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                    file_config = json.load(f)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># æ›´æ–°éæ•æ„Ÿé…ç½®</span></span><br><span class="line">                <span class="keyword">for</span> key, value <span class="keyword">in</span> file_config.items():</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">not</span> key.endswith(<span class="string">&#x27;_key&#x27;</span>) <span class="keyword">and</span> <span class="keyword">not</span> key.endswith(<span class="string">&#x27;_password&#x27;</span>):</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>.config, key):</span><br><span class="line">                            <span class="built_in">setattr</span>(<span class="variable language_">self</span>.config, key, value)</span><br><span class="line">                            </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                logging.warning(<span class="string">f&quot;é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_sample_config</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆ›å»ºç¤ºä¾‹é…ç½®æ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        sample_config = &#123;</span><br><span class="line">            <span class="string">&quot;neo4j_url&quot;</span>: <span class="string">&quot;bolt://localhost:7687&quot;</span>,</span><br><span class="line">            <span class="string">&quot;neo4j_username&quot;</span>: <span class="string">&quot;neo4j&quot;</span>,</span><br><span class="line">            <span class="string">&quot;model_name&quot;</span>: <span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">            <span class="string">&quot;model_url&quot;</span>: <span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">            <span class="string">&quot;vector_storage_path&quot;</span>: <span class="string">&quot;research_data&quot;</span>,</span><br><span class="line">            <span class="string">&quot;max_search_results&quot;</span>: <span class="number">10</span>,</span><br><span class="line">            <span class="string">&quot;max_urls_to_process&quot;</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="string">&quot;similarity_threshold&quot;</span>: <span class="number">0.3</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="variable language_">self</span>.config_file, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(sample_config, f, indent=<span class="number">2</span>, ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.YELLOW + <span class="string">f&quot;å·²åˆ›å»ºç¤ºä¾‹é…ç½®æ–‡ä»¶: <span class="subst">&#123;self.config_file&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">display_config_status</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ˜¾ç¤ºé…ç½®çŠ¶æ€&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;\nğŸ”§ ç³»ç»Ÿé…ç½®çŠ¶æ€:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># APIå¯†é’¥çŠ¶æ€</span></span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">&quot;ğŸ“‹ APIå¯†é’¥é…ç½®:&quot;</span>)</span><br><span class="line">        api_keys = [</span><br><span class="line">            (<span class="string">&quot;AgentOps&quot;</span>, <span class="variable language_">self</span>.config.agentops_api_key),</span><br><span class="line">            (<span class="string">&quot;Firecrawl&quot;</span>, <span class="variable language_">self</span>.config.firecrawl_api_key),</span><br><span class="line">            (<span class="string">&quot;ModelScope&quot;</span>, <span class="variable language_">self</span>.config.modelscope_api_key),</span><br><span class="line">        ]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> name, key <span class="keyword">in</span> api_keys:</span><br><span class="line">            <span class="keyword">if</span> key:</span><br><span class="line">                masked_key = key[:<span class="number">8</span>] + <span class="string">&quot;...&quot;</span> + key[-<span class="number">4</span>:] <span class="keyword">if</span> <span class="built_in">len</span>(key) &gt; <span class="number">12</span> <span class="keyword">else</span> <span class="string">&quot;***&quot;</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;  âœ… <span class="subst">&#123;name&#125;</span>: <span class="subst">&#123;masked_key&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;  âŒ <span class="subst">&#123;name&#125;</span>: æœªé…ç½®&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Neo4jé…ç½®çŠ¶æ€</span></span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">&quot;\nğŸ—„ï¸ Neo4jé…ç½®:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;  URL: <span class="subst">&#123;self.config.neo4j_url&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;  ç”¨æˆ·å: <span class="subst">&#123;self.config.neo4j_username&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.config.neo4j_password:</span><br><span class="line">            <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;  âœ… å¯†ç : <span class="subst">&#123;<span class="string">&#x27;*&#x27;</span> * <span class="built_in">len</span>(self.config.neo4j_password)&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;  âŒ å¯†ç : æœªé…ç½®&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">test_api_connections</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æµ‹è¯•APIè¿æ¥&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;\nğŸ”— æµ‹è¯•APIè¿æ¥:&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">40</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æµ‹è¯•Firecrawl API</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.config.firecrawl_api_key:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="keyword">from</span> camel.loaders <span class="keyword">import</span> Firecrawl</span><br><span class="line">                firecrawl = Firecrawl()</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… Firecrawl API: è¿æ¥æ­£å¸¸&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;âŒ Firecrawl API: <span class="subst">&#123;<span class="built_in">str</span>(e)[:<span class="number">50</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æµ‹è¯•ModelScope API</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.config.modelscope_api_key:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                model = ModelFactory.create(</span><br><span class="line">                    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">                    model_type=<span class="variable language_">self</span>.config.model_name,</span><br><span class="line">                    url=<span class="variable language_">self</span>.config.model_url,</span><br><span class="line">                    api_key=<span class="variable language_">self</span>.config.modelscope_api_key</span><br><span class="line">                )</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… ModelScope API: è¿æ¥æ­£å¸¸&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;âŒ ModelScope API: <span class="subst">&#123;<span class="built_in">str</span>(e)[:<span class="number">50</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SearchEngine</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç»Ÿä¸€çš„æœç´¢å¼•æ“ç±»&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config: ResearchConfig</span>):</span><br><span class="line">        <span class="variable language_">self</span>.config = config</span><br><span class="line">        <span class="variable language_">self</span>.search_toolkit = SearchToolkit()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">duckduckgo_lite_search</span>(<span class="params">self, query: <span class="built_in">str</span>, max_results: <span class="built_in">int</span> = <span class="literal">None</span></span>) -&gt; <span class="type">List</span>[<span class="type">Dict</span>]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä½¿ç”¨DuckDuckGo Lite APIè¿›è¡Œæœç´¢&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> max_results <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            max_results = <span class="variable language_">self</span>.config.max_search_results</span><br><span class="line">            </span><br><span class="line">        url = <span class="string">f&quot;https://lite.duckduckgo.com/lite/?q=<span class="subst">&#123;query.replace(<span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;+&#x27;</span>)&#125;</span>&quot;</span></span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            resp = requests.get(url, headers=headers, timeout=<span class="number">10</span>)</span><br><span class="line">            resp.raise_for_status()</span><br><span class="line">            soup = BeautifulSoup(resp.text, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            results = []</span><br><span class="line">            <span class="keyword">for</span> link <span class="keyword">in</span> soup.select(<span class="string">&quot;a[href*=&#x27;http&#x27;]&quot;</span>)[:max_results]:</span><br><span class="line">                href = link.get(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">                text = link.get_text(strip=<span class="literal">True</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> href <span class="keyword">and</span> text <span class="keyword">and</span> <span class="built_in">len</span>(text) &gt; <span class="number">10</span>:</span><br><span class="line">                    results.append(&#123;</span><br><span class="line">                        <span class="string">&quot;title&quot;</span>: text[:<span class="number">100</span>],</span><br><span class="line">                        <span class="string">&quot;url&quot;</span>: href,</span><br><span class="line">                        <span class="string">&quot;snippet&quot;</span>: text[:<span class="number">200</span>]</span><br><span class="line">                    &#125;)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> results</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            logging.error(<span class="string">f&quot;DuckDuckGo Liteæœç´¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search_web</span>(<span class="params">self, query: <span class="built_in">str</span>, topic: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;é€šç”¨ç½‘ç»œæœç´¢åŠŸèƒ½&quot;&quot;&quot;</span></span><br><span class="line">        search_query = <span class="string">f&quot;<span class="subst">&#123;query&#125;</span> <span class="subst">&#123;topic&#125;</span>&quot;</span>.strip()</span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;ğŸ” ç½‘ç»œæœç´¢: <span class="subst">&#123;search_query&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># é¦–å…ˆå°è¯•DuckDuckGo Liteæœç´¢</span></span><br><span class="line">            <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;ğŸ”„ ä½¿ç”¨ DuckDuckGo Lite æœç´¢...&quot;</span>)</span><br><span class="line">            search_results = <span class="variable language_">self</span>.duckduckgo_lite_search(search_query)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> search_results:</span><br><span class="line">                formatted_results = <span class="string">f&quot;ğŸ” æœç´¢æŸ¥è¯¢: <span class="subst">&#123;search_query&#125;</span>\n\n&quot;</span></span><br><span class="line">                formatted_results += <span class="string">&quot;ğŸŒ æœç´¢ç»“æœ:\n&quot;</span></span><br><span class="line">                formatted_results += <span class="string">&quot;=&quot;</span>*<span class="number">50</span> + <span class="string">&quot;\n&quot;</span></span><br><span class="line">                </span><br><span class="line">                urls_found = []</span><br><span class="line">                <span class="keyword">for</span> i, result <span class="keyword">in</span> <span class="built_in">enumerate</span>(search_results, <span class="number">1</span>):</span><br><span class="line">                    title = result.get(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;æ— æ ‡é¢˜&#x27;</span>)</span><br><span class="line">                    url = result.get(<span class="string">&#x27;url&#x27;</span>, <span class="string">&#x27;æ— é“¾æ¥&#x27;</span>)</span><br><span class="line">                    snippet = result.get(<span class="string">&#x27;snippet&#x27;</span>, <span class="string">&#x27;æ— æè¿°&#x27;</span>)</span><br><span class="line">                    </span><br><span class="line">                    formatted_results += <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. ğŸ“° <span class="subst">&#123;title&#125;</span>\n&quot;</span></span><br><span class="line">                    formatted_results += <span class="string">f&quot;   ğŸ“ <span class="subst">&#123;snippet&#125;</span>\n&quot;</span></span><br><span class="line">                    formatted_results += <span class="string">f&quot;   ğŸ”— <span class="subst">&#123;url&#125;</span>\n\n&quot;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span> url != <span class="string">&#x27;æ— é“¾æ¥&#x27;</span>:</span><br><span class="line">                        urls_found.append(url)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> urls_found:</span><br><span class="line">                    formatted_results += <span class="string">&quot;\nğŸ“ å‘ç°çš„ç›¸å…³URL:\n&quot;</span></span><br><span class="line">                    <span class="keyword">for</span> url <span class="keyword">in</span> urls_found[:<span class="variable language_">self</span>.config.max_urls_to_process]:</span><br><span class="line">                        formatted_results += <span class="string">f&quot;- <span class="subst">&#123;url&#125;</span>\n&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;âœ… æœç´¢å®Œæˆï¼Œæ‰¾åˆ° <span class="subst">&#123;<span class="built_in">len</span>(search_results)&#125;</span> ä¸ªç»“æœ&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span> formatted_results</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">raise</span> Exception(<span class="string">&quot;DuckDuckGo Lite æœªè¿”å›ç»“æœ&quot;</span>)</span><br><span class="line">                </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(Fore.YELLOW + <span class="string">f&quot;âš ï¸ ä¸»æœç´¢æ–¹æ³•å¤±è´¥: <span class="subst">&#123;<span class="built_in">str</span>(e)[:<span class="number">50</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å¤‡ç”¨æœç´¢æ–¹æ³•</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">&quot;ğŸ”„ å°è¯•å¤‡ç”¨æœç´¢æ–¹æ³•...&quot;</span>)</span><br><span class="line">                search_results = <span class="variable language_">self</span>.search_toolkit.search_duckduckgo(search_query)</span><br><span class="line">                </span><br><span class="line">                formatted_results = <span class="string">f&quot;ğŸ” æœç´¢æŸ¥è¯¢: <span class="subst">&#123;search_query&#125;</span>\n\n&quot;</span></span><br><span class="line">                formatted_results += <span class="string">&quot;ğŸŒ æœç´¢ç»“æœ (å¤‡ç”¨æ–¹æ³•):\n&quot;</span></span><br><span class="line">                formatted_results += <span class="string">&quot;=&quot;</span>*<span class="number">50</span> + <span class="string">&quot;\n&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">isinstance</span>(search_results, <span class="built_in">list</span>):</span><br><span class="line">                    <span class="keyword">for</span> i, result <span class="keyword">in</span> <span class="built_in">enumerate</span>(search_results[:<span class="variable language_">self</span>.config.max_search_results], <span class="number">1</span>):</span><br><span class="line">                        <span class="keyword">if</span> <span class="built_in">isinstance</span>(result, <span class="built_in">dict</span>):</span><br><span class="line">                            title = result.get(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;æ— æ ‡é¢˜&#x27;</span>)</span><br><span class="line">                            snippet = result.get(<span class="string">&#x27;snippet&#x27;</span>, <span class="string">&#x27;æ— æè¿°&#x27;</span>)</span><br><span class="line">                            link = result.get(<span class="string">&#x27;link&#x27;</span>, <span class="string">&#x27;æ— é“¾æ¥&#x27;</span>)</span><br><span class="line">                            formatted_results += <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;title&#125;</span>\n   <span class="subst">&#123;snippet&#125;</span>\n   é“¾æ¥: <span class="subst">&#123;link&#125;</span>\n\n&quot;</span></span><br><span class="line">                        <span class="keyword">else</span>:</span><br><span class="line">                            formatted_results += <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;<span class="built_in">str</span>(result)[:<span class="number">200</span>]&#125;</span>...\n\n&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">return</span> formatted_results</span><br><span class="line">                </span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> backup_e:</span><br><span class="line">                error_msg = <span class="string">f&quot;æ‰€æœ‰æœç´¢æ–¹æ³•éƒ½å¤±è´¥äº†: <span class="subst">&#123;<span class="built_in">str</span>(backup_e)[:<span class="number">100</span>]&#125;</span>...&quot;</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + error_msg)</span><br><span class="line">                <span class="keyword">return</span> <span class="string">f&quot;æœç´¢æŸ¥è¯¢: <span class="subst">&#123;search_query&#125;</span>\n\næœç´¢æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•ã€‚&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UniversalResearchSystem</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é€šç”¨ç ”ç©¶ç³»ç»Ÿ&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, config_manager: ConfigManager</span>):</span><br><span class="line">        <span class="variable language_">self</span>.config = config_manager.config</span><br><span class="line">        <span class="variable language_">self</span>._init_components()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_components</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–ç³»ç»Ÿç»„ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># åŸºç¡€ç»„ä»¶</span></span><br><span class="line">        <span class="variable language_">self</span>.firecrawl = Firecrawl()</span><br><span class="line">        <span class="variable language_">self</span>.auto_retriever = AutoRetriever(</span><br><span class="line">            vector_storage_local_path=<span class="variable language_">self</span>.config.vector_storage_path,</span><br><span class="line">            storage_type=StorageType.QDRANT,</span><br><span class="line">            embedding_model=SentenceTransformerEncoder(),</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.search_engine = SearchEngine(<span class="variable language_">self</span>.config)</span><br><span class="line">        <span class="variable language_">self</span>.uio = UnstructuredIO()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># çŸ¥è¯†å›¾è°±ç»„ä»¶</span></span><br><span class="line">        <span class="variable language_">self</span>.neo4j_graph = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.kg_agent = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>._init_knowledge_graph()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_knowledge_graph</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–çŸ¥è¯†å›¾è°±ç»„ä»¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.config.neo4j_password:</span><br><span class="line">            <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;âš ï¸ Neo4jå¯†ç æœªé…ç½®ï¼Œå°†ä½¿ç”¨æ–‡æœ¬æ ¼å¼çŸ¥è¯†å›¾è°±&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">print</span>(Fore.BLUE + <span class="string">&quot;ğŸ”— å°è¯•è¿æ¥Neo4jæ•°æ®åº“...&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">import</span> neo4j</span><br><span class="line">            driver = neo4j.GraphDatabase.driver(</span><br><span class="line">                <span class="variable language_">self</span>.config.neo4j_url,</span><br><span class="line">                auth=(<span class="variable language_">self</span>.config.neo4j_username, <span class="variable language_">self</span>.config.neo4j_password)</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># éªŒè¯è¿æ¥</span></span><br><span class="line">            <span class="keyword">with</span> driver.session() <span class="keyword">as</span> session:</span><br><span class="line">                result = session.run(<span class="string">&quot;RETURN 1 as test&quot;</span>)</span><br><span class="line">                test_value = result.single()[<span class="string">&quot;test&quot;</span>]</span><br><span class="line">                <span class="keyword">if</span> test_value == <span class="number">1</span>:</span><br><span class="line">                    <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… Neo4jè¿æ¥æµ‹è¯•æˆåŠŸ&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            driver.close()</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># åˆå§‹åŒ–CAMELçš„Neo4jç»„ä»¶</span></span><br><span class="line">            <span class="variable language_">self</span>.neo4j_graph = Neo4jGraph(</span><br><span class="line">                url=<span class="variable language_">self</span>.config.neo4j_url,</span><br><span class="line">                username=<span class="variable language_">self</span>.config.neo4j_username,</span><br><span class="line">                password=<span class="variable language_">self</span>.config.neo4j_password,</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># éœ€è¦æ¨¡å‹æ‰èƒ½åˆå§‹åŒ–KG Agent</span></span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(<span class="variable language_">self</span>, <span class="string">&#x27;model&#x27;</span>) <span class="keyword">and</span> <span class="variable language_">self</span>.model:</span><br><span class="line">                <span class="variable language_">self</span>.kg_agent = KnowledgeGraphAgent(model=<span class="variable language_">self</span>.model)</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… çŸ¥è¯†å›¾è°±ç»„ä»¶åˆå§‹åŒ–æˆåŠŸ&quot;</span>)</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> ImportError:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">&quot;âŒ neo4jé©±åŠ¨æœªå®‰è£…ï¼Œè¯·è¿è¡Œ: pip install neo4j&quot;</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;âŒ Neo4jè¿æ¥å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;ğŸ’¡ å°†ä½¿ç”¨æ–‡æœ¬æ ¼å¼çŸ¥è¯†å›¾è°±&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ResearchToolkit</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ç ”ç©¶å·¥å…·åŒ…&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, research_system: UniversalResearchSystem</span>):</span><br><span class="line">        <span class="variable language_">self</span>.system = research_system</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">retrieve_information_from_urls</span>(<span class="params">self, urls: <span class="type">List</span>[<span class="built_in">str</span>], query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä»URLåˆ—è¡¨ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯&quot;&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;å¼€å§‹æ£€ç´¢: <span class="subst">&#123;query&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;æ•°æ®æº: <span class="subst">&#123;<span class="built_in">len</span>(urls)&#125;</span> ä¸ªURL&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        aggregated_content = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é™åˆ¶å¤„ç†çš„URLæ•°é‡</span></span><br><span class="line">        urls_to_process = urls[:<span class="variable language_">self</span>.system.config.max_urls_to_process]</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> i, url <span class="keyword">in</span> <span class="built_in">enumerate</span>(urls_to_process, <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="built_in">print</span>(Fore.CYAN + <span class="string">f&quot;æŠ“å– <span class="subst">&#123;i&#125;</span>/<span class="subst">&#123;<span class="built_in">len</span>(urls_to_process)&#125;</span>: <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">                scraped_content = <span class="variable language_">self</span>.system.firecrawl.scrape(url)</span><br><span class="line">                aggregated_content += scraped_content[<span class="string">&quot;markdown&quot;</span>] + <span class="string">&quot;\n\n&quot;</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;æˆåŠŸæŠ“å– <span class="subst">&#123;<span class="built_in">len</span>(scraped_content[<span class="string">&#x27;markdown&#x27;</span>])&#125;</span> å­—ç¬¦&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;æŠ“å–å¤±è´¥: <span class="subst">&#123;<span class="built_in">str</span>(e)[:<span class="number">100</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> aggregated_content.strip():</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;æ‰€æœ‰ URL éƒ½æŠ“å–å¤±è´¥ï¼Œæ— æ³•ç»§ç»­å¤„ç†&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            retrieved_info = <span class="variable language_">self</span>.system.auto_retriever.run_vector_retriever(</span><br><span class="line">                query=query,</span><br><span class="line">                contents=aggregated_content,</span><br><span class="line">                top_k=<span class="number">5</span>,</span><br><span class="line">                similarity_threshold=<span class="variable language_">self</span>.system.config.similarity_threshold,</span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            result = <span class="string">f&quot;æ£€ç´¢æŸ¥è¯¢: <span class="subst">&#123;retrieved_info[<span class="string">&#x27;Original Query&#x27;</span>]&#125;</span>\n\n&quot;</span></span><br><span class="line">            result += <span class="string">&quot;ç›¸å…³ä¿¡æ¯:\n&quot;</span></span><br><span class="line">            <span class="keyword">for</span> i, context <span class="keyword">in</span> <span class="built_in">enumerate</span>(retrieved_info[<span class="string">&#x27;Retrieved Context&#x27;</span>], <span class="number">1</span>):</span><br><span class="line">                result += <span class="string">f&quot;<span class="subst">&#123;i&#125;</span>. <span class="subst">&#123;context[:<span class="number">300</span>]&#125;</span>...\n\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">f&quot;æ£€ç´¢å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search_web_for_topic</span>(<span class="params">self, query: <span class="built_in">str</span>, topic: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ ¹æ®ä¸»é¢˜æœç´¢ç½‘ç»œä¿¡æ¯&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.system.search_engine.search_web(query, topic)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">build_knowledge_graph</span>(<span class="params">self, text_input: <span class="built_in">str</span>, topic: <span class="built_in">str</span> = <span class="string">&quot;&quot;</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ„å»ºçŸ¥è¯†å›¾è°±&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.system.neo4j_graph <span class="keyword">or</span> <span class="keyword">not</span> <span class="variable language_">self</span>.system.kg_agent:</span><br><span class="line">            <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;Neo4jæœªé…ç½®ï¼Œåˆ›å»ºæ–‡æœ¬æ ¼å¼çŸ¥è¯†å›¾è°±...&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            kg_result = <span class="string">f&quot;çŸ¥è¯†å›¾è°±ï¼ˆæ–‡æœ¬æ ¼å¼ï¼‰ - ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span>\n&quot;</span></span><br><span class="line">            kg_result += <span class="string">&quot;=&quot;</span>*<span class="number">50</span> + <span class="string">&quot;\n\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment"># ç®€å•çš„å®ä½“æå–é€»è¾‘</span></span><br><span class="line">            lines = text_input.split(<span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">            entities = []</span><br><span class="line">            relationships = []</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">                <span class="keyword">if</span> <span class="built_in">len</span>(line.strip()) &gt; <span class="number">10</span>:  <span class="comment"># è¿‡æ»¤çŸ­è¡Œ</span></span><br><span class="line">                    words = line.split()</span><br><span class="line">                    <span class="keyword">if</span> <span class="built_in">len</span>(words) &gt; <span class="number">3</span>:  <span class="comment"># å¯»æ‰¾å¯èƒ½çš„å®ä½“</span></span><br><span class="line">                        <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">                            <span class="keyword">if</span> <span class="built_in">len</span>(word) &gt; <span class="number">4</span> <span class="keyword">and</span> word.isalpha():</span><br><span class="line">                                entities.append(word)</span><br><span class="line">            </span><br><span class="line">            <span class="comment"># å»é‡å¹¶é™åˆ¶æ•°é‡</span></span><br><span class="line">            entities = <span class="built_in">list</span>(<span class="built_in">set</span>(entities))[:<span class="number">10</span>]</span><br><span class="line">            </span><br><span class="line">            kg_result += <span class="string">&quot;ä¸»è¦å®ä½“:\n&quot;</span></span><br><span class="line">            <span class="keyword">for</span> entity <span class="keyword">in</span> entities:</span><br><span class="line">                kg_result += <span class="string">f&quot;- <span class="subst">&#123;entity&#125;</span>\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            kg_result += <span class="string">f&quot;\nå…³ç³»ç½‘ç»œ:\n&quot;</span></span><br><span class="line">            kg_result += <span class="string">f&quot;- ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span>\n&quot;</span></span><br><span class="line">            kg_result += <span class="string">f&quot;- ç›¸å…³å®ä½“æ•°é‡: <span class="subst">&#123;<span class="built_in">len</span>(entities)&#125;</span>\n&quot;</span></span><br><span class="line">            kg_result += <span class="string">f&quot;- æ–‡æœ¬é•¿åº¦: <span class="subst">&#123;<span class="built_in">len</span>(text_input)&#125;</span> å­—ç¬¦\n&quot;</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> kg_result</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;å¼€å§‹æ„å»ºçŸ¥è¯†å›¾è°± - ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            element_example = <span class="variable language_">self</span>.system.uio.create_element_from_text(</span><br><span class="line">                text=text_input,</span><br><span class="line">                element_id=<span class="string">f&quot;research_<span class="subst">&#123;topic&#125;</span>_<span class="subst">&#123;<span class="built_in">int</span>(time.time())&#125;</span>&quot;</span></span><br><span class="line">            )</span><br><span class="line">            </span><br><span class="line">            graph_elements = <span class="variable language_">self</span>.system.kg_agent.run(element_example, parse_graph_elements=<span class="literal">True</span>)</span><br><span class="line">            <span class="variable language_">self</span>.system.neo4j_graph.add_graph_elements(graph_elements=[graph_elements])</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;çŸ¥è¯†å›¾è°±æ„å»ºå®Œæˆ&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="string">f&quot;çŸ¥è¯†å›¾è°±æ„å»ºæˆåŠŸ - ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span>\næå–äº†å›¾å½¢å…ƒç´ : <span class="subst">&#123;<span class="built_in">str</span>(graph_elements)[:<span class="number">200</span>]&#125;</span>...&quot;</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            error_msg = <span class="string">f&quot;çŸ¥è¯†å›¾è°±æ„å»ºå¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span></span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + error_msg)</span><br><span class="line">            <span class="keyword">return</span> error_msg</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">InteractiveResearchSystem</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;äº¤äº’å¼ç ”ç©¶ç³»ç»Ÿ&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.config_manager = ConfigManager()</span><br><span class="line">        <span class="variable language_">self</span>.model = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.research_system = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.toolkit = <span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>._init_system()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_system</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–ç³»ç»Ÿ&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># æ˜¾ç¤ºé…ç½®çŠ¶æ€</span></span><br><span class="line">        <span class="variable language_">self</span>.config_manager.display_config_status()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æµ‹è¯•APIè¿æ¥</span></span><br><span class="line">        <span class="variable language_">self</span>.config_manager.test_api_connections()</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ£€æŸ¥é…ç½®</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>._check_config():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–æ¨¡å‹</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>._init_model():</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–ç ”ç©¶ç³»ç»Ÿ</span></span><br><span class="line">        <span class="variable language_">self</span>.research_system = UniversalResearchSystem(<span class="variable language_">self</span>.config_manager)</span><br><span class="line">        <span class="variable language_">self</span>.research_system.model = <span class="variable language_">self</span>.model  <span class="comment"># ä¸ºçŸ¥è¯†å›¾è°±ç»„ä»¶æä¾›æ¨¡å‹</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é‡æ–°åˆå§‹åŒ–çŸ¥è¯†å›¾è°±ï¼ˆç°åœ¨æœ‰æ¨¡å‹äº†ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.research_system.neo4j_graph <span class="keyword">and</span> <span class="keyword">not</span> <span class="variable language_">self</span>.research_system.kg_agent:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="variable language_">self</span>.research_system.kg_agent = KnowledgeGraphAgent(model=<span class="variable language_">self</span>.model)</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… çŸ¥è¯†å›¾è°±ä»£ç†åˆå§‹åŒ–æˆåŠŸ&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">f&quot;çŸ¥è¯†å›¾è°±ä»£ç†åˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="variable language_">self</span>.toolkit = ResearchToolkit(<span class="variable language_">self</span>.research_system)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆå§‹åŒ–AgentOps</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.config_manager.config.agentops_api_key:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                agentops.init(</span><br><span class="line">                    api_key=<span class="variable language_">self</span>.config_manager.config.agentops_api_key,</span><br><span class="line">                    default_tags=[<span class="string">&quot;Universal Research&quot;</span>, <span class="string">&quot;Interactive&quot;</span>]</span><br><span class="line">                )</span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… AgentOpsåˆå§‹åŒ–æˆåŠŸ&quot;</span>)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">f&quot;AgentOpsåˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_check_config</span>(<span class="params">self</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;æ£€æŸ¥é…ç½®å®Œæ•´æ€§&quot;&quot;&quot;</span></span><br><span class="line">        missing_configs = []</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.config_manager.config.modelscope_api_key:</span><br><span class="line">            missing_configs.append(<span class="string">&quot;MODELSCOPE_SDK_TOKEN&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> missing_configs:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">&quot;âŒ ç¼ºå°‘å¿…è¦çš„ç¯å¢ƒå˜é‡é…ç½®:&quot;</span>)</span><br><span class="line">            <span class="keyword">for</span> config <span class="keyword">in</span> missing_configs:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;   <span class="subst">&#123;config&#125;</span>&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.config_manager.config_file.exists():</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">&quot;\nğŸ“ åˆ›å»ºç¤ºä¾‹é…ç½®æ–‡ä»¶...&quot;</span>)</span><br><span class="line">                <span class="variable language_">self</span>.config_manager.create_sample_config()</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_init_model</span>(<span class="params">self</span>) -&gt; <span class="built_in">bool</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆå§‹åŒ–æ¨¡å‹&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="variable language_">self</span>.model = ModelFactory.create(</span><br><span class="line">                model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">                model_type=<span class="variable language_">self</span>.config_manager.config.model_name,</span><br><span class="line">                url=<span class="variable language_">self</span>.config_manager.config.model_url,</span><br><span class="line">                api_key=<span class="variable language_">self</span>.config_manager.config.modelscope_api_key</span><br><span class="line">            )</span><br><span class="line">            <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;âœ… æ¨¡å‹åˆå§‹åŒ–æˆåŠŸ: <span class="subst">&#123;self.config_manager.config.model_name&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;âŒ æ¨¡å‹åˆå§‹åŒ–å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_research_tools</span>(<span class="params">self, topic: <span class="built_in">str</span></span>) -&gt; <span class="type">List</span>[FunctionTool]:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;ä¸ºç‰¹å®šä¸»é¢˜åˆ›å»ºç ”ç©¶å·¥å…·&quot;&quot;&quot;</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">retrieve_urls_for_topic</span>(<span class="params">urls: <span class="type">List</span>[<span class="built_in">str</span>], query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.toolkit.retrieve_information_from_urls(urls, query)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">search_topic_info</span>(<span class="params">query: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.toolkit.search_web_for_topic(query, topic)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">build_topic_knowledge_graph</span>(<span class="params">text_input: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">self</span>.toolkit.build_knowledge_graph(text_input, topic)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            FunctionTool(retrieve_urls_for_topic),</span><br><span class="line">            FunctionTool(search_topic_info),</span><br><span class="line">            FunctionTool(build_topic_knowledge_graph),</span><br><span class="line">        ]</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_research_task</span>(<span class="params">self, topic: <span class="built_in">str</span>, research_question: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="string">&quot;&quot;&quot;åˆ›å»ºç ”ç©¶ä»»åŠ¡æç¤º&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å¯¹&quot;<span class="subst">&#123;topic&#125;</span>&quot;è¿›è¡Œå…¨é¢ç ”ç©¶ï¼Œä¸“é—¨å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š&quot;<span class="subst">&#123;research_question&#125;</span>&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œç³»ç»Ÿæ€§ç ”ç©¶ï¼š</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. **ä¿¡æ¯æœç´¢é˜¶æ®µ**</span></span><br><span class="line"><span class="string">   - ä½¿ç”¨æœç´¢å·¥å…·è·å–ä¸&quot;<span class="subst">&#123;topic&#125;</span>&quot;å’Œ&quot;<span class="subst">&#123;research_question&#125;</span>&quot;ç›¸å…³çš„URLå’ŒåŸºç¡€ä¿¡æ¯</span></span><br><span class="line"><span class="string">   - è¯†åˆ«æœ€ç›¸å…³å’Œæƒå¨çš„ä¿¡æ¯æº</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2. **æ·±åº¦æ£€ç´¢é˜¶æ®µ**</span></span><br><span class="line"><span class="string">   - ä½¿ç”¨æ£€ç´¢å·¥å…·ä»æ‰¾åˆ°çš„URLä¸­è·å–è¯¦ç»†å†…å®¹</span></span><br><span class="line"><span class="string">   - é‡ç‚¹å…³æ³¨èƒ½å¤Ÿå›ç­”ç ”ç©¶é—®é¢˜çš„ä¿¡æ¯</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. **åˆ†ææ•´ç†é˜¶æ®µ**</span></span><br><span class="line"><span class="string">   - ç³»ç»Ÿåˆ†ææ‰€æœ‰æ”¶é›†åˆ°çš„ä¿¡æ¯</span></span><br><span class="line"><span class="string">   - è¯†åˆ«å…³é”®äº‹å®ã€æ•°æ®å’Œè§‚ç‚¹</span></span><br><span class="line"><span class="string">   - è¯„ä¼°ä¿¡æ¯çš„å¯é æ€§å’Œç›¸å…³æ€§</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4. **æŠ¥å‘Šæ’°å†™é˜¶æ®µ**</span></span><br><span class="line"><span class="string">   - æ’°å†™ä¸€ä»½å…¨é¢çš„ç ”ç©¶æŠ¥å‘Š</span></span><br><span class="line"><span class="string">   - ç¡®ä¿æŠ¥å‘Šç›´æ¥å›ç­”äº†ç ”ç©¶é—®é¢˜</span></span><br><span class="line"><span class="string">   - æä¾›å…·ä½“çš„äº‹å®æ”¯æ’‘å’Œæ•°æ®å¼•ç”¨</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5. **çŸ¥è¯†å›¾è°±æ„å»ºé˜¶æ®µ**</span></span><br><span class="line"><span class="string">   - ä½¿ç”¨çŸ¥è¯†å›¾è°±å·¥å…·ä¸ºæŠ¥å‘Šå†…å®¹æ„å»ºç»“æ„åŒ–çš„çŸ¥è¯†å›¾è°±</span></span><br><span class="line"><span class="string">   - å±•ç¤ºå…³é”®æ¦‚å¿µä¹‹é—´çš„å…³ç³»</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ç ”ç©¶é‡ç‚¹ï¼š</span></span><br><span class="line"><span class="string">- ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span></span></span><br><span class="line"><span class="string">- æ ¸å¿ƒé—®é¢˜: <span class="subst">&#123;research_question&#125;</span></span></span><br><span class="line"><span class="string">- ç¡®ä¿ä¿¡æ¯çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§</span></span><br><span class="line"><span class="string">- æä¾›å¤šè§’åº¦çš„åˆ†æè§†è§’</span></span><br><span class="line"><span class="string">- åŒ…å«å…·ä½“çš„æ¡ˆä¾‹å’Œæ•°æ®æ”¯æ’‘</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">è¯·ç³»ç»Ÿæ€§åœ°å®Œæˆä¸Šè¿°ç ”ç©¶ä»»åŠ¡ï¼Œæä¾›é«˜è´¨é‡çš„ç ”ç©¶æˆæœã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run_interactive_research</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;è¿è¡Œäº¤äº’å¼ç ”ç©¶&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.model <span class="keyword">or</span> <span class="keyword">not</span> <span class="variable language_">self</span>.research_system:</span><br><span class="line">            <span class="built_in">print</span>(Fore.RED + <span class="string">&quot;âŒ ç³»ç»Ÿæœªæ­£ç¡®åˆå§‹åŒ–ï¼Œæ— æ³•è¿è¡Œ&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;ğŸš€ é€šç”¨AIç ”ç©¶ç³»ç»Ÿ&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                <span class="comment"># è·å–ç”¨æˆ·è¾“å…¥</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;\nè¯·è¾“å…¥ç ”ç©¶ä¿¡æ¯:&quot;</span>)</span><br><span class="line">                topic = <span class="built_in">input</span>(Fore.CYAN + <span class="string">&quot;ç ”ç©¶ä¸»é¢˜: &quot;</span>).strip()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> topic:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                research_question = <span class="built_in">input</span>(Fore.CYAN + <span class="string">&quot;å…·ä½“é—®é¢˜: &quot;</span>).strip()</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> research_question:</span><br><span class="line">                    research_question = <span class="string">f&quot;å…³äº<span class="subst">&#123;topic&#125;</span>çš„ç»¼åˆä¿¡æ¯&quot;</span></span><br><span class="line">                </span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;\nğŸ“‹ å¼€å§‹ç ”ç©¶:&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;   ä¸»é¢˜: <span class="subst">&#123;topic&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;   é—®é¢˜: <span class="subst">&#123;research_question&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># åˆ›å»ºç ”ç©¶å·¥å…·å’Œä»»åŠ¡</span></span><br><span class="line">                tools = <span class="variable language_">self</span>.create_research_tools(topic)</span><br><span class="line">                task_prompt = <span class="variable language_">self</span>.create_research_task(topic, research_question)</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># åˆ›å»ºè§’è‰²æ‰®æ¼”ç³»ç»Ÿ</span></span><br><span class="line">                role_play_session = RolePlaying(</span><br><span class="line">                    assistant_role_name=<span class="string">&quot;AIç ”ç©¶åŠ©ç†&quot;</span>,</span><br><span class="line">                    user_role_name=<span class="string">&quot;ç ”ç©¶ç”¨æˆ·&quot;</span>,</span><br><span class="line">                    assistant_agent_kwargs=<span class="built_in">dict</span>(</span><br><span class="line">                        model=<span class="variable language_">self</span>.model,</span><br><span class="line">                        tools=tools,</span><br><span class="line">                    ),</span><br><span class="line">                    user_agent_kwargs=<span class="built_in">dict</span>(model=<span class="variable language_">self</span>.model),</span><br><span class="line">                    task_prompt=task_prompt,</span><br><span class="line">                    with_task_specify=<span class="literal">False</span>,</span><br><span class="line">                )</span><br><span class="line">                </span><br><span class="line">                <span class="comment"># æ‰§è¡Œç ”ç©¶</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.GREEN + <span class="string">f&quot;ğŸ¤– AIåŠ©ç†: <span class="subst">&#123;role_play_session.assistant_sys_msg.content[:<span class="number">100</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;ğŸ‘¤ ç”¨æˆ·: <span class="subst">&#123;role_play_session.user_sys_msg.content[:<span class="number">100</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                </span><br><span class="line">                input_msg = role_play_session.init_chat()</span><br><span class="line">                chat_turn_limit = <span class="number">8</span></span><br><span class="line">                </span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(chat_turn_limit):</span><br><span class="line">                    <span class="built_in">print</span>(Fore.MAGENTA + <span class="string">f&quot;\n--- ç ”ç©¶è½®æ¬¡ <span class="subst">&#123;i+<span class="number">1</span>&#125;</span> ---&quot;</span>)</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">try</span>:</span><br><span class="line">                        assistant_response, user_response = role_play_session.step(input_msg)</span><br><span class="line">                        </span><br><span class="line">                        <span class="keyword">if</span> assistant_response.terminated <span class="keyword">or</span> user_response.terminated:</span><br><span class="line">                            <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;âœ… ç ”ç©¶ä»»åŠ¡å®Œæˆ&quot;</span>)</span><br><span class="line">                            <span class="keyword">break</span></span><br><span class="line">                        </span><br><span class="line">                        <span class="comment"># æ˜¾ç¤ºè¿›åº¦</span></span><br><span class="line">                        <span class="built_in">print</span>(Fore.CYAN + <span class="string">f&quot;ğŸ”„ åŠ©ç†: <span class="subst">&#123;assistant_response.msg.content[:<span class="number">200</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                        <span class="built_in">print</span>(Fore.BLUE + <span class="string">f&quot;ğŸ”„ ç”¨æˆ·: <span class="subst">&#123;user_response.msg.content[:<span class="number">200</span>]&#125;</span>...&quot;</span>)</span><br><span class="line">                        </span><br><span class="line">                        input_msg = assistant_response.msg</span><br><span class="line">                        time.sleep(<span class="number">1</span>)  <span class="comment"># é¿å…è¯·æ±‚è¿‡å¿«</span></span><br><span class="line">                        </span><br><span class="line">                    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                        <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;ç ”ç©¶è¿‡ç¨‹å‡ºé”™: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                        <span class="keyword">break</span></span><br><span class="line">                </span><br><span class="line">                <span class="comment"># è¯¢é—®æ˜¯å¦ç»§ç»­</span></span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;\n&quot;</span> + <span class="string">&quot;=&quot;</span>*<span class="number">60</span>)</span><br><span class="line">                continue_research = <span class="built_in">input</span>(Fore.CYAN + <span class="string">&quot;æ˜¯å¦ç»§ç»­æ–°çš„ç ”ç©¶? (y/n): &quot;</span>).strip().lower()</span><br><span class="line">                <span class="keyword">if</span> continue_research != <span class="string">&#x27;y&#x27;</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                    </span><br><span class="line">            <span class="keyword">except</span> KeyboardInterrupt:</span><br><span class="line">                <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;\nç”¨æˆ·ä¸­æ–­ç ”ç©¶&quot;</span>)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;ç³»ç»Ÿé”™è¯¯: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(Fore.GREEN + <span class="string">&quot;\nğŸ‘‹ æ„Ÿè°¢ä½¿ç”¨é€šç”¨AIç ”ç©¶ç³»ç»Ÿï¼&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸»å‡½æ•°&quot;&quot;&quot;</span></span><br><span class="line">    <span class="built_in">print</span>(Fore.CYAN + <span class="string">&quot;ğŸ¯ é€šç”¨AIç ”ç©¶ç³»ç»Ÿå¯åŠ¨&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;=&quot;</span>*<span class="number">50</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        research_system = InteractiveResearchSystem()</span><br><span class="line">        research_system.run_interactive_research()</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(Fore.RED + <span class="string">f&quot;âŒ ç³»ç»Ÿå¯åŠ¨å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(Fore.YELLOW + <span class="string">&quot;ğŸ’¡ è¯·æ£€æŸ¥é…ç½®å’Œä¾èµ–é¡¹&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h5 id="æˆ‘ä»¬è¿è¡Œä¸€ä¸‹æ•´ä¸ªç³»ç»Ÿï¼Œåˆ†åˆ«æµ‹è¯•ä¸€ä¸‹å„ä¸ªæ£€ç´¢åŠŸèƒ½çš„å·®å¼‚ï¼š"><a href="#æˆ‘ä»¬è¿è¡Œä¸€ä¸‹æ•´ä¸ªç³»ç»Ÿï¼Œåˆ†åˆ«æµ‹è¯•ä¸€ä¸‹å„ä¸ªæ£€ç´¢åŠŸèƒ½çš„å·®å¼‚ï¼š" class="headerlink" title="æˆ‘ä»¬è¿è¡Œä¸€ä¸‹æ•´ä¸ªç³»ç»Ÿï¼Œåˆ†åˆ«æµ‹è¯•ä¸€ä¸‹å„ä¸ªæ£€ç´¢åŠŸèƒ½çš„å·®å¼‚ï¼š"></a>æˆ‘ä»¬è¿è¡Œä¸€ä¸‹æ•´ä¸ªç³»ç»Ÿï¼Œåˆ†åˆ«æµ‹è¯•ä¸€ä¸‹å„ä¸ªæ£€ç´¢åŠŸèƒ½çš„å·®å¼‚ï¼š</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">PS G:\Python-Camel-project&gt; &amp; D:/Download/Python/py-3.11.9/python.exe g:/Python-Camel-project/Multimodal_RAG/Interactive_Multimodal_RAG.py</span><br><span class="line">W0725 14:45:52.142000 34656 site-packages\torch\distributed\elastic\multiprocessing\redirects.py:29] NOTE: Redirects are currently not supported in Windows or MacOs.   </span><br><span class="line">Web research system available</span><br><span class="line">åˆå§‹åŒ–äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ...</span><br><span class="line">Initializing Simple RAG System with CAMEL...</span><br><span class="line">CAMEL LLM initialized: Qwen/Qwen2.5-72B-Instruct</span><br><span class="line">API key: 64af0689-2...16a3</span><br><span class="line">âˆš Embedding model loaded: intfloat/e5-large-v2</span><br><span class="line">âˆš Simple vector retriever initialized</span><br><span class="line">âˆš Simple RAG System initialized successfully!</span><br><span class="line">âˆš é›†æˆCAMELçš„RAGç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ</span><br><span class="line"></span><br><span class="line">ğŸ”§ ç³»ç»Ÿé…ç½®çŠ¶æ€:</span><br><span class="line">==================================================</span><br><span class="line">ğŸ“‹ APIå¯†é’¥é…ç½®:</span><br><span class="line">  âœ… AgentOps: 3e6edf79...444d</span><br><span class="line">  âœ… Firecrawl: fc-58764...87c2</span><br><span class="line">  âœ… ModelScope: 64af0689...16a3</span><br><span class="line"></span><br><span class="line">ğŸ—„ï¸ Neo4jé…ç½®:</span><br><span class="line">  URL: bolt://localhost:7687</span><br><span class="line">  ç”¨æˆ·å: neo4j</span><br><span class="line">  âœ… å¯†ç : ***********</span><br><span class="line">==================================================</span><br><span class="line"></span><br><span class="line">ğŸ”— æµ‹è¯•APIè¿æ¥:</span><br><span class="line">========================================</span><br><span class="line">âœ… Firecrawl API: è¿æ¥æ­£å¸¸</span><br><span class="line">âœ… ModelScope API: è¿æ¥æ­£å¸¸</span><br><span class="line">========================================</span><br><span class="line">âœ… æ¨¡å‹åˆå§‹åŒ–æˆåŠŸ: Qwen/Qwen2.5-72B-Instruct</span><br><span class="line">D:\Download\Python\py-3.11.9\Lib\site-packages\camel\toolkits\function_tool.py:533: UserWarning: Parameter description is missing for the function &#x27;search_linkup&#x27;. The parameter definition is &#123;&#x27;enum&#x27;: [&#x27;searchResults&#x27;, &#x27;sourcedAnswer&#x27;, &#x27;structured&#x27;], &#x27;type&#x27;: [&#x27;string&#x27;, &#x27;null&#x27;]&#125;. This may affect the quality of tool calling.</span><br><span class="line">  warnings.warn(</span><br><span class="line">D:\Download\Python\py-3.11.9\Lib\site-packages\camel\toolkits\function_tool.py:533: UserWarning: Parameter description is missing for the function &#x27;search_alibaba_tongxiao&#x27;. The parameter definition is &#123;&#x27;enum&#x27;: [&#x27;OneDay&#x27;, &#x27;OneWeek&#x27;, &#x27;OneMonth&#x27;, &#x27;OneYear&#x27;, &#x27;NoLimit&#x27;], &#x27;type&#x27;: [&#x27;string&#x27;, &#x27;null&#x27;]&#125;. This may affect the quality of tool calling.</span><br><span class="line">  warnings.warn(</span><br><span class="line">D:\Download\Python\py-3.11.9\Lib\site-packages\camel\toolkits\function_tool.py:533: UserWarning: Parameter description is missing for the function &#x27;search_alibaba_tongxiao&#x27;. The parameter definition is &#123;&#x27;anyOf&#x27;: [&#123;&#x27;enum&#x27;: [&#x27;finance&#x27;, &#x27;law&#x27;, &#x27;medical&#x27;, &#x27;internet&#x27;, &#x27;tax&#x27;, &#x27;news_province&#x27;, &#x27;news_center&#x27;], &#x27;type&#x27;: &#x27;string&#x27;&#125;, &#123;&#x27;type&#x27;: &#x27;null&#x27;&#125;], &#x27;type&#x27;: [&#x27;null&#x27;]&#125;. This may affect the quality of tool calling.</span><br><span class="line">  warnings.warn(</span><br><span class="line">ğŸ”— å°è¯•è¿æ¥Neo4jæ•°æ®åº“...</span><br><span class="line">âœ… Neo4jè¿æ¥æµ‹è¯•æˆåŠŸ</span><br><span class="line">âœ… çŸ¥è¯†å›¾è°±ä»£ç†åˆå§‹åŒ–æˆåŠŸ</span><br><span class="line">ğŸ–‡ AgentOps:  WARNING: agentops is out of date. Please update with the command: &#x27;pip install --upgrade agentops&#x27;</span><br><span class="line">ğŸ–‡ AgentOps: Session Replay: https://app.agentops.ai/drilldown?session_id=1daa3df4-89ba-4a7a-a1f9-991c342edb8b</span><br><span class="line">âœ… AgentOpsåˆå§‹åŒ–æˆåŠŸ</span><br><span class="line">âˆš ç½‘é¡µç ”ç©¶ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ</span><br><span class="line"></span><br><span class="line">äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ</span><br><span class="line">============================================================</span><br><span class="line">åŠŸèƒ½ç‰¹æ€§:</span><br><span class="line">- æ”¯æŒåœ¨çº¿/æœ¬åœ°PDFåŠ è½½</span><br><span class="line">- ä¸‰ç§æ£€ç´¢æ¨¡å¼</span><br><span class="line">- ç½‘é¡µçˆ¬å–é›†æˆ</span><br><span class="line">- å¤šæ¨¡æ€å†…å®¹å¤„ç†</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">PDFçŸ¥è¯†åº“è®¾ç½®</span><br><span class="line">==================================================</span><br><span class="line">1. åœ¨çº¿PDF (è¾“å…¥URL)</span><br><span class="line">2. æœ¬åœ°PDF (è¾“å…¥æ–‡ä»¶è·¯å¾„)</span><br><span class="line">3. ä½¿ç”¨é»˜è®¤ç¤ºä¾‹PDF</span><br><span class="line"></span><br><span class="line">è¯·é€‰æ‹©PDFæ¥æº (1-3): 2</span><br><span class="line">è¯·è¾“å…¥PDFæ–‡ä»¶è·¯å¾„: G:\Program for work\Other\CamelAgent.pdf  </span><br><span class="line">çŠ¶æ€æŸ¥è¯¢ï¼š æ­£åœ¨åŠ è½½æœ¬åœ°PDF: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">Loading PDF from: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">âˆš PDF loaded successfully</span><br><span class="line">Computing embeddings for 1839 documents...</span><br><span class="line">Added 1839 documents to retriever</span><br><span class="line">âˆš Knowledge base setup complete: 1839 elements</span><br><span class="line"> Content: 1839 text, 0 images, 0 tables</span><br><span class="line">âˆš PDFçŸ¥è¯†åº“åŠ è½½æˆåŠŸï¼</span><br><span class="line"></span><br><span class="line">å½“å‰çŸ¥è¯†åº“: æœ¬åœ°PDF: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">ğŸ”§ å¯ç”¨æ£€ç´¢æ–¹æ³•: Vector, Enhanced</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">æŸ¥è¯¢é€‰é¡¹</span><br><span class="line">============================================================</span><br></pre></td></tr></table></figure>
<h5 id="æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼Œæœ¬åœ°PDFæ–‡ä»¶ä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œç°åœ¨æˆ‘ä»¬å…ˆè¿›è¡Œå¿«é€Ÿæ£€ç´¢çš„æ¼”ç¤º"><a href="#æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼Œæœ¬åœ°PDFæ–‡ä»¶ä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œç°åœ¨æˆ‘ä»¬å…ˆè¿›è¡Œå¿«é€Ÿæ£€ç´¢çš„æ¼”ç¤º" class="headerlink" title="æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼Œæœ¬åœ°PDFæ–‡ä»¶ä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œç°åœ¨æˆ‘ä»¬å…ˆè¿›è¡Œå¿«é€Ÿæ£€ç´¢çš„æ¼”ç¤º:"></a>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼Œæœ¬åœ°PDFæ–‡ä»¶ä¹ŸæˆåŠŸåŠ è½½äº†ï¼Œç°åœ¨æˆ‘ä»¬å…ˆè¿›è¡Œå¿«é€Ÿæ£€ç´¢çš„æ¼”ç¤º:</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (è¾“å…¥ &#x27;quit&#x27; é€€å‡º, &#x27;reload&#x27; é‡æ–°åŠ è½½PDF): camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line"></span><br><span class="line">é€‰æ‹©æ£€ç´¢æ¨¡å¼:</span><br><span class="line">1. å¿«é€Ÿæ£€ç´¢ (åŸºç¡€å‘é‡æ£€ç´¢)</span><br><span class="line">2. æ·±åº¦æ£€ç´¢ (é‡å†™+HyDE+RRF)</span><br><span class="line">3. ä¸»é¢˜æ£€ç´¢ (PDF+ç½‘é¡µçˆ¬å–)</span><br><span class="line">è¯·é€‰æ‹©æ¨¡å¼ (1-3): 1</span><br><span class="line"></span><br><span class="line">æ‰§è¡ŒæŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">æ£€ç´¢æ¨¡å¼: å¿«é€Ÿæ£€ç´¢</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œå¿«é€Ÿæ£€ç´¢...</span><br><span class="line">========================================</span><br><span class="line">æ­£åœ¨è¿›è¡Œå‘é‡æ£€ç´¢...</span><br><span class="line">Retrieved 3 documents</span><br><span class="line">âˆš æ£€ç´¢åˆ° 3 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">æ–‡æ¡£ 1 (ç›¸ä¼¼åº¦: 0.910):</span><br><span class="line">   ç»“è¯­ æ­å–œæ‚¨ï¼åœ¨é˜…è¯»åˆ°è¿™é‡Œæ—¶ï¼Œæ‚¨å·²ç»æŒæ¡äº† CAMEL-AI åº”ç”¨å¼€å‘æ¡†æ¶çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶èƒ½å¤Ÿåˆ© ç”¨ Agent å®ä¾‹åœ¨æ‚¨çš„ä»£ç é€»è¾‘ä¸­æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å°è¯•å°† Agent å®ä¾‹æ•´åˆ åˆ°æ›´å¤æ‚çš„å·¥ä½œæµä¸­ï¼Œæˆ–å®ç° Agent å®ä¾‹ä¹‹é—´çš„ååŒå·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 2 (ç›¸ä¼¼åº¦: 0.910):</span><br><span class="line">   ä¸ºä»€ä¹ˆé€‰æ‹© CAMEL Multi-Agentï¼Ÿ é€‰æ‹© CAMEL Multi-Agent æ¡†æ¶ï¼Œä½ å°†è·å¾—ä»¥ä¸‹ä¼˜åŠ¿ï¼š   </span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 3 (ç›¸ä¼¼åº¦: 0.902):</span><br><span class="line">   Model æ˜¯ Agent çš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºæ•°æ®ã€‚é€šè¿‡æœ‰æ•ˆè°ƒç”¨ä¸åŒçš„æ¨¡å‹ï¼Œæ™ºèƒ½  ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œæ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«å’Œå¤æ‚æ¨ç†ç­‰æ“ä½œã€‚CAMEL æä¾›äº†ä¸€ç³»åˆ—æ ‡      </span><br><span class="line"></span><br><span class="line">æ­£åœ¨ç”Ÿæˆç­”æ¡ˆ...</span><br><span class="line">Generating response with CAMEL model...</span><br><span class="line">CAMEL generation failed, using fallback: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">APIè°ƒç”¨ 1/3...</span><br><span class="line">âˆš APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âˆš å¿«é€Ÿæ£€ç´¢å®Œæˆ</span><br><span class="line"></span><br><span class="line">==================== å¿«é€Ÿæ£€ç´¢ç»“æœ ====================</span><br><span class="line">åŸç»“å§‹æŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">æ£€ç´¢æ–¹æ³•: Quick Vector Retrieval</span><br><span class="line"></span><br><span class="line">æ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±3ä¸ª):</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 1:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.9104779362678528</span><br><span class="line">å†…å®¹é¢„è§ˆ: ç»“è¯­ æ­å–œæ‚¨ï¼åœ¨é˜…è¯»åˆ°è¿™é‡Œæ—¶ï¼Œæ‚¨å·²ç»æŒæ¡äº† CAMEL-AI åº”ç”¨å¼€å‘æ¡†æ¶çš„åŸºç¡€çŸ¥è¯† ï¼Œå¹¶èƒ½å¤Ÿåˆ© ç”¨ Agent å®ä¾‹åœ¨æ‚¨çš„ä»£ç é€»è¾‘ä¸­æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å°è¯•å°† Agent  å®ä¾‹æ•´åˆ åˆ°æ›´å¤æ‚çš„å·¥ä½œæµä¸­ï¼Œæˆ–å®ç° Agent å®ä¾‹ä¹‹é—´çš„ååŒå·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 2:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.9104548692703247</span><br><span class="line">å†…å®¹é¢„è§ˆ: ä¸ºä»€ä¹ˆé€‰æ‹© CAMEL Multi-Agentï¼Ÿ é€‰æ‹© CAMEL Multi-Agent æ¡†æ¶ï¼Œä½ å°†è·å¾—ä»¥ä¸‹ä¼˜åŠ¿ï¼š</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 3:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.9016962051391602</span><br><span class="line">å†…å®¹é¢„è§ˆ: Model æ˜¯ Agent çš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºæ•°æ®ã€‚é€šè¿‡æœ‰æ•ˆè°ƒç”¨ä¸åŒçš„æ¨¡å‹ ï¼Œæ™ºèƒ½ ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œæ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«å’Œå¤æ‚æ¨ç†ç­‰æ“ä½œã€‚CAMEL æä¾›äº†ä¸€ç³»åˆ— æ ‡</span><br><span class="line"></span><br><span class="line">ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ:</span><br><span class="line">CAMEL Agentæ¡†æ¶çš„ç‰¹æ€§åŒ…æ‹¬ï¼š</span><br><span class="line"></span><br><span class="line">1. **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šæ”¯æŒå¤šä¸ªAgentå®ä¾‹ä¹‹é—´çš„ååŒå·¥ä½œï¼Œä»¥å®Œæˆæ›´å¤æ‚çš„ä»»åŠ¡ã€‚</span><br><span class="line">2. **çµæ´»çš„ä»»åŠ¡å¤„ç†èƒ½åŠ›**ï¼šé€šè¿‡Modelï¼ˆæ™ºèƒ½ä½“çš„å¤§è„‘ï¼‰å¤„ç†æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºæ•°æ®ï¼Œèƒ½å¤Ÿæ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œå¤šç§æ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">å¯ä»¥è°ƒç”¨çš„å·¥å…·åŒ…æ‹¬ï¼š</span><br><span class="line"></span><br><span class="line">- **æ–‡æœ¬åˆ†æ**ï¼šå¤„ç†å’Œç†è§£æ–‡æœ¬æ•°æ®ã€‚</span><br><span class="line">- **å›¾åƒè¯†åˆ«**ï¼šè¯†åˆ«å’Œåˆ†æå›¾åƒå†…å®¹ã€‚</span><br><span class="line">- **å¤æ‚æ¨ç†**ï¼šè¿›è¡Œå¤æ‚çš„é€»è¾‘æ¨ç†å’Œå†³ç­–ã€‚</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">è¯¢é—®ï¼šæ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶ï¼Ÿ(y/n): n</span><br><span class="line"></span><br><span class="line">æ˜¯å¦ç»§ç»­æŸ¥è¯¢ï¼Ÿ(y/n): y</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">æŸ¥è¯¢é€‰é¡¹</span><br><span class="line">============================================================</span><br></pre></td></tr></table></figure>
<h5 id="æ¥ç€æˆ‘ä»¬æµ‹è¯•æ·±åº¦æ£€ç´¢çš„æ•ˆæœ"><a href="#æ¥ç€æˆ‘ä»¬æµ‹è¯•æ·±åº¦æ£€ç´¢çš„æ•ˆæœ" class="headerlink" title="æ¥ç€æˆ‘ä»¬æµ‹è¯•æ·±åº¦æ£€ç´¢çš„æ•ˆæœ"></a>æ¥ç€æˆ‘ä»¬æµ‹è¯•æ·±åº¦æ£€ç´¢çš„æ•ˆæœ</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (è¾“å…¥ &#x27;quit&#x27; é€€å‡º, &#x27;reload&#x27; é‡æ–°åŠ è½½PDF): camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line"></span><br><span class="line">é€‰æ‹©æ£€ç´¢æ¨¡å¼:</span><br><span class="line">1. å¿«é€Ÿæ£€ç´¢ (åŸºç¡€å‘é‡æ£€ç´¢)</span><br><span class="line">2. æ·±åº¦æ£€ç´¢ (é‡å†™+HyDE+RRF)</span><br><span class="line">3. ä¸»é¢˜æ£€ç´¢ (PDF+ç½‘é¡µçˆ¬å–)</span><br><span class="line">è¯·é€‰æ‹©æ¨¡å¼ (1-3): 2</span><br><span class="line"></span><br><span class="line">æ‰§è¡ŒæŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">æ£€ç´¢æ¨¡å¼: æ·±åº¦æ£€ç´¢</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œæ·±åº¦æ£€ç´¢...</span><br><span class="line">============================================================</span><br><span class="line">å¼€å§‹æ‰§è¡Œæ·±åº¦RAGæŸ¥è¯¢</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">æ­¥éª¤1: æŸ¥è¯¢é‡å†™</span><br><span class="line">------------------------------</span><br><span class="line">åŸå§‹æŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">Generating response with CAMEL model...</span><br><span class="line">CAMEL generation failed, using fallback: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">APIè°ƒç”¨ 1/3...</span><br><span class="line">âˆš APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">Query rewritten: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ -&gt; Camel Agentæ¡† æ¶çš„å…·ä½“ç‰¹æ€§å’Œå¯è°ƒç”¨çš„å·¥å…·æœ‰å“ªäº›ï¼Ÿ...</span><br><span class="line">é‡å†™æŸ¥è¯¢: Camel Agentæ¡†æ¶çš„å…·ä½“ç‰¹æ€§å’Œå¯è°ƒç”¨çš„å·¥å…·æœ‰å“ªäº›ï¼Ÿ</span><br><span class="line"></span><br><span class="line">æ­¥éª¤2: æ–‡æ¡£æ£€ç´¢</span><br><span class="line">------------------------------</span><br><span class="line">ä½¿ç”¨HyDE+RRFç»„åˆæ–¹æ³•è¿›è¡Œæ£€ç´¢...</span><br><span class="line">ä½¿ç”¨RRFç®—æ³•è¿›è¡Œæ··åˆæ£€ç´¢ï¼ˆHyDEå¢å¼ºå‘é‡æ£€ç´¢ï¼‰...</span><br><span class="line">æ‰§è¡ŒHyDEå¢å¼ºå‘é‡æ£€ç´¢...</span><br><span class="line">Generating response with CAMEL model...</span><br><span class="line">CAMEL generation failed, using fallback: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">APIè°ƒç”¨ 1/3...</span><br><span class="line">âˆš APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">ğŸ“ HyDE document generated: 633 characters</span><br><span class="line">ç”Ÿæˆçš„å‡è®¾æ–‡æ¡£:</span><br><span class="line">åœ¨åˆ†å¸ƒå¼è®¡ç®—é¢†åŸŸï¼ŒCamel Agentæ¡†æ¶å› å…¶çµæ´»æ€§å’Œå¼ºå¤§çš„æ‰©å±•æ€§è€Œå—åˆ°å¹¿æ³›å…³æ³¨ã€‚è¯¥æ¡†æ¶è®¾è®¡ ç”¨äºæ”¯æŒå¤æ‚ç¯å¢ƒä¸‹çš„ä»»åŠ¡è°ƒåº¦ä¸èµ„æºç®¡ç†ï¼Œå°¤å…¶é€‚ç”¨äºå¼‚æ„ç³»ç»Ÿä¸­ã€‚Camel Agentæ¡†æ¶çš„æ ¸å¿ƒ ç‰¹æ€§åŒ…æ‹¬ä½†ä¸é™äºï¼š</span><br><span class="line"></span><br><span class="line">1. **æ¨¡å—åŒ–æ¶æ„**ï¼šCamel Agenté‡‡ç”¨é«˜åº¦æ¨¡å—åŒ–çš„æ¶æ„è®¾è®¡ï¼Œå…è®¸å¼€å‘è€…æ ¹æ®å…·ä½“éœ€æ±‚çµæ´»é€‰æ‹©å’Œç»„åˆä¸åŒçš„ç»„ä»¶ã€‚è¿™ç§è®¾è®¡ä¸ä»…ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œè¿˜æå¤§åœ°æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚</span><br><span class="line"></span><br><span class="line">2. **ä¸°å¯Œçš„æ’ä»¶æ”¯æŒ**ï¼šæ¡†æ¶å†…ç½®äº†å¤šç§æ’ä»¶ï¼Œæ¶µç›–äº†ä»æ•°æ®å¤„ç†åˆ°é€šä¿¡åè®®è½¬æ¢ç­‰å¤šä¸ªæ–¹é¢ ã€‚ä¾‹å¦‚ï¼Œæä¾›äº†RESTful APIã€AMQP (Advanced Message Queuing Protocol) ç­‰å¤šç§æ¶ˆæ¯ä¼ é€’æœºåˆ¶çš„æ”¯æŒï¼Œä»¥åŠå¯¹JSONã€XMLç­‰æ•°æ®æ ¼å¼çš„è§£æèƒ½åŠ›ã€‚æ­¤å¤–ï¼ŒCamel Agentè¿˜æ”¯æŒè‡ªå®šä¹‰æ’ä»¶çš„å¼€å‘ï¼Œä»¥æ»¡è¶³ç‰¹å®šåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">3. **å¼ºå¤§çš„è·¯ç”±ä¸è½¬æ¢åŠŸèƒ½**ï¼šåˆ©ç”¨Apache Camelçš„æ ¸å¿ƒä¼˜åŠ¿ï¼ŒCamel Agentèƒ½å¤Ÿå®ç°å¤æ‚çš„æ¶ˆæ¯è·¯ç”±å’Œè½¬æ¢é€»è¾‘ã€‚é€šè¿‡å®šä¹‰EIPs (Enterprise Integration Patterns)ï¼Œå¯ä»¥è½»æ¾æ„å»ºé«˜æ•ˆçš„æ•°æ®æµå¤„ç†ç®¡é“ï¼Œæ”¯æŒåŒæ­¥/å¼‚æ­¥è°ƒç”¨ã€é”™è¯¯å¤„ç†åŠé‡è¯•æœºåˆ¶ç­‰é«˜çº§ç‰¹æ€§ã€‚</span><br><span class="line"></span><br><span class="line">4. **åŠ¨æ€é…ç½®ä¸çƒ­æ›´æ–°**ï¼šCamel Agentæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´é…ç½®å‚æ•°ï¼Œæ— éœ€é‡å¯æœåŠ¡å³å¯ç”Ÿæ•ˆï¼Œæå¤§æå‡äº†è¿ç»´æ•ˆç‡ã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿå…·å¤‡çƒ­éƒ¨ç½²èƒ½åŠ›ï¼Œå…è®¸åœ¨ä¸åœæœºçš„æƒ…å†µä¸‹æ›´æ–°åº”ç”¨é€»è¾‘æˆ–æ·»åŠ æ–°åŠŸèƒ½</span><br><span class="line">Retrieved 5 documents</span><br><span class="line">âœ“ HyDEå‘é‡æ£€ç´¢å®Œæˆï¼Œè·å¾— 5 ä¸ªç»“æœ</span><br><span class="line">Retrieved 0 documents</span><br><span class="line">âœ“ å›¾åƒæ£€ç´¢å®Œæˆï¼Œè·å¾— 0 ä¸ªç»“æœ</span><br><span class="line">Retrieved 0 documents</span><br><span class="line">âœ“ è¡¨æ ¼æ£€ç´¢å®Œæˆï¼Œè·å¾— 0 ä¸ªç»“æœ</span><br><span class="line">æ‰§è¡ŒBM25æ£€ç´¢ï¼ˆä½¿ç”¨åŸå§‹æŸ¥è¯¢ï¼‰...</span><br><span class="line">Retrieved 5 documents</span><br><span class="line">âœ“ BM25æ£€ç´¢æˆåŠŸï¼Œè·å¾— 5 ä¸ªç»“æœ</span><br><span class="line">ä½¿ç”¨RRFç®—æ³•èåˆæ£€ç´¢ç»“æœ...</span><br><span class="line">RRFèåˆå®Œæˆï¼Œå…±å¤„ç† 10 ä¸ªå”¯ä¸€æ–‡æ¡£ï¼Œè¿”å›å‰ 5 ä¸ªç»“æœ</span><br><span class="line">HyDE+RRFæ£€ç´¢å®Œæˆï¼Œè¿”å› 10 ä¸ªæ–‡æ¡£</span><br><span class="line">æ–‡æ¡£ 1 (RRFåˆ†æ•°: 0.9160):</span><br><span class="line">ç»“è¯­ æ­å–œæ‚¨ï¼åœ¨é˜…è¯»åˆ°è¿™é‡Œæ—¶ï¼Œæ‚¨å·²ç»æŒæ¡äº† CAMEL-AI åº”ç”¨å¼€å‘æ¡†æ¶çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶èƒ½å¤Ÿåˆ© ç”¨ Agent å®ä¾‹åœ¨æ‚¨çš„ä»£ç é€»è¾‘ä¸­æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å°è¯•å°† Agent å®ä¾‹æ•´åˆ åˆ° æ›´å¤æ‚çš„å·¥ä½œæµä¸­ï¼Œæˆ–å®ç° Agent å®ä¾‹ä¹‹é—´çš„ååŒå·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 2 (RRFåˆ†æ•°: 0.9094):</span><br><span class="line">æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„è¯­è¨€å’Œè¡Œä¸ºè§„èŒƒï¼Œæ¥è‡ªä¸åŒå…¬å¸æˆ–è€…åŸºäºä¸åŒæŠ€æœ¯èƒŒæ™¯å¼€å‘çš„ AI Agent å°±å¾ˆéš¾é¡ºç•…åœ°åˆä½œã€‚è¿™ä¼šé™åˆ¶ AI Agent ç½‘ç»œçš„æ‰©å±•ï¼Œæœ€ç»ˆä¹Ÿä¼šé™åˆ¶å®ƒä»¬è§£å†³æ›´å¤æ‚ ç°å® é—®é¢˜çš„èƒ½åŠ›ã€‚è¿™ç§æƒ…å†µæœ‰ç‚¹åƒäº’è”ç½‘æ—©æœŸï¼Œå„ä¸ªè®¡ç®—æœºç³»ç»Ÿäº’ä¸å…¼å®¹ï¼Œè¿æ¥éå¸¸å—é™ï¼Œ å¯¼è‡´æ•´ ä¸ªç½‘ç»œå‘å±•ç¼“æ…¢ã€‚ ä¸€ä¸ªç»Ÿä¸€çš„é€šä¿¡åè®®ä¸ä»…ä»…èƒ½è§£å†³çœ¼å‰çš„äº’æ“ä½œé—®é¢˜ï¼Œæ›´æœ‰å¯èƒ½ å‚¬ç”Ÿå‡ºä¸€ä¸ªç”±æ— æ•°æ™ºèƒ½ä½“è¿æ¥è€Œæˆçš„å·¨å¤§ç½‘ç»œã€‚åœ¨è¿™ä¸ªç½‘ç»œ...</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 3 (RRFåˆ†æ•°: 0.9136):</span><br><span class="line">è¯„å®¡è€… Agent çš„ è¯„å®¡æ ‡å‡†ã€‚å¦‚æœ</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 4 (RRFåˆ†æ•°: 0.9050):</span><br><span class="line">é™¤äº†èƒ½æŠŠå·¥å…·åŒ…è½¬æ¢æˆ MCP æœåŠ¡å™¨å¤–ï¼ŒCAMEL æ¡†æ¶è¿˜æ”¯æŒä¸€ä¸ªæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼šæŠŠæ•´ä¸ª CAMEL ä»£ç†ï¼ˆAgentï¼‰æœ¬èº«ä¹Ÿä½œä¸º MCP æœåŠ¡å™¨å‘å¸ƒå‡ºå»ã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªä½ ç²¾å¿ƒé…ç½®å¥½çš„ CAMEL ä»£ç†â€”â€” å®ƒå¯èƒ½æ‹¥æœ‰ç‰¹å®šçš„ AI æ¨¡å‹ã€ç‹¬ç‰¹çš„ç³»ç»ŸæŒ‡ä»¤ï¼ˆsystem messageï¼‰ï¼Œç”šè‡³å†… ç½®äº†ä¸€äº›å…¶ä»–çš„å·¥ å…·â€”â€”ç°åœ¨å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡è¿è¡Œã€‚ç„¶åï¼Œä»»ä½•æ”¯æŒ MCP åè®®çš„ å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚åƒ Anth...</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 5 (RRFåˆ†æ•°: 0.9120):</span><br><span class="line">Model æ˜¯ Agent çš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºæ•°æ®ã€‚é€šè¿‡æœ‰æ•ˆè°ƒç”¨ä¸åŒçš„æ¨¡å‹ï¼Œæ™ºèƒ½ ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œæ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«å’Œå¤æ‚æ¨ç†ç­‰æ“ä½œã€‚CAMEL æä¾›äº†ä¸€ç³»åˆ—æ ‡</span><br><span class="line"></span><br><span class="line">æ­¥éª¤3: ç­”æ¡ˆç”Ÿæˆ</span><br><span class="line">------------------------------</span><br><span class="line"></span><br><span class="line">æ­£åœ¨ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ...</span><br><span class="line">Generating response with CAMEL model...</span><br><span class="line">CAMEL generation failed, using fallback: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">APIè°ƒç”¨ 1/3...</span><br><span class="line">âˆš APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âˆš ç­”æ¡ˆç”ŸæˆæˆåŠŸ</span><br><span class="line">æœ€ç»ˆç­”æ¡ˆ:</span><br><span class="line">### CAMEL Agentæ¡†æ¶çš„ç‰¹æ€§åŠå¯è°ƒç”¨å·¥å…·</span><br><span class="line"></span><br><span class="line">#### ç‰¹æ€§</span><br><span class="line"></span><br><span class="line">1. **æ ‡å‡†åŒ–åè®®æ”¯æŒ**ï¼š</span><br><span class="line">   - CAMEL Agentæ¡†æ¶æ”¯æŒå¤šç§æ ‡å‡†åŒ–åè®®ï¼Œç‰¹åˆ«æ˜¯æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰ã€Agenté—´åè®®ï¼ˆA2Aï¼‰å’ŒAgentç½‘ç»œåè®®ï¼ˆANPï¼‰ã€‚è¿™äº›åè®®ç¡®ä¿äº†ä¸åŒAI Agentä¹‹é—´çš„äº’æ“ä½œæ€§å’Œé«˜æ•ˆåä½œï¼ˆæ–‡æ¡£ å†…å®¹ï¼šâ€œè¿™äº›åè®®ä¸ºè§£å†³ AI Agent åœ¨ç†è§£ä¸Šä¸‹æ–‡ã€ä½¿ç”¨å·¥å…·å’Œç›¸äº’åä½œæ–¹é¢çš„éš¾é¢˜æä¾›äº†æœ‰æ•ˆ çš„æ€è·¯ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">2. **é«˜åº¦å¯æ‰©å±•æ€§**ï¼š</span><br><span class="line">   - CAMELæ¡†æ¶å…è®¸å¼€å‘è€…å°†è‡ªå®šä¹‰çš„å·¥å…·å’ŒæœåŠ¡è½¬æ¢æˆMCPæœåŠ¡ï¼Œä½¿å¾—è¿™äº›å·¥å…·å’ŒæœåŠ¡å¯ä»¥è¢« å…¶ä»–æ”¯æŒMCPåè®®çš„å®¢æˆ·ç«¯è¯†åˆ«å’Œä½¿ç”¨ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œé™¤äº†èƒ½æŠŠå·¥å…·åŒ…è½¬æ¢æˆ MCP æœåŠ¡å™¨å¤–ï¼ŒCAMEL æ¡†æ¶è¿˜æ”¯æŒä¸€ä¸ªæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼šæŠŠæ•´ä¸ª CAMEL ä»£ç†ï¼ˆAgentï¼‰æœ¬èº«ä¹Ÿä½œä¸º MCP æœåŠ¡å™¨å‘å¸ƒå‡ºå»ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">3. **å¤æ‚çš„å¤šä»£ç†äº¤äº’**ï¼š</span><br><span class="line">   - CAMELæ¡†æ¶å†…ç½®äº†å¤šä»£ç†è§’è‰²æ‰®æ¼”ï¼ˆRolePlayingï¼‰æ¨¡å—å’Œâ€œå·¥ä½œç»„â€ï¼ˆWorkforceï¼‰æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å¯ä»¥å®ç°å¤šä¸ªä»£ç†ä¹‹é—´çš„ååŒå·¥ä½œï¼Œå½¢æˆå¤æ‚çš„äº¤äº’åœºæ™¯ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œå…¶å†…éƒ¨ä¸€äº›æ›´å¤ æ‚çš„æ¨¡å—ï¼Œæ¯”å¦‚ç”¨äºå®ç°å¤šä»£ç†è§’è‰²æ‰®æ¼”ï¼ˆRolePlayingï¼‰çš„æ¨¡å—ï¼Œæˆ–è€…ç”¨äºç»„ç»‡å¤šä¸ªä»£ç†ååŒ å·¥ä½œçš„â€˜å·¥ä½œç»„â€™ï¼ˆWorkforceï¼‰æ¨¡å—ï¼Œä¹Ÿè®¡åˆ’æˆ–è€…æ­£åœ¨è¢«å®ç°ä¸º MCP æœåŠ¡å™¨ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">4. **ä»£ç å³æç¤ºï¼ˆCode-as-Promptï¼‰**ï¼š</span><br><span class="line">   - CAMELæ¡†æ¶å¼ºè°ƒç¼–å†™æ—¢æ¸…æ™°æ˜“æ‡‚åˆå¯è¢«AIä»£ç†å‡†ç¡®ç†è§£çš„ä»£ç ï¼Œè¿™ä¸€è®¾è®¡ç†å¿µæœ‰åŠ©äºæé«˜é›†æˆçš„è´¨é‡å’Œç¨³å®šæ€§ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œCAMEL æ¡†æ¶ä¸­æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„è®¾è®¡å“²å­¦å«åšâ€˜ä»£ç å³æç¤ºâ€™ï¼ˆCode-as-Promptï¼‰ã€‚å®ƒå¼ºè°ƒç¼–å†™æ—¢æ¸…æ™°æ˜“æ‡‚ï¼ˆå¯¹äººç±»å¼€å‘è€…è€Œè¨€ï¼‰åˆèƒ½è¢« AI ä»£ç†å‡†ç¡®ç†è§£çš„ä»£ç ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">#### å¯è°ƒç”¨çš„å·¥å…·</span><br><span class="line"></span><br><span class="line">1. **æ–‡æœ¬åˆ†æå·¥å…·**ï¼š</span><br><span class="line">   - CAMEL Agentæ¡†æ¶æ”¯æŒè°ƒç”¨æ–‡æœ¬åˆ†æå·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©Agentæ‰§è¡Œæ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ† æã€å…³é”®è¯æå–ç­‰ä»»åŠ¡ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œé€šè¿‡æœ‰æ•ˆè°ƒç”¨ä¸åŒçš„æ¨¡å‹ï¼Œæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œ æ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«å’Œå¤æ‚æ¨ç†ç­‰æ“ä½œã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">2. **å›¾åƒè¯†åˆ«å·¥å…·**ï¼š</span><br><span class="line">   - æ¡†æ¶å†…çš„Agentå¯ä»¥è°ƒç”¨å›¾åƒè¯†åˆ«å·¥å…·ï¼Œç”¨äºå›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒç”Ÿæˆç­‰ä»»åŠ¡ã€‚    </span><br><span class="line"></span><br><span class="line">3. **å¤æ‚æ¨ç†å·¥å…·**ï¼š</span><br><span class="line">   - æ”¯æŒè°ƒç”¨å¤æ‚æ¨ç†å·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©Agentè§£å†³éœ€è¦å¤šæ­¥æ¨ç†çš„é—®é¢˜ï¼Œä¾‹å¦‚å†³ç­–æ ‘ã€é€»è¾‘æ¨ç†ç­‰ã€‚</span><br><span class="line"></span><br><span class="line">4. **è‡ªå®šä¹‰å·¥å…·å’ŒæœåŠ¡**ï¼š</span><br><span class="line">   - å¼€å‘è€…å¯ä»¥å°†è‡ªå·±å¼€å‘çš„å·¥å…·å’ŒæœåŠ¡è½¬æ¢æˆMCPæœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¯ä»¥è¢«å…¶ä»–æ”¯æŒMCPåè®®çš„ å®¢æˆ·ç«¯è°ƒç”¨ï¼Œä»è€Œå®ç°æ›´å¹¿æ³›çš„åº”ç”¨ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œè¿™æ„å‘³ç€ï¼Œä¸€ä¸ªä½ ç²¾å¿ƒé…ç½®å¥½çš„ CAMEL ä»£ç†â€”â€”å®ƒå¯èƒ½æ‹¥æœ‰ç‰¹å®šçš„ AI æ¨¡å‹ã€ç‹¬ç‰¹çš„ç³»ç»ŸæŒ‡ä»¤ï¼ˆsystem messageï¼‰ï¼Œç”šè‡³å†…ç½®äº†ä¸€äº›å…¶ä»–çš„å·¥å…·â€”â€”ç°åœ¨å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡è¿è¡Œã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">é€šè¿‡ä¸Šè¿°ç‰¹æ€§å’Œå·¥å…·çš„æ”¯æŒï¼ŒCAMEL Agentæ¡†æ¶ä¸ä»…èƒ½å¤Ÿå®ç°å•ä¸€Agentçš„å¼ºå¤§åŠŸèƒ½ï¼Œè¿˜èƒ½ä¿ƒè¿›ä¸åŒAgentä¹‹é—´çš„ååŒå·¥ä½œï¼Œå½¢æˆä¸€ä¸ªé«˜æ•ˆçš„AIç”Ÿæ€ç³»ç»Ÿã€‚</span><br><span class="line"></span><br><span class="line">==================== æ·±åº¦æ£€ç´¢ç»“æœ ====================</span><br><span class="line">åŸç»“å§‹æŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">é‡å†™æŸ¥è¯¢: Camel Agentæ¡†æ¶çš„å…·ä½“ç‰¹æ€§å’Œå¯è°ƒç”¨çš„å·¥å…·æœ‰å“ªäº›ï¼Ÿ</span><br><span class="line">æ£€ç´¢æ–¹æ³•: Vector+Rewriting+HyDE+Image+Table+RRF</span><br><span class="line"></span><br><span class="line">æ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±5ä¸ª):</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 1:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.01639344262295082</span><br><span class="line">å†…å®¹é¢„è§ˆ: ç»“è¯­ æ­å–œæ‚¨ï¼åœ¨é˜…è¯»åˆ°è¿™é‡Œæ—¶ï¼Œæ‚¨å·²ç»æŒæ¡äº† CAMEL-AI åº”ç”¨å¼€å‘æ¡†æ¶çš„åŸºç¡€çŸ¥è¯† ï¼Œå¹¶èƒ½å¤Ÿåˆ© ç”¨ Agent å®ä¾‹åœ¨æ‚¨çš„ä»£ç é€»è¾‘ä¸­æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥å°è¯•å°† Agent  å®ä¾‹æ•´åˆ åˆ°æ›´å¤æ‚çš„å·¥ä½œæµä¸­ï¼Œæˆ–å®ç° Agent å®ä¾‹ä¹‹é—´çš„ååŒå·¥ä½œã€‚</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 2:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.01639344262295082</span><br><span class="line">å†…å®¹é¢„è§ˆ: æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ç»Ÿä¸€çš„è¯­è¨€å’Œè¡Œä¸ºè§„èŒƒï¼Œæ¥è‡ªä¸åŒå…¬å¸æˆ–è€…åŸºäºä¸åŒæŠ€æœ¯èƒŒæ™¯å¼€å‘çš„ AI Agent å°±å¾ˆéš¾é¡ºç•…åœ°åˆä½œã€‚è¿™ä¼šé™åˆ¶ AI Agent ç½‘ç»œçš„æ‰©å±•ï¼Œæœ€ç»ˆä¹Ÿä¼šé™åˆ¶å®ƒä»¬è§£å†³æ›´å¤æ‚ ç°å®é—®é¢˜çš„èƒ½åŠ›ã€‚è¿™ç§æƒ…å†µæœ‰ç‚¹åƒäº’è”ç½‘æ—©æœŸï¼Œå„ä¸ªè®¡ç®—æœºç³»ç»Ÿäº’ä¸å…¼å®¹ï¼Œè¿æ¥éå¸¸å—é™ ï¼Œ å¯¼è‡´æ•´ä¸ªç½‘ç»œå‘å±•ç¼“æ…¢ã€‚ ä¸€ä¸ªç»Ÿä¸€çš„é€šä¿¡åè®®ä¸ä»…ä»…èƒ½è§£å†³çœ¼å‰çš„äº’æ“ä½œé—®é¢˜ï¼Œæ›´æœ‰å¯èƒ½  å‚¬ç”Ÿå‡ºä¸€ä¸ªç”±æ— æ•°æ™ºèƒ½ä½“è¿æ¥è€Œæˆçš„å·¨å¤§ç½‘ç»œã€‚åœ¨è¿™ä¸ªç½‘ç»œ...</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 3:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.016129032258064516</span><br><span class="line">å†…å®¹é¢„è§ˆ: è¯„å®¡è€… Agent çš„ è¯„å®¡æ ‡å‡†ã€‚å¦‚æœ</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 4:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.016129032258064516</span><br><span class="line">å†…å®¹é¢„è§ˆ: é™¤äº†èƒ½æŠŠå·¥å…·åŒ…è½¬æ¢æˆ MCP æœåŠ¡å™¨å¤–ï¼ŒCAMEL æ¡†æ¶è¿˜æ”¯æŒä¸€ä¸ªæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼šæŠŠæ•´ ä¸ª CAMEL ä»£ç†ï¼ˆAgentï¼‰æœ¬èº«ä¹Ÿä½œä¸º MCP æœåŠ¡å™¨å‘å¸ƒå‡ºå»ã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªä½ ç²¾å¿ƒé…ç½®å¥½çš„ CAMEL ä»£ç†â€”â€”å®ƒå¯èƒ½æ‹¥æœ‰ç‰¹å®šçš„ AI æ¨¡å‹ã€ç‹¬ç‰¹çš„ç³»ç»ŸæŒ‡ä»¤ï¼ˆsystem messageï¼‰ï¼Œç”šè‡³å†… ç½®äº†ä¸€ äº›å…¶ä»–çš„å·¥å…·â€”â€”ç°åœ¨å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡è¿è¡Œã€‚ç„¶åï¼Œä»»ä½•æ”¯æŒ MCP åè®®çš„ å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚åƒ Anth...</span><br><span class="line"></span><br><span class="line">æ–‡æ¡£ 5:</span><br><span class="line">ç›¸å…³åº¦åˆ†æ•°: 0.015873015873015872</span><br><span class="line">å†…å®¹é¢„è§ˆ: Model æ˜¯ Agent çš„å¤§è„‘ï¼Œè´Ÿè´£å¤„ç†æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºæ•°æ®ã€‚é€šè¿‡æœ‰æ•ˆè°ƒç”¨ä¸åŒçš„æ¨¡å‹ ï¼Œæ™ºèƒ½ ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œæ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«å’Œå¤æ‚æ¨ç†ç­‰æ“ä½œã€‚CAMEL æä¾›äº†ä¸€ç³»åˆ— æ ‡</span><br><span class="line"></span><br><span class="line">ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ:</span><br><span class="line">### CAMEL Agentæ¡†æ¶çš„ç‰¹æ€§åŠå¯è°ƒç”¨å·¥å…·</span><br><span class="line"></span><br><span class="line">#### ç‰¹æ€§</span><br><span class="line"></span><br><span class="line">1. **æ ‡å‡†åŒ–åè®®æ”¯æŒ**ï¼š</span><br><span class="line">   - CAMEL Agentæ¡†æ¶æ”¯æŒå¤šç§æ ‡å‡†åŒ–åè®®ï¼Œç‰¹åˆ«æ˜¯æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰ã€Agenté—´åè®®ï¼ˆA2Aï¼‰å’ŒAgentç½‘ç»œåè®®ï¼ˆANPï¼‰ã€‚è¿™äº›åè®®ç¡®ä¿äº†ä¸åŒAI Agentä¹‹é—´çš„äº’æ“ä½œæ€§å’Œé«˜æ•ˆåä½œï¼ˆæ–‡æ¡£ å†…å®¹ï¼šâ€œè¿™äº›åè®®ä¸ºè§£å†³ AI Agent åœ¨ç†è§£ä¸Šä¸‹æ–‡ã€ä½¿ç”¨å·¥å…·å’Œç›¸äº’åä½œæ–¹é¢çš„éš¾é¢˜æä¾›äº†æœ‰æ•ˆ çš„æ€è·¯ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">2. **é«˜åº¦å¯æ‰©å±•æ€§**ï¼š</span><br><span class="line">   - CAMELæ¡†æ¶å…è®¸å¼€å‘è€…å°†è‡ªå®šä¹‰çš„å·¥å…·å’ŒæœåŠ¡è½¬æ¢æˆMCPæœåŠ¡ï¼Œä½¿å¾—è¿™äº›å·¥å…·å’ŒæœåŠ¡å¯ä»¥è¢« å…¶ä»–æ”¯æŒMCPåè®®çš„å®¢æˆ·ç«¯è¯†åˆ«å’Œä½¿ç”¨ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œé™¤äº†èƒ½æŠŠå·¥å…·åŒ…è½¬æ¢æˆ MCP æœåŠ¡å™¨å¤–ï¼ŒCAMEL æ¡†æ¶è¿˜æ”¯æŒä¸€ä¸ªæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼šæŠŠæ•´ä¸ª CAMEL ä»£ç†ï¼ˆAgentï¼‰æœ¬èº«ä¹Ÿä½œä¸º MCP æœåŠ¡å™¨å‘å¸ƒå‡ºå»ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">3. **å¤æ‚çš„å¤šä»£ç†äº¤äº’**ï¼š</span><br><span class="line">   - CAMELæ¡†æ¶å†…ç½®äº†å¤šä»£ç†è§’è‰²æ‰®æ¼”ï¼ˆRolePlayingï¼‰æ¨¡å—å’Œâ€œå·¥ä½œç»„â€ï¼ˆWorkforceï¼‰æ¨¡å—ï¼Œè¿™äº›æ¨¡å—å¯ä»¥å®ç°å¤šä¸ªä»£ç†ä¹‹é—´çš„ååŒå·¥ä½œï¼Œå½¢æˆå¤æ‚çš„äº¤äº’åœºæ™¯ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œå…¶å†…éƒ¨ä¸€äº›æ›´å¤ æ‚çš„æ¨¡å—ï¼Œæ¯”å¦‚ç”¨äºå®ç°å¤šä»£ç†è§’è‰²æ‰®æ¼”ï¼ˆRolePlayingï¼‰çš„æ¨¡å—ï¼Œæˆ–è€…ç”¨äºç»„ç»‡å¤šä¸ªä»£ç†ååŒ å·¥ä½œçš„â€˜å·¥ä½œç»„â€™ï¼ˆWorkforceï¼‰æ¨¡å—ï¼Œä¹Ÿè®¡åˆ’æˆ–è€…æ­£åœ¨è¢«å®ç°ä¸º MCP æœåŠ¡å™¨ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">4. **ä»£ç å³æç¤ºï¼ˆCode-as-Promptï¼‰**ï¼š</span><br><span class="line">   - CAMELæ¡†æ¶å¼ºè°ƒç¼–å†™æ—¢æ¸…æ™°æ˜“æ‡‚åˆå¯è¢«AIä»£ç†å‡†ç¡®ç†è§£çš„ä»£ç ï¼Œè¿™ä¸€è®¾è®¡ç†å¿µæœ‰åŠ©äºæé«˜é›†æˆçš„è´¨é‡å’Œç¨³å®šæ€§ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œCAMEL æ¡†æ¶ä¸­æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„è®¾è®¡å“²å­¦å«åšâ€˜ä»£ç å³æç¤ºâ€™ï¼ˆCode-as-Promptï¼‰ã€‚å®ƒå¼ºè°ƒç¼–å†™æ—¢æ¸…æ™°æ˜“æ‡‚ï¼ˆå¯¹äººç±»å¼€å‘è€…è€Œè¨€ï¼‰åˆèƒ½è¢« AI ä»£ç†å‡†ç¡®ç†è§£çš„ä»£ç ã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">#### å¯è°ƒç”¨çš„å·¥å…·</span><br><span class="line"></span><br><span class="line">1. **æ–‡æœ¬åˆ†æå·¥å…·**ï¼š</span><br><span class="line">   - CAMEL Agentæ¡†æ¶æ”¯æŒè°ƒç”¨æ–‡æœ¬åˆ†æå·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©Agentæ‰§è¡Œæ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ† æã€å…³é”®è¯æå–ç­‰ä»»åŠ¡ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œé€šè¿‡æœ‰æ•ˆè°ƒç”¨ä¸åŒçš„æ¨¡å‹ï¼Œæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®ä»»åŠ¡éœ€æ±‚æ‰§è¡Œ æ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«å’Œå¤æ‚æ¨ç†ç­‰æ“ä½œã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">2. **å›¾åƒè¯†åˆ«å·¥å…·**ï¼š</span><br><span class="line">   - æ¡†æ¶å†…çš„Agentå¯ä»¥è°ƒç”¨å›¾åƒè¯†åˆ«å·¥å…·ï¼Œç”¨äºå›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€å›¾åƒç”Ÿæˆç­‰ä»»åŠ¡ã€‚    </span><br><span class="line"></span><br><span class="line">3. **å¤æ‚æ¨ç†å·¥å…·**ï¼š</span><br><span class="line">   - æ”¯æŒè°ƒç”¨å¤æ‚æ¨ç†å·¥å…·ï¼Œè¿™äº›å·¥å…·å¯ä»¥å¸®åŠ©Agentè§£å†³éœ€è¦å¤šæ­¥æ¨ç†çš„é—®é¢˜ï¼Œä¾‹å¦‚å†³ç­–æ ‘ã€é€»è¾‘æ¨ç†ç­‰ã€‚</span><br><span class="line"></span><br><span class="line">4. **è‡ªå®šä¹‰å·¥å…·å’ŒæœåŠ¡**ï¼š</span><br><span class="line">   - å¼€å‘è€…å¯ä»¥å°†è‡ªå·±å¼€å‘çš„å·¥å…·å’ŒæœåŠ¡è½¬æ¢æˆMCPæœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¯ä»¥è¢«å…¶ä»–æ”¯æŒMCPåè®®çš„ å®¢æˆ·ç«¯è°ƒç”¨ï¼Œä»è€Œå®ç°æ›´å¹¿æ³›çš„åº”ç”¨ï¼ˆæ–‡æ¡£å†…å®¹ï¼šâ€œè¿™æ„å‘³ç€ï¼Œä¸€ä¸ªä½ ç²¾å¿ƒé…ç½®å¥½çš„ CAMEL ä»£ç†â€”â€”å®ƒå¯èƒ½æ‹¥æœ‰ç‰¹å®šçš„ AI æ¨¡å‹ã€ç‹¬ç‰¹çš„ç³»ç»ŸæŒ‡ä»¤ï¼ˆsystem messageï¼‰ï¼Œç”šè‡³å†…ç½®äº†ä¸€äº›å…¶ä»–çš„å·¥å…·â€”â€”ç°åœ¨å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡è¿è¡Œã€‚â€ï¼‰ã€‚</span><br><span class="line"></span><br><span class="line">é€šè¿‡ä¸Šè¿°ç‰¹æ€§å’Œå·¥å…·çš„æ”¯æŒï¼ŒCAMEL Agentæ¡†æ¶ä¸ä»…èƒ½å¤Ÿå®ç°å•ä¸€Agentçš„å¼ºå¤§åŠŸèƒ½ï¼Œè¿˜èƒ½ä¿ƒè¿›ä¸åŒAgentä¹‹é—´çš„ååŒå·¥ä½œï¼Œå½¢æˆä¸€ä¸ªé«˜æ•ˆçš„AIç”Ÿæ€ç³»ç»Ÿã€‚</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">è¯¢é—®ï¼šæ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶ï¼Ÿ(y/n): n</span><br><span class="line"></span><br><span class="line">æ˜¯å¦ç»§ç»­æŸ¥è¯¢ï¼Ÿ(y/n): y</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">æŸ¥è¯¢é€‰é¡¹</span><br><span class="line">============================================================</span><br></pre></td></tr></table></figure>
<h5 id="æœ€åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¸»é¢˜æ£€ç´¢ï¼š"><a href="#æœ€åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¸»é¢˜æ£€ç´¢ï¼š" class="headerlink" title="æœ€åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¸»é¢˜æ£€ç´¢ï¼š"></a>æœ€åæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¸»é¢˜æ£€ç´¢ï¼š</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (è¾“å…¥ &#x27;quit&#x27; é€€å‡º, &#x27;reload&#x27; é‡æ–°åŠ è½½PDF): camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line"></span><br><span class="line">é€‰æ‹©æ£€ç´¢æ¨¡å¼:</span><br><span class="line">1. å¿«é€Ÿæ£€ç´¢ (åŸºç¡€å‘é‡æ£€ç´¢)</span><br><span class="line">2. æ·±åº¦æ£€ç´¢ (é‡å†™+HyDE+RRF)</span><br><span class="line">3. ä¸»é¢˜æ£€ç´¢ (PDF+ç½‘é¡µçˆ¬å–)</span><br><span class="line">è¯·é€‰æ‹©æ¨¡å¼ (1-3): 3</span><br><span class="line"></span><br><span class="line">æ‰§è¡ŒæŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">æ£€ç´¢æ¨¡å¼: ä¸»é¢˜æ£€ç´¢</span><br><span class="line"></span><br><span class="line">æ‰§è¡Œç½‘é¡µæ£€ç´¢...</span><br><span class="line">========================================</span><br><span class="line">æ­£åœ¨è¿›è¡Œç½‘é¡µç ”ç©¶...</span><br><span class="line">ğŸ” ç½‘ç»œæœç´¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">ğŸ”„ ä½¿ç”¨ DuckDuckGo Lite æœç´¢...</span><br><span class="line">âœ… æœç´¢å®Œæˆï¼Œæ‰¾åˆ° 10 ä¸ªç»“æœ</span><br><span class="line">âˆš ç½‘é¡µæœç´¢å®Œæˆ</span><br><span class="line">æ­£åœ¨æ£€ç´¢PDFæ–‡æ¡£...</span><br><span class="line">Retrieved 3 documents</span><br><span class="line">âˆš æ£€ç´¢åˆ° 3 ä¸ªPDFæ–‡æ¡£</span><br><span class="line">æ­£åœ¨ç”Ÿæˆç»¼åˆç­”æ¡ˆ...</span><br><span class="line">Generating response with CAMEL model...</span><br><span class="line">CAMEL generation failed, using fallback: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">APIè°ƒç”¨ 1/3...</span><br><span class="line">âˆš APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">ä¸»é¢˜æ£€ç´¢å®Œæˆ</span><br><span class="line"></span><br><span class="line">==================== æ·±åº¦æ£€ç´¢ç»“æœ ====================</span><br><span class="line">åŸç»“å§‹æŸ¥è¯¢: camel agentæ¡†æ¶å…·å¤‡æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿå¯ä»¥è°ƒç”¨å“ªäº›å·¥å…·ï¼Ÿ</span><br><span class="line">æ£€ç´¢æ–¹æ³•: PDF+Web Topic Retrieval</span><br><span class="line">ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ:</span><br><span class="line">**CAMEL Agentæ¡†æ¶çš„ç‰¹æ€§åŠå…¶å¯è°ƒç”¨çš„å·¥å…·**</span><br><span class="line"></span><br><span class="line">### ç‰¹æ€§</span><br><span class="line"></span><br><span class="line">1. **å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ”¯æŒ**ï¼šCAMEL Agentæ¡†æ¶æ”¯æŒåˆ›å»ºå’Œç®¡ç†å¤šä¸ªæ™ºèƒ½ä½“ï¼Œè¿™äº›æ™ºèƒ½ä½“å¯ä»¥åœ¨åŒä¸€ä¸ªç³»ç»Ÿä¸­ååŒå·¥ä½œï¼Œå…±åŒå®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½å¯ä»¥æ ¹æ®å…¶è§’è‰²å’Œä»»åŠ¡è¿›è¡Œé…ç½®ï¼Œä»è€Œå®ç°é«˜åº¦çš„çµæ´»æ€§å’Œé€‚åº”æ€§ã€‚</span><br><span class="line"></span><br><span class="line">2. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¡†æ¶é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥è½»æ¾åœ°æ·»åŠ æˆ–ç§»é™¤åŠŸèƒ½æ¨¡å—ï¼Œå¦‚ä¸ åŒçš„æ„ŸçŸ¥æ¨¡å—ã€å†³ç­–æ¨¡å—ç­‰ï¼Œä»¥é€‚åº”ä¸åŒåº”ç”¨åœºæ™¯çš„éœ€æ±‚ã€‚</span><br><span class="line"></span><br><span class="line">3. **å¼ºå¤§çš„æ¨¡å‹æ”¯æŒ**ï¼šCAMEL Agentæ¡†æ¶ä¸­çš„æ¯ä¸ªAgentéƒ½æœ‰ä¸€ä¸ªâ€œå¤§è„‘â€ï¼Œå³Modelï¼Œå®ƒè´Ÿè´£å¤„ç†æ‰€æœ‰è¾“å…¥å’Œè¾“å‡ºçš„æ•°æ®ã€‚é€šè¿‡è°ƒç”¨ä¸åŒçš„æ¨¡å‹ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿæ‰§è¡Œæ–‡æœ¬åˆ†æã€å›¾åƒè¯†åˆ«ã€å¤æ‚æ¨ç†ç­‰å¤šç§ä»»åŠ¡ã€‚</span><br><span class="line"></span><br><span class="line">4. **é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦ä¸ç®¡ç†**ï¼šè¯¥æ¡†æ¶æä¾›äº†é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦æœºåˆ¶ï¼Œç¡®ä¿å¤šä¸ªAgentä¹‹é—´å¯ä»¥æœ‰æ•ˆåœ°åˆ†é…å’Œæ‰§è¡Œä»»åŠ¡ï¼Œå³ä½¿åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä¿æŒè‰¯å¥½çš„æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">5. **æ˜“äºé›†æˆç¬¬ä¸‰æ–¹æœåŠ¡**ï¼šCAMEL Agentæ¡†æ¶è®¾è®¡æ—¶è€ƒè™‘åˆ°äº†ä¸å…¶ä»–æœåŠ¡å’ŒæŠ€æœ¯æ ˆçš„å…¼å®¹æ€§ï¼Œå…è®¸å¼€å‘è€…è½»æ¾é›†æˆå¤–éƒ¨APIå’ŒæœåŠ¡ï¼Œå¦‚äº‘å­˜å‚¨ã€æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ï¼Œè¿›ä¸€æ­¥æ‰©å±•åº”ç”¨çš„åŠŸèƒ½ ã€‚</span><br><span class="line"></span><br><span class="line">### å¯è°ƒç”¨çš„å·¥å…·</span><br><span class="line"></span><br><span class="line">1. **è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å·¥å…·**ï¼šåŒ…æ‹¬ä½†ä¸é™äºæ–‡æœ¬åˆ†ç±»ã€æƒ…æ„Ÿåˆ†æã€å®ä½“è¯†åˆ«ç­‰åŠŸèƒ½ï¼Œå¸®åŠ©æ™ºèƒ½ä½“æ›´å¥½åœ°ç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€ã€‚</span><br><span class="line"></span><br><span class="line">2. **è®¡ç®—æœºè§†è§‰ï¼ˆCVï¼‰å·¥å…·**ï¼šå¦‚å›¾åƒåˆ†ç±»ã€ç›®æ ‡æ£€æµ‹ã€äººè„¸è¯†åˆ«ç­‰ï¼Œä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿåœ¨è§†è§‰ä»» åŠ¡ä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚</span><br><span class="line"></span><br><span class="line">3. **æœºå™¨å­¦ä¹ /æ·±åº¦å­¦ä¹ æ¡†æ¶**ï¼šå¦‚TensorFlowã€PyTorchç­‰ï¼Œä¸ºæ™ºèƒ½ä½“æä¾›äº†å¼ºå¤§çš„ç®—æ³•æ”¯æŒ ï¼Œä½¿å…¶èƒ½å¤Ÿå­¦ä¹ å’Œæ”¹è¿›è‡ªå·±çš„è¡Œä¸ºæ¨¡å¼ã€‚</span><br><span class="line"></span><br><span class="line">4. **æ•°æ®å­˜å‚¨ä¸å¤„ç†å·¥å…·**ï¼šä¾‹å¦‚MongoDBã€MySQLç­‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œä»¥åŠHadoopã€Sparkç­‰å¤§æ•°æ®å¤„ç†å¹³å°ï¼Œç”¨äºç®¡ç†å’Œåˆ†æå¤§é‡æ•°æ®ã€‚</span><br><span class="line"></span><br><span class="line">5. **é€šä¿¡åè®®ä¸å·¥å…·**ï¼šåŒ…æ‹¬RESTful APIã€WebSocketç­‰ï¼Œç¡®ä¿æ™ºèƒ½ä½“ä¹‹é—´ä»¥åŠæ™ºèƒ½ä½“ä¸å¤–éƒ¨ ä¸–ç•Œä¹‹é—´çš„é«˜æ•ˆé€šä¿¡ã€‚</span><br><span class="line"></span><br><span class="line">6. **ä»»åŠ¡è°ƒåº¦ä¸ç®¡ç†å·¥å…·**ï¼šå¦‚Celeryã€RabbitMQç­‰ï¼Œå¸®åŠ©å®ç°ä»»åŠ¡çš„å¼‚æ­¥å¤„ç†å’Œåˆ†å¸ƒå¼è®¡ç®— ï¼Œæé«˜ç³»ç»Ÿçš„å“åº”é€Ÿåº¦å’Œå¤„ç†èƒ½åŠ›ã€‚</span><br><span class="line"></span><br><span class="line">ç»¼ä¸Šæ‰€è¿°ï¼ŒCAMEL Agentæ¡†æ¶ä¸ä»…å…·å¤‡å¼ºå¤§çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ”¯æŒå’Œæ¨¡å—åŒ–è®¾è®¡ï¼Œè¿˜èƒ½å¤Ÿè°ƒç”¨å¤šç§ å…ˆè¿›çš„å·¥å…·å’ŒæŠ€æœ¯ï¼Œä½¿å…¶æˆä¸ºæ„å»ºå¤æ‚æ™ºèƒ½åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">è¯¢é—®ï¼šæ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶ï¼Ÿ(y/n): n</span><br><span class="line"></span><br><span class="line">æ˜¯å¦ç»§ç»­æŸ¥è¯¢ï¼Ÿ(y/n): y</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">æŸ¥è¯¢é€‰é¡¹</span><br><span class="line">============================================================</span><br><span class="line">è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (è¾“å…¥ &#x27;quit&#x27; é€€å‡º, &#x27;reload&#x27; é‡æ–°åŠ è½½PDF):</span><br></pre></td></tr></table></figure>
<h5 id="åŸºäºä»¥ä¸Šè¿è¡Œç»“æœï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹åŠŸèƒ½å®ç°æ•ˆæœ"><a href="#åŸºäºä»¥ä¸Šè¿è¡Œç»“æœï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹åŠŸèƒ½å®ç°æ•ˆæœ" class="headerlink" title="åŸºäºä»¥ä¸Šè¿è¡Œç»“æœï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹åŠŸèƒ½å®ç°æ•ˆæœ"></a><strong>åŸºäºä»¥ä¸Šè¿è¡Œç»“æœï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹åŠŸèƒ½å®ç°æ•ˆæœ</strong></h5><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¯¥äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿåœ¨åŠŸèƒ½å®ç°å’Œäº¤äº’è®¾è®¡ä¸Šè¡¨ç°è‰¯å¥½ï¼ŒæˆåŠŸæ”¯æŒPDFçŸ¥è¯†åº“åŠ è½½ã€ä¸‰ç§æ£€ç´¢æ¨¡å¼å’Œç­”æ¡ˆç”Ÿæˆï¼Œç­”æ¡ˆè´¨é‡éšæ¨¡å¼å¢å¼ºè€Œæå‡ã€‚ç„¶è€Œï¼ŒCAMELæ¡†æ¶çš„ç¨³å®šæ€§é—®é¢˜ã€å¤šæ¨¡æ€æ”¯æŒçš„æœªå……åˆ†åˆ©ç”¨ã€ç½‘é¡µç ”ç©¶çš„æ¨¡æ‹Ÿæ€§ä»¥åŠæ€§èƒ½å’Œç•Œé¢å±€é™å½±å“äº†æ•´ä½“æ•ˆæœã€‚é€šè¿‡è§£å†³CAMELå…¼å®¹æ€§ã€å¢å¼ºå¤šæ¨¡æ€å’Œç½‘é¡µåŠŸèƒ½ã€ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œç³»ç»Ÿå¯è¿›ä¸€æ­¥æå‡å®ç”¨æ€§å’Œé€‚åº”ç¨³å®šæ€§ï¼Œé€‚ç”¨äºæ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br></pre></td><td class="code"><pre><span class="line"> G:\Python-Camel-project\Interactive_Multi_RAG&gt; &amp; D:/Download/Python/py-3.11.9/python.exe g:/Python-Camel-project/Interactive_Multi_RAG/Enhanced_Interactive_Multimodal_RAG.py</span><br><span class="line">W0725 16:44:30.290000 32324 site-packages\torch\distributed\elastic\multiprocessing\redirects.py:29] NOTE: Redirects are currently not supported in Windows or MacOs.   </span><br><span class="line">âœ“ ä½¿ç”¨Richå¢å¼ºç•Œé¢</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ ç³»ç»Ÿå¯åŠ¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚  ğŸ¤– äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ v2.0                                                     â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚  âœ¨ æ–°åŠŸèƒ½ç‰¹æ€§:                                                                  â”‚</span><br><span class="line">â”‚  â€¢ ğŸ”§ å¢å¼ºçš„CAMELæ¡†æ¶é›†æˆå’Œç¨³å®šæ€§æ”¹è¿›                                            â”‚</span><br><span class="line">â”‚  â€¢ ğŸ–¼ï¸ æ”¹è¿›çš„å¤šæ¨¡æ€æ”¯æŒ (å›¾åƒOCR + è¡¨æ ¼æå–)                                       </span><br><span class="line">â”‚</span><br><span class="line">â”‚  â€¢ ğŸŒ çœŸå®ç½‘é¡µç ”ç©¶å’Œå†…å®¹åˆ†æ                                                     â”‚</span><br><span class="line">â”‚  â€¢ âš¡ æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–                                                             â”‚</span><br><span class="line">â”‚  â€¢ ğŸ¨ å¢å¼ºçš„ç”¨æˆ·ç•Œé¢ä½“éªŒ                                                         â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚  ğŸš€ æ”¯æŒçš„æ£€ç´¢æ¨¡å¼:                                                              â”‚</span><br><span class="line">â”‚  â€¢ å¿«é€Ÿæ£€ç´¢: åŸºç¡€å‘é‡æ£€ç´¢                                                        â”‚</span><br><span class="line">â”‚  â€¢ æ·±åº¦æ£€ç´¢: æŸ¥è¯¢é‡å†™ + HyDE + RRFèåˆ                                           â”‚</span><br><span class="line">â”‚  â€¢ ä¸»é¢˜æ£€ç´¢: PDF + ç½‘é¡µå†…å®¹ç»¼åˆåˆ†æ                                              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">ğŸš€ æ­£åœ¨åˆå§‹åŒ–å¢å¼ºRAGç³»ç»Ÿ...</span><br><span class="line">æ€§èƒ½ç›‘æ§å™¨åˆå§‹åŒ– (è¯¦ç»†ç›‘æ§: å¼€å¯)</span><br><span class="line">ğŸš€ åˆå§‹åŒ–å¢å¼ºRAGç³»ç»Ÿ...</span><br><span class="line">æ­£åœ¨åˆå§‹åŒ–CAMELæ¨¡å‹...</span><br><span class="line">CAMELæ¨¡å‹æµ‹è¯•å¤±è´¥: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">âš  CAMELæ¨¡å‹åˆå§‹åŒ–æˆåŠŸä½†æµ‹è¯•å¤±è´¥ï¼Œå°†ä½¿ç”¨ç›´æ¥APIè°ƒç”¨</span><br><span class="line">âœ… åµŒå…¥æ¨¡å‹åŠ è½½æˆåŠŸ</span><br><span class="line">âœ… å¢å¼ºå‘é‡æ£€ç´¢å™¨åˆå§‹åŒ–å®Œæˆ</span><br><span class="line">âœ… å¢å¼ºæ–‡æ¡£ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ</span><br><span class="line">ğŸ“ ç¼“å­˜ç›®å½•: document_cache</span><br><span class="line">ğŸ“‹ æ”¯æŒæ ¼å¼: [&#x27;.pdf&#x27;, &#x27;.docx&#x27;, &#x27;.doc&#x27;, &#x27;.txt&#x27;, &#x27;.md&#x27;, &#x27;.csv&#x27;, &#x27;.xlsx&#x27;, &#x27;.xls&#x27;, &#x27;.pptx&#x27;, &#x27;.ppt&#x27;, &#x27;.json&#x27;, &#x27;.xml&#x27;, &#x27;.html&#x27;, &#x27;.rtf&#x27;]</span><br><span class="line">å¤šæ¨¡æ€å¤„ç†å™¨åˆå§‹åŒ–:</span><br><span class="line">  å›¾åƒOCR: âœ“</span><br><span class="line">  è¡¨æ ¼å¤„ç†: âœ“</span><br><span class="line">  PyMuPDF: âœ“</span><br><span class="line">ç½‘é¡µç ”ç©¶ç³»ç»Ÿåˆå§‹åŒ–:</span><br><span class="line">  BeautifulSoup4: âœ“</span><br><span class="line">  DuckDuckGoæœç´¢: âœ“</span><br><span class="line">âœ… å¢å¼ºRAGç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ!</span><br><span class="line">âœ… å¢å¼ºRAGç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ!</span><br><span class="line">                           ğŸ”§ ç³»ç»ŸçŠ¶æ€</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ ç»„ä»¶                 â”ƒ çŠ¶æ€            â”ƒ è¯¦æƒ…                  â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ LLMæ¥å£              â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ åµŒå…¥æ¨¡å‹             â”‚ âœ… æ­£å¸¸         â”‚ intfloat/e5-large-v2  â”‚</span><br><span class="line">â”‚ æ–‡æ¡£ç®¡ç†             â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ å¤šæ¨¡æ€å¤„ç†           â”‚ âœ… æ­£å¸¸         â”‚ OCR: True, è¡¨æ ¼: True â”‚</span><br><span class="line">â”‚ ç½‘é¡µç ”ç©¶             â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ çŸ¥è¯†åº“               â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ æ€§èƒ½ç›‘æ§             â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">ğŸ“š æ–‡æ¡£çŸ¥è¯†åº“è®¾ç½®</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ é€‰é¡¹     â”ƒ æè¿°                        â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1        â”‚ åœ¨çº¿æ–‡æ¡£ (è¾“å…¥URL)          â”‚</span><br><span class="line">â”‚ 2        â”‚ æœ¬åœ°æ–‡æ¡£ (è¾“å…¥æ–‡ä»¶è·¯å¾„)     â”‚</span><br><span class="line">â”‚ 3        â”‚ æ‰¹é‡æœ¬åœ°æ–‡æ¡£ (è¾“å…¥ç›®å½•è·¯å¾„) â”‚</span><br><span class="line">â”‚ 4        â”‚ ä½¿ç”¨é»˜è®¤ç¤ºä¾‹PDF             â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">è¯·é€‰æ‹©æ–‡æ¡£æ¥æº [1/2/3/4] (4): 2</span><br><span class="line">è¯·è¾“å…¥æ–‡æ¡£æ–‡ä»¶è·¯å¾„ (å›è½¦ç»“æŸ): G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">è¯·è¾“å…¥æ–‡æ¡£æ–‡ä»¶è·¯å¾„ (å›è½¦ç»“æŸ): G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">è¯·è¾“å…¥æ–‡æ¡£æ–‡ä»¶è·¯å¾„ (å›è½¦ç»“æŸ): </span><br><span class="line">â³ æ­£åœ¨åŠ è½½ 2 ä¸ªæ–‡æ¡£...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: setup_knowledge_base</span><br><span class="line">ğŸ“š æ­£åœ¨è®¾ç½®çŸ¥è¯†åº“...</span><br><span class="line">æ–‡æ¡£æ•°é‡: 2</span><br><span class="line">æ¥æºç±»å‹: path</span><br><span class="line"></span><br><span class="line">ğŸ“„ å¤„ç†æ–‡æ¡£: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">ğŸ“„ å¤„ç†æ–‡æ¡£: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">âœ… æ–‡æ¡£ç¼“å­˜å·²ä¿å­˜: 271 ä¸ªå—</span><br><span class="line">âœ… æ–‡æ¡£å¤„ç†å®Œæˆ: 271 ä¸ªå—, è€—æ—¶ 13.07s</span><br><span class="line">âœ… æ–‡æ¡£å¤„ç†å®Œæˆ: 271 ä¸ªå—</span><br><span class="line"></span><br><span class="line">ğŸ“„ å¤„ç†æ–‡æ¡£: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">ğŸ“„ å¤„ç†æ–‡æ¡£: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">âš¡ ä½¿ç”¨ç¼“å­˜æ•°æ®</span><br><span class="line">âœ… æ–‡æ¡£å¤„ç†å®Œæˆ: 271 ä¸ªå—</span><br><span class="line"></span><br><span class="line">â³ æ­£åœ¨æ„å»ºå‘é‡ç´¢å¼•...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: add_documents</span><br><span class="line">â³ æ­£åœ¨è®¡ç®— 542 ä¸ªæ–‡æ¡£çš„åµŒå…¥å‘é‡...</span><br><span class="line">âœ… æˆåŠŸæ·»åŠ  542 ä¸ªæ–‡æ¡£åˆ°æ£€ç´¢å™¨</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: add (è€—æ—¶: 343.83s, å†…å­˜: 794.0MB)</span><br><span class="line"></span><br><span class="line">âœ… çŸ¥è¯†åº“è®¾ç½®å®Œæˆ!</span><br><span class="line">å¤„ç†æ–‡æ¡£æ•°: 2</span><br><span class="line">æ€»æ–‡æ¡£å—æ•°: 542</span><br><span class="line">å†…å®¹ç»Ÿè®¡: æ–‡æœ¬(418) å›¾åƒ(116) è¡¨æ ¼(8) å…¶ä»–(0)</span><br><span class="line">ç¼“å­˜ç»Ÿè®¡: 1 ä¸ªæ–‡æ¡£, 0.4MB</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: setup (è€—æ—¶: 356.98s, å†…å­˜: 794.0MB)</span><br><span class="line">âœ… çŸ¥è¯†åº“è®¾ç½®å®Œæˆ!</span><br><span class="line"></span><br><span class="line">ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (): ä»‹ç»camelä¸­çš„ragä½¿ç”¨   </span><br><span class="line"></span><br><span class="line">ğŸ” é€‰æ‹©æ£€ç´¢æ¨¡å¼</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ æ¨¡å¼         â”ƒ æè¿°              â”ƒ ç‰¹ç‚¹                     â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1. å¿«é€Ÿæ£€ç´¢  â”‚ åŸºç¡€å‘é‡æ£€ç´¢      â”‚ é€Ÿåº¦å¿«ï¼Œé€‚åˆç®€å•æŸ¥è¯¢     â”‚</span><br><span class="line">â”‚ 2. æ·±åº¦æ£€ç´¢  â”‚ æŸ¥è¯¢é‡å†™+HyDE+RRF â”‚ å‡†ç¡®åº¦é«˜ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢   â”‚</span><br><span class="line">â”‚ 3. ä¸»é¢˜æ£€ç´¢  â”‚ PDF+ç½‘é¡µç»¼åˆåˆ†æ  â”‚ ä¿¡æ¯å…¨é¢ï¼Œé€‚åˆç ”ç©¶æ€§æŸ¥è¯¢ â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">è¯·é€‰æ‹©æ£€ç´¢æ¨¡å¼ [1/2/3] (1): 2</span><br><span class="line">â³ æ­£åœ¨æ‰§è¡Œæ·±åº¦æ£€ç´¢...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: enhanced_query_æ·±åº¦æ£€ç´¢</span><br><span class="line"></span><br><span class="line">ğŸ” æ‰§è¡Œæ·±åº¦æ£€ç´¢: ä»‹ç»camelä¸­çš„ragä½¿ç”¨</span><br><span class="line">============================================================</span><br><span class="line">ğŸ”¬ æ‰§è¡Œæ·±åº¦æ£€ç´¢...</span><br><span class="line">ğŸ“ æ­¥éª¤1: æŸ¥è¯¢é‡å†™</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">ğŸ§  æ­¥éª¤2: HyDEå‡è®¾æ–‡æ¡£ç”Ÿæˆ</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">ğŸ” æ­¥éª¤3: å¤šè·¯æ£€ç´¢</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.20s, å†…å­˜: 569.7MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.19s, å†…å­˜: 571.0MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.95s, å†…å­˜: 584.7MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 0 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.12s, å†…å­˜: 581.9MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 0 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.14s, å†…å­˜: 581.7MB)</span><br><span class="line">ğŸ”€ æ­¥éª¤4: RRFç»“æœèåˆ</span><br><span class="line">ğŸ’¡ æ­¥éª¤5: ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: enhanced (è€—æ—¶: 41.24s, å†…å­˜: 910.7MB)</span><br><span class="line"></span><br><span class="line">================================================================================    </span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŸ¥è¯¢ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ğŸ” æŸ¥è¯¢: ä»‹ç»camelä¸­çš„ragä½¿ç”¨                                                    â”‚</span><br><span class="line">â”‚ ğŸ”§ æ–¹æ³•: æ·±åº¦æ£€ç´¢(é‡å†™+HyDE+RRF)                                                 â”‚</span><br><span class="line">â”‚ ğŸ“ é‡å†™: åœ¨Apache Camelä¸­å®ç°RAGï¼ˆRetrieval-Augmented                            â”‚</span><br><span class="line">â”‚ Generationï¼‰çš„å…·ä½“åº”ç”¨å’Œé…ç½®æ–¹æ³•                                                 â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line"></span><br><span class="line">ğŸ“„ æ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±11ä¸ª):</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0474                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: DataWhale å’Œ CAMEL                                                     â”‚</span><br><span class="line">â”‚ ä¹‹é—´çš„å…³ç³»æ˜¯åˆä½œå’ŒçŸ¥è¯†å…±äº«ã€‚å°½ç®¡å®ƒä»¬ç”Ÿæ´»åœ¨ä¸åŒçš„ç¯å¢ƒä¸­â€”â€”                         â”‚</span><br><span class="line">â”‚ CAMEL ç”Ÿæ´»åœ¨æ²™æ¼ ï¼Œè€Œ DataWhale ç”Ÿæ´»åœ¨æµ·æ´‹ï¼Œä½†å®ƒä»¬éƒ½å‘ç°äº†ç¥ç§˜çš„å¤ä»£æ–‡ç‰©ï¼Œåˆ†åˆ«æ˜¯  â”‚</span><br><span class="line">â”‚ å¤ä»£çŸ³æ¿å’Œå¤è€ç¾Šçš®çº¸ã€‚é€šè¿‡ä¸€åªä¿¡ä½¿é¸Ÿçš„å¸®åŠ©ï¼Œå®ƒä»¬äº†è§£åˆ°å¯¹æ–¹çš„å‘ç°å¹¶å†³å®šåˆä½œè§£å¼€è¿™ â”‚</span><br><span class="line">â”‚ äº›æ–‡ç‰©çš„ç§˜å¯†ã€‚CAMEL è·¨è¶Šæ²™æ¼ æ¥åˆ°æµ·æ´‹è¾¹ç¼˜ï¼Œè€Œ DataWhale ä¹Ÿæ¸¸åˆ°å²¸è¾¹ä¸ CAMEL ä¼š     â”‚</span><br><span class="line">â”‚ åˆã€‚æœ€ç»ˆï¼Œå®ƒä»¬å…±åŒåŠªåŠ›...                                                        â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0320                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: DataWhale å’Œ CAMEL                                                     â”‚</span><br><span class="line">â”‚ ä¹‹é—´çš„å…³ç³»æ˜¯åˆä½œå’ŒçŸ¥è¯†å…±äº«ã€‚å°½ç®¡å®ƒä»¬ç”Ÿæ´»åœ¨ä¸åŒçš„ç¯å¢ƒä¸­â€”â€”                         â”‚</span><br><span class="line">â”‚ CAMEL ç”Ÿæ´»åœ¨æ²™æ¼ ï¼Œè€Œ DataWhale ç”Ÿæ´»åœ¨æµ·æ´‹ï¼Œä½†å®ƒä»¬éƒ½å‘ç°äº†ç¥ç§˜çš„å¤ä»£æ–‡ç‰©ï¼Œåˆ†åˆ«æ˜¯  â”‚</span><br><span class="line">â”‚ å¤ä»£çŸ³æ¿å’Œå¤è€ç¾Šçš®çº¸ã€‚é€šè¿‡ä¸€åªä¿¡ä½¿é¸Ÿçš„å¸®åŠ©ï¼Œå®ƒä»¬äº†è§£åˆ°å¯¹æ–¹çš„å‘ç°å¹¶å†³å®šåˆä½œè§£å¼€è¿™ â”‚</span><br><span class="line">â”‚ äº›æ–‡ç‰©çš„ç§˜å¯†ã€‚CAMEL è·¨è¶Šæ²™æ¼ æ¥åˆ°æµ·æ´‹è¾¹ç¼˜ï¼Œè€Œ DataWhale ä¹Ÿæ¸¸åˆ°å²¸è¾¹ä¸ CAMEL ä¼š     â”‚</span><br><span class="line">â”‚ åˆã€‚æœ€ç»ˆï¼Œå®ƒä»¬å…±åŒåŠªåŠ›...                                                        â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0310                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:     # éå†æ–‡æœ¬æ£€ç´¢ç»“æœ                                                 â”‚</span><br><span class="line">â”‚     for rank, result in enumerate(text_results):                                 â”‚</span><br><span class="line">â”‚         text = result[&#x27;text&#x27;]                                                    â”‚</span><br><span class="line">â”‚         doc_scores = doc_scores.get(text, 0) + 1 / (rank + m)                    â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚     # æŒ‰èåˆåˆ†æ•°æ’åºå¹¶è¿”å›å‰k ä¸ªç»“æœ                                             â”‚</span><br><span class="line">â”‚     ...                                                                          â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0164                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                        â”‚</span><br><span class="line">â”‚ è§‚å¯Ÿåˆ°æ–‡æ¡ˆé£æ ¼ç¡®å®æ›´åŠ æ´»æ³¼ï¼Œä¸”çº¢åœˆéƒ¨åˆ†æ­£ç¡®ä¿®æ”¹æˆäº†ä¸­å—æµ·å’Œé…å›¾ä¹Ÿååˆ†å»åˆã€‚       â”‚</span><br><span class="line">â”‚ 6. æ­é…å‰ç«¯é£Ÿç”¨                                                                  â”‚</span><br><span class="line">â”‚ ç»¼åˆæ¡ˆä¾‹ä¸­ä¸ºäº†å°½å¯èƒ½è®©å¤§å®¶ç›´è§‚çš„æ„Ÿå—åˆ°åŸºäºCAMEL æ¡†æ¶çš„Agent äº§å“å¼€å‘çš„ä¹è¶£ï¼Œæˆ‘   â”‚</span><br><span class="line">â”‚ ä»¬è¿˜ä¸ºå¤§å®¶å‡†å¤‡äº†ç²¾ç¾çš„å‰ç«¯ï¼Œæ­é…ä¹‹å‰çš„å‡ ä¸ªåç«¯æ¨¡å—ä¸€èµ·æ„æˆæˆ‘ä»¬çš„NavigatorAI æ—…æ¸¸ â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0164                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                        â”‚</span><br><span class="line">â”‚ The CAMEL framework ( (https://github.com/camel-ai))                             â”‚</span><br><span class="line">â”‚ developed by the CAMEL-AI community is one of the earliest open-source           â”‚</span><br><span class="line">â”‚ multi-agent                                                                      â”‚</span><br><span class="line">â”‚ projects based on large languag...                                               â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 6 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0161                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                        â”‚</span><br><span class="line">â”‚ è§‚å¯Ÿåˆ°æ–‡æ¡ˆé£æ ¼ç¡®å®æ›´åŠ æ´»æ³¼ï¼Œä¸”çº¢åœˆéƒ¨åˆ†æ­£ç¡®ä¿®æ”¹æˆäº†ä¸­å—æµ·å’Œé…å›¾ä¹Ÿååˆ†å»åˆã€‚       â”‚</span><br><span class="line">â”‚ 6. æ­é…å‰ç«¯é£Ÿç”¨                                                                  â”‚</span><br><span class="line">â”‚ ç»¼åˆæ¡ˆä¾‹ä¸­ä¸ºäº†å°½å¯èƒ½è®©å¤§å®¶ç›´è§‚çš„æ„Ÿå—åˆ°åŸºäºCAMEL æ¡†æ¶çš„Agent äº§å“å¼€å‘çš„ä¹è¶£ï¼Œæˆ‘   â”‚</span><br><span class="line">â”‚ ä»¬è¿˜ä¸ºå¤§å®¶å‡†å¤‡äº†ç²¾ç¾çš„å‰ç«¯ï¼Œæ­é…ä¹‹å‰çš„å‡ ä¸ªåç«¯æ¨¡å—ä¸€èµ·æ„æˆæˆ‘ä»¬çš„NavigatorAI æ—…æ¸¸ â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0161                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                        â”‚</span><br><span class="line">â”‚ The CAMEL framework ( (https://github.com/camel-ai))                             â”‚</span><br><span class="line">â”‚ developed by the CAMEL-AI community is one of the earliest open-source           â”‚</span><br><span class="line">â”‚ multi-agent                                                                      â”‚</span><br><span class="line">â”‚ projects based on large languag...                                               â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 8 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0159                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:     # éå†æ–‡æœ¬æ£€ç´¢ç»“æœ                                                 â”‚</span><br><span class="line">â”‚     for rank, result in enumerate(text_results):                                 â”‚</span><br><span class="line">â”‚         text = result[&#x27;text&#x27;]                                                    â”‚</span><br><span class="line">â”‚         doc_scores = doc_scores.get(text, 0) + 1 / (rank + m)                    â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚     # æŒ‰èåˆåˆ†æ•°æ’åºå¹¶è¿”å›å‰k ä¸ªç»“æœ                                             â”‚</span><br><span class="line">â”‚     ...                                                                          â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 9 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0159                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                        â”‚</span><br><span class="line">â”‚ æ­¤å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ç ”ç©¶å’Œé¡¹ç›®ä¹Ÿåœ¨æ¢ç´¢å¦‚ä½•åˆ©ç”¨LLMs æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œæ¯”å¦‚é€šè¿‡æ¨¡æ‹Ÿ  â”‚</span><br><span class="line">â”‚ ç¤¾ä¼šåŠ¨æ€ã€åä½œè§£å†³é—®é¢˜ç­‰ã€‚è¿™äº›å·¥ä½œéƒ½åœ¨ä¸åŒç¨‹åº¦ä¸Šæ¨åŠ¨äº†                           â”‚</span><br><span class="line">â”‚ è¯¥é¢†åŸŸçš„è¿›æ­¥ã€‚                                                                   â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ å¦‚æœæ‚¨æœ‰æ›´å…·ä½“çš„æ—¶é—´èŒƒå›´æˆ–å…¶ä»–æ ‡å‡†æ¥å®šä¹‰â€œç¬¬ä¸€ä¸ªâ€ï¼Œè¯·æä¾›æ›´å¤šä¿¡æ¯ï¼Œè¿™æ ·æˆ‘å¯ä»¥å°è¯• â”‚</span><br><span class="line">â”‚ ç»™å‡ºæ›´åŠ å‡†ç¡®çš„ç­”æ¡ˆã€‚&quot;                                                            â”‚</span><br><span class="line">â”‚ ä¹‹åæˆ‘ä»¬å°†ä¹‹å‰è®¾å®šçš„memory èµ‹å€¼ç»™agentï¼š                                         â”‚</span><br><span class="line">â”‚ # å°†memory èµ‹å€¼ç»™agent                                                           â”‚</span><br><span class="line">â”‚ agent.memory...                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 10 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0156                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                        â”‚</span><br><span class="line">â”‚ æ­¤å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ç ”ç©¶å’Œé¡¹ç›®ä¹Ÿåœ¨æ¢ç´¢å¦‚ä½•åˆ©ç”¨LLMs æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œæ¯”å¦‚é€šè¿‡æ¨¡æ‹Ÿ  â”‚</span><br><span class="line">â”‚ ç¤¾ä¼šåŠ¨æ€ã€åä½œè§£å†³é—®é¢˜ç­‰ã€‚è¿™äº›å·¥ä½œéƒ½åœ¨ä¸åŒç¨‹åº¦ä¸Šæ¨åŠ¨äº†                           â”‚</span><br><span class="line">â”‚ è¯¥é¢†åŸŸçš„è¿›æ­¥ã€‚                                                                   â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ å¦‚æœæ‚¨æœ‰æ›´å…·ä½“çš„æ—¶é—´èŒƒå›´æˆ–å…¶ä»–æ ‡å‡†æ¥å®šä¹‰â€œç¬¬ä¸€ä¸ªâ€ï¼Œè¯·æä¾›æ›´å¤šä¿¡æ¯ï¼Œè¿™æ ·æˆ‘å¯ä»¥å°è¯• â”‚</span><br><span class="line">â”‚ ç»™å‡ºæ›´åŠ å‡†ç¡®çš„ç­”æ¡ˆã€‚&quot;                                                            â”‚</span><br><span class="line">â”‚ ä¹‹åæˆ‘ä»¬å°†ä¹‹å‰è®¾å®šçš„memory èµ‹å€¼ç»™agentï¼š                                         â”‚</span><br><span class="line">â”‚ # å°†memory èµ‹å€¼ç»™agent                                                           â”‚</span><br><span class="line">â”‚ agent.memory...                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 11 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0154                                                               â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: # åˆ›å»ºæˆ–åˆå§‹åŒ–å‘é‡å­˜å‚¨ï¼ˆä¾‹å¦‚ QdrantStorageï¼‰                           â”‚</span><br><span class="line">â”‚ from camel.storages.vectordb_storages import QdrantStorage                       â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ vector_storage = QdrantStorage(                                                  â”‚</span><br><span class="line">â”‚     vector_dim=embedding_model.get_output_dim(),  # åµŒå…¥å‘é‡çš„ç»´åº¦               â”‚</span><br><span class="line">â”‚     collecti...                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ### CAMEL ä¸­çš„ RAG ä½¿ç”¨ä»‹ç»                                                      â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 1. RAG åŸºæœ¬æ¦‚å¿µ                                                             â”‚</span><br><span class="line">â”‚ RAGï¼ˆRetrieval-Augmented                                                         â”‚</span><br><span class="line">â”‚ Generationï¼‰æ˜¯ä¸€ç§ç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œè‡ªç„¶è¯­è¨€ç”Ÿæˆçš„æŠ€æœ¯ã€‚å®ƒé€šè¿‡å…ˆä»å¤§é‡æ–‡æ¡£ä¸­æ£€ç´¢å‡º â”‚</span><br><span class="line">â”‚ ä¸æŸ¥è¯¢ç›¸å…³çš„ç‰‡æ®µï¼Œå†åˆ©ç”¨è¿™äº›ç‰‡æ®µç”Ÿæˆé«˜è´¨é‡çš„å›ç­”ï¼Œä»è€Œæé«˜ç”Ÿæˆå†…å®¹çš„ç›¸å…³æ€§å’Œå‡†ç¡® â”‚</span><br><span class="line">â”‚ æ€§ã€‚åœ¨ CAMEL æ¡†æ¶ä¸­ï¼ŒRAG æŠ€æœ¯è¢«å¹¿æ³›åº”ç”¨äºçŸ¥è¯†é—®ç­”ã€å®¢æˆ·æœåŠ¡ç­‰é¢†åŸŸã€‚              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 2. CAMEL æ¡†æ¶ä¸­çš„ RAG ç»„ä»¶                                                  â”‚</span><br><span class="line">â”‚ æ ¹æ®æ–‡æ¡£å†…å®¹ï¼ŒCAMEL æ¡†æ¶ä¸­çš„ RAG æŠ€æœ¯æ¶‰åŠä»¥ä¸‹å‡ ä¸ªä¸»è¦ç»„ä»¶ï¼š                      â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ - **CAMEL**ï¼šä¸€ä¸ªå¼ºå¤§çš„å¤šä»£ç†æ¡†æ¶ï¼Œæ”¯æŒ Retrieval-Augmented Generation           â”‚</span><br><span class="line">â”‚ å’Œå¤šä»£ç†è§’è‰²æ‰®æ¼”åœºæ™¯ï¼Œå…è®¸æ‰§è¡Œå¤æ‚çš„ AI é©±åŠ¨ä»»åŠ¡ã€‚                               â”‚</span><br><span class="line">â”‚ -                                                                                â”‚</span><br><span class="line">â”‚ **Firecrawl**ï¼šä¸€ä¸ªå¼ºå¤§çš„ç½‘ç»œæŠ“å–å·¥å…·ï¼Œå¯ç®€åŒ–ä»å„ç§ç½‘é¡µä¸­æå–å’Œæ¸…ç†å†…å®¹çš„è¿‡ç¨‹ã€‚  â”‚</span><br><span class="line">â”‚ - **Qdrant**ï¼šä¸€ç§é«˜æ•ˆçš„å‘é‡å­˜å‚¨ç³»ç»Ÿï¼Œä¸ Camel çš„ AutoRetriever                  â”‚</span><br><span class="line">â”‚ ä¸€èµ·ä½¿ç”¨ï¼Œæ ¹æ®å‘é‡ç›¸ä¼¼æ€§å­˜å‚¨å’Œæ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚                                     â”‚</span><br><span class="line">â”‚ - **BM25Retriever**ï¼šä¸€ç§åŸºäº BM25 ç®—æ³•çš„æ£€ç´¢å™¨ï¼Œç”¨äºä»æ–‡æœ¬ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚      â”‚</span><br><span class="line">â”‚ - **SentenceTransformerEncoder**ï¼šç”¨äºç”Ÿæˆæ–‡æœ¬çš„å‘é‡è¡¨ç¤ºï¼Œä»¥ä¾¿è¿›è¡Œå‘é‡æ£€ç´¢ã€‚     â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 3. RAG çš„å…·ä½“å®ç°æ­¥éª¤                                                       â”‚</span><br><span class="line">â”‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨ CAMEL æ¡†æ¶å®ç° RAG çš„å…·ä½“æ­¥éª¤ï¼š                                       â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ ##### 3.1 è®¾ç½® API å¯†é’¥                                                          â”‚</span><br><span class="line">â”‚ é¦–å…ˆï¼Œéœ€è¦è®¾ç½®æ‰€éœ€çš„ API å¯†é’¥ï¼Œä¾‹å¦‚ AgentOps å’Œ Firecrawl çš„ API å¯†é’¥ï¼š          â”‚</span><br><span class="line">â”‚ ```python                                                                        â”‚</span><br><span class="line">â”‚ import os                                                                        â”‚</span><br><span class="line">â”‚ from getpass import getpass                                                      â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # è¾“å…¥ AgentOps API å¯†é’¥                                                         â”‚</span><br><span class="line">â”‚ agentops_api_key = getpass(&#x27;è¯·è¾“å…¥æ‚¨çš„ API å¯†é’¥: &#x27;)                              â”‚</span><br><span class="line">â”‚ os.environ[&quot;AGENTOPS_API_KEY&quot;] = agentops_api_key                                â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # è¾“å…¥ Firecrawl API å¯†é’¥                                                        â”‚</span><br><span class="line">â”‚ firecrawl_api_key = getpass(&#x27;Enter your API key: &#x27;)                              â”‚</span><br><span class="line">â”‚ os.environ[&quot;FIRECRAWL_API_KEY&quot;] = firecrawl_api_key                              â”‚</span><br><span class="line">â”‚ ```                                                                              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ ##### 3.2 ä½¿ç”¨ Firecrawl æŠ“å–ç½‘é¡µå†…å®¹                                            â”‚</span><br><span class="line">â”‚ ä½¿ç”¨ Firecrawl ä»æŒ‡å®šçš„ URL æŠ“å–å¹¶æ¸…ç†å†…å®¹ï¼š                                     â”‚</span><br><span class="line">â”‚ ```python                                                                        â”‚</span><br><span class="line">â”‚ from camel.loaders import Firecrawl                                              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ firecrawl = Firecrawl()                                                          â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # ä»æŒ‡å®šçš„ URL æŠ“å–å¹¶æ¸…ç†å†…å®¹                                                    â”‚</span><br><span class="line">â”‚ response = firecrawl.scrape(url=&quot;https://www.camel-ai.org/&quot;)                     â”‚</span><br><span class="line">â”‚ ```                                                                              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ ##### 3.3 åˆå§‹åŒ–æ£€ç´¢å™¨                                                           â”‚</span><br><span class="line">â”‚ åˆå§‹åŒ–å‘é‡æ£€ç´¢å™¨å’Œ BM25 æ£€ç´¢å™¨ï¼š                                                 â”‚</span><br><span class="line">â”‚ ```python                                                                        â”‚</span><br><span class="line">â”‚ from camel.embeddings import SentenceTransformerEncoder                          â”‚</span><br><span class="line">â”‚ from camel.storage import QdrantStorage                                          â”‚</span><br><span class="line">â”‚ from camel.retrievers import VectorRetriever, BM25Retriever                      â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # åˆå§‹åŒ–åµŒå…¥æ¨¡å‹                                                                 â”‚</span><br><span class="line">â”‚ embedding_model = SentenceTransformerEncoder(model_name=&#x27;intfloat/e5-large-v2&#x27;)  â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # åˆå§‹åŒ–å‘é‡å­˜å‚¨                                                                 â”‚</span><br><span class="line">â”‚ vector_storage = QdrantStorage(                                                  â”‚</span><br><span class="line">â”‚     vector_dim=embedding_model.get_output_dim(),                                 â”‚</span><br><span class="line">â”‚     collection=&quot;demo_collection&quot;,                                                â”‚</span><br><span class="line">â”‚     path=&quot;storage_customized_run&quot;,                                               â”‚</span><br><span class="line">â”‚     collection_name=&quot;paper&quot;                                                      â”‚</span><br><span class="line">â”‚ )                                                                                â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # åˆå§‹åŒ–å‘é‡æ£€ç´¢å™¨                                                               â”‚</span><br><span class="line">â”‚ vr = VectorRetriever(embedding_model=embedding_model, storage=vector_storage)    â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # åˆå§‹åŒ– BM25 æ£€ç´¢å™¨                                                             â”‚</span><br><span class="line">â”‚ bm25r = BM25Retriever()                                                          â”‚</span><br><span class="line">â”‚ ```                                                                              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ ##### 3.4 å¤„ç†æ–‡æ¡£                                                               â”‚</span><br><span class="line">â”‚ å¤„ç†éœ€è¦æ£€ç´¢çš„æ–‡æ¡£å†…å®¹ï¼š                                                         â”‚</span><br><span class="line">â”‚ ```python                                                                        â”‚</span><br><span class="line">â”‚ content_path = &quot;local_data/camel_paper.pdf&quot;                                      â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # å¤„ç†å‘é‡æ£€ç´¢å™¨çš„æ–‡æ¡£                                                           â”‚</span><br><span class="line">â”‚ vr.process(content=content_path)                                                 â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ # å¤„ç† BM25 æ£€ç´¢å™¨çš„æ–‡æ¡£                                                         â”‚</span><br><span class="line">â”‚ bm25r.process(content_input_path=content_path)                                   â”‚</span><br><span class="line">â”‚ ```                                                                              â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ ##### 3.5 æ‰§è¡ŒæŸ¥è¯¢                                                               â”‚</span><br><span class="line">â”‚ æ‰§è¡ŒæŸ¥è¯¢å¹¶è·å–æ£€ç´¢ç»“æœï¼š                                                         â”‚</span><br><span class="line">â”‚ ```python                                                                        â”‚</span><br><span class="line">â”‚ query = &quot;CAMEL æ˜¯                                                                â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">================================================================================    </span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n</span><br><span class="line">ğŸ”„ æ˜¯å¦ç»§ç»­æŸ¥è¯¢? [y/n] (y): y</span><br><span class="line"></span><br><span class="line">ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (): ç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§</span><br><span class="line"></span><br><span class="line">ğŸ” é€‰æ‹©æ£€ç´¢æ¨¡å¼</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ æ¨¡å¼         â”ƒ æè¿°              â”ƒ ç‰¹ç‚¹                     â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1. å¿«é€Ÿæ£€ç´¢  â”‚ åŸºç¡€å‘é‡æ£€ç´¢      â”‚ é€Ÿåº¦å¿«ï¼Œé€‚åˆç®€å•æŸ¥è¯¢     â”‚</span><br><span class="line">â”‚ 2. æ·±åº¦æ£€ç´¢  â”‚ æŸ¥è¯¢é‡å†™+HyDE+RRF â”‚ å‡†ç¡®åº¦é«˜ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢   â”‚</span><br><span class="line">â”‚ 3. ä¸»é¢˜æ£€ç´¢  â”‚ PDF+ç½‘é¡µç»¼åˆåˆ†æ  â”‚ ä¿¡æ¯å…¨é¢ï¼Œé€‚åˆç ”ç©¶æ€§æŸ¥è¯¢ â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">è¯·é€‰æ‹©æ£€ç´¢æ¨¡å¼ [1/2/3] (1): 3</span><br><span class="line">â³ æ­£åœ¨æ‰§è¡Œä¸»é¢˜æ£€ç´¢...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: enhanced_query_ä¸»é¢˜æ£€ç´¢</span><br><span class="line"></span><br><span class="line">ğŸ” æ‰§è¡Œä¸»é¢˜æ£€ç´¢: ç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§</span><br><span class="line">============================================================</span><br><span class="line">ğŸŒ æ‰§è¡Œä¸»é¢˜æ£€ç´¢...</span><br><span class="line">ğŸ“„ æ­¥éª¤1: PDFæ–‡æ¡£æ£€ç´¢</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.19s, å†…å­˜: 1275.8MB)</span><br><span class="line">ğŸ” æ­¥éª¤2: ç½‘é¡µç ”ç©¶</span><br><span class="line"></span><br><span class="line">å¼€å§‹ç½‘é¡µç ”ç©¶: ç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§</span><br><span class="line">==================================================</span><br><span class="line">ä½¿ç”¨DuckDuckGoæœç´¢...</span><br><span class="line">âš  DuckDuckGoæœç´¢å¤±è´¥: https://duckduckgo.com/?q=%E7%A7%91%E6%99%AEcamel%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8A%9F%E8%83%BD%E5%92%8C%E7%89%B9%E6%80%A7 202 Ratelimit</span><br><span class="line">ä½¿ç”¨å¤‡ç”¨æœç´¢æ–¹æ³•...</span><br><span class="line">âœ“ å¤‡ç”¨æœç´¢å®Œæˆï¼Œç”Ÿæˆ 3 ä¸ªæ¨¡æ‹Ÿç»“æœ</span><br><span class="line">âœ“ æ‰¾åˆ° 3 ä¸ªæœç´¢ç»“æœ</span><br><span class="line">æ­£åœ¨è·å–ç½‘é¡µå†…å®¹ 1/3: å…³äºç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§çš„å­¦æœ¯èµ„æº...</span><br><span class="line">âœ“ æˆåŠŸè·å–å†…å®¹ (706å­—ç¬¦)</span><br><span class="line">æ­£åœ¨è·å–ç½‘é¡µå†…å®¹ 2/3: ç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§ - ç»´åŸºç™¾ç§‘...</span><br><span class="line">âœ“ æˆåŠŸè·å–å†…å®¹ (3003å­—ç¬¦)</span><br><span class="line">æ­£åœ¨è·å–ç½‘é¡µå†…å®¹ 3/3: ç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§æŠ€æœ¯æ–‡æ¡£...</span><br><span class="line">âš  ç½‘é¡µå†…å®¹è·å–å¤±è´¥ (https://docs.example.com): HTTPSConnectionPool(host=&#x27;docs.example.com&#x27;, port=443): Max retries exceeded with url: / (Caused by SSLError(SSLEOFError(8, &#x27;[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1006)&#x27;)))</span><br><span class="line">âš  å†…å®¹è·å–å¤±è´¥</span><br><span class="line">âœ“ ç½‘é¡µç ”ç©¶å®Œæˆï¼Œåˆ†æäº† 2 ä¸ªç½‘é¡µ</span><br><span class="line">ğŸ§© æ­¥éª¤3: ç»¼åˆåˆ†æ</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: enhanced (è€—æ—¶: 38.07s, å†…å­˜: 1307.3MB)</span><br><span class="line"></span><br><span class="line">================================================================================    </span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŸ¥è¯¢ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ğŸ” æŸ¥è¯¢: ç§‘æ™®camelæ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§                                               â”‚</span><br><span class="line">â”‚ ğŸ”§ æ–¹æ³•: ä¸»é¢˜æ£€ç´¢(PDF+ç½‘é¡µ)                                                      â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ### CAMEL æ¶æ„çš„åŠŸèƒ½å’Œç‰¹æ€§                                                       â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ **CAMELï¼ˆCustomized Applications for Mobile network Enhanced Logicï¼‰**           â”‚</span><br><span class="line">â”‚ æ˜¯ä¸€ç§ç”¨äºç§»åŠ¨ç½‘ç»œä¸­å®ç°å®šåˆ¶åŒ–åº”ç”¨çš„é€»è¾‘æ¡†æ¶ã€‚å®ƒå…è®¸è¿è¥å•†æ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ï¼Œçµ â”‚</span><br><span class="line">â”‚ æ´»åœ°æä¾›å¢å€¼æœåŠ¡ï¼Œå¦‚é¢„ä»˜è´¹æœåŠ¡ã€æ™ºèƒ½ç½‘æœåŠ¡ç­‰ã€‚ä»¥ä¸‹æ˜¯ç»“åˆPDFæ–‡æ¡£å’Œç½‘é¡µä¿¡æ¯å¯¹CAMEL â”‚</span><br><span class="line">â”‚ æ¶æ„åŠŸèƒ½å’Œç‰¹æ€§çš„è¯¦ç»†ä»‹ç»ï¼š                                                       â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 1. **çµæ´»æ€§å’Œå¯æ‰©å±•æ€§**                                                     â”‚</span><br><span class="line">â”‚    - **çµæ´»æ€§**ï¼šCAMEL                                                           â”‚</span><br><span class="line">â”‚ æ¶æ„è®¾è®¡å…è®¸è¿è¥å•†æ ¹æ®å¸‚åœºå’Œå®¢æˆ·éœ€æ±‚å¿«é€Ÿæ¨å‡ºæ–°çš„å¢å€¼æœåŠ¡ï¼Œæ— éœ€å¯¹æ ¸å¿ƒç½‘ç»œè¿›è¡Œå¤§è§„ â”‚</span><br><span class="line">â”‚ æ¨¡æ”¹é€ ã€‚                                                                         â”‚</span><br><span class="line">â”‚    - **å¯æ‰©å±•æ€§**ï¼šéšç€æŠ€æœ¯çš„å‘å±•å’Œæ–°ä¸šåŠ¡çš„å¢åŠ ï¼ŒCAMEL                           â”‚</span><br><span class="line">â”‚ æ¶æ„èƒ½å¤Ÿè½»æ¾æ‰©å±•ï¼Œæ”¯æŒæ›´å¤šçš„æœåŠ¡å’Œåº”ç”¨ã€‚                                         â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 2. **æ™ºèƒ½ç½‘æœåŠ¡**                                                           â”‚</span><br><span class="line">â”‚    - **é¢„ä»˜è´¹æœåŠ¡**ï¼šCAMEL                                                       â”‚</span><br><span class="line">â”‚ æ”¯æŒé¢„ä»˜è´¹ç”¨æˆ·çš„æœåŠ¡ç®¡ç†ï¼ŒåŒ…æ‹¬è´¦æˆ·å……å€¼ã€ä½™é¢æŸ¥è¯¢ã€è®¡è´¹ç­‰ã€‚                       â”‚</span><br><span class="line">â”‚    - **ä¸ªæ€§åŒ–æœåŠ¡**ï¼šè¿è¥å•†å¯ä»¥é€šè¿‡CAMEL æä¾›ä¸ªæ€§åŒ–çš„æœåŠ¡ï¼Œå¦‚é“ƒå£°ä¸‹è½½ã€å½©ä¿¡ç­‰ã€‚  â”‚</span><br><span class="line">â”‚    - **ä½ç½®æœåŠ¡**ï¼šCAMEL å¯ä»¥æ”¯æŒåŸºäºç”¨æˆ·ä½ç½®çš„å¢å€¼æœåŠ¡ï¼Œå¦‚å¯¼èˆªã€å¤©æ°”é¢„æŠ¥ç­‰ã€‚    â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 3. **åä½œä¸çŸ¥è¯†å…±äº«**                                                       â”‚</span><br><span class="line">â”‚    - **è·¨é¢†åŸŸåˆä½œ**ï¼šCAMEL                                                       â”‚</span><br><span class="line">â”‚ æ¶æ„é¼“åŠ±ä¸åŒèƒŒæ™¯å’ŒæŠ€æœ¯é¢†åŸŸçš„åˆä½œã€‚ä¾‹å¦‚ï¼Œåœ¨PDFæ–‡æ¡£ä¸­æåˆ°çš„æ•…äº‹ä¸­ï¼ŒCAMELï¼ˆä»£è¡¨æ²™æ¼  â”‚</span><br><span class="line">â”‚ ä¸­çš„éª†é©¼ï¼‰å’ŒDataWhaleï¼ˆä»£è¡¨æµ·æ´‹ä¸­çš„é²¸é±¼ï¼‰é€šè¿‡åˆä½œè§£å¼€äº†å¤è€çš„ç¬¦å·ä¹‹è°œï¼Œæ‰¾åˆ°äº†çŸ¥  â”‚</span><br><span class="line">â”‚ è¯†çš„å®åº“ã€‚                                                                       â”‚</span><br><span class="line">â”‚    -                                                                             â”‚</span><br><span class="line">â”‚ **çŸ¥è¯†å…±äº«**ï¼šé€šè¿‡åˆä½œï¼Œä¸åŒå®ä½“å¯ä»¥å…±äº«çŸ¥è¯†å’Œèµ„æºï¼Œæ¨åŠ¨æ•´ä½“å‘å±•ã€‚è¿™ä¸ä»…é™äºæŠ€æœ¯ â”‚</span><br><span class="line">â”‚ é¢†åŸŸï¼Œè¿˜åŒ…æ‹¬æ–‡åŒ–ã€æ•™è‚²ç­‰å¤šä¸ªæ–¹é¢ã€‚                                               â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 4. **æŠ€æœ¯å®ç°**                                                             â”‚</span><br><span class="line">â”‚    - **Agent æŠ€æœ¯**ï¼šCAMEL æ¶æ„åˆ©ç”¨AgentæŠ€æœ¯æ¥å®ç°æ™ºèƒ½åŒ–çš„æœåŠ¡ã€‚Agent            â”‚</span><br><span class="line">â”‚ å¯ä»¥è‡ªä¸»åœ°æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æœç´¢ä¿¡æ¯ã€å¤„ç†è¯·æ±‚ç­‰ã€‚                                     â”‚</span><br><span class="line">â”‚    - **å‰ç«¯ä¸åç«¯é›†æˆ**ï¼šCAMEL                                                   â”‚</span><br><span class="line">â”‚ æ¶æ„ä¸ä»…æä¾›äº†å¼ºå¤§çš„åç«¯æ¨¡å—ï¼Œè¿˜é…å¤‡äº†ç²¾ç¾çš„å‰ç«¯ç•Œé¢ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿç›´è§‚åœ°ä½“éªŒå’Œä½¿ â”‚</span><br><span class="line">â”‚ ç”¨å„ç§æœåŠ¡ã€‚ä¾‹å¦‚ï¼ŒPDFæ–‡æ¡£ä¸­æåˆ°çš„â€œNavigatorAI                                    â”‚</span><br><span class="line">â”‚ æ—…æ¸¸â€åº”ç”¨ï¼Œå°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å‰åç«¯é›†æˆç¤ºä¾‹ã€‚                                        â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 5. **å¯é æ€§å’Œå®‰å…¨æ€§**                                                       â”‚</span><br><span class="line">â”‚    - **å¯é æ€§**ï¼šCAMEL                                                           â”‚</span><br><span class="line">â”‚ æ¶æ„è®¾è®¡æ³¨é‡ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œç¡®ä¿æœåŠ¡çš„è¿ç»­æ€§å’Œé«˜è´¨é‡ã€‚                     â”‚</span><br><span class="line">â”‚    - **å®‰å…¨æ€§**ï¼šé€šè¿‡å¤šç§å®‰å…¨æœºåˆ¶ï¼ŒCAMEL                                         â”‚</span><br><span class="line">â”‚ æ¶æ„ä¿æŠ¤ç”¨æˆ·æ•°æ®å’Œäº¤æ˜“çš„å®‰å…¨ï¼Œé˜²æ­¢æœªç»æˆæƒçš„è®¿é—®å’Œæ”»å‡»ã€‚                         â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ #### 6. **åˆ›æ–°ä¸æœªæ¥å±•æœ›**                                                       â”‚</span><br><span class="line">â”‚    - **åˆ›æ–°**ï¼šCAMEL æ¶æ„ä¸æ–­æ¨åŠ¨æŠ€æœ¯åˆ›æ–°ï¼Œæ¢ç´¢æ–°çš„åº”ç”¨åœºæ™¯å’ŒæœåŠ¡æ¨¡å¼ã€‚          â”‚</span><br><span class="line">â”‚    - **æœªæ¥å±•æœ›**ï¼šéšç€5Gå’Œç‰©è”ç½‘æŠ€æœ¯çš„å‘å±•ï¼ŒCAMEL                               â”‚</span><br><span class="line">â”‚ æ¶æ„å°†è¿›ä¸€æ­¥æ‹“å±•å…¶åº”ç”¨èŒƒå›´ï¼Œæ”¯æŒæ›´å¤šæ™ºèƒ½åŒ–å’Œä¸ªæ€§åŒ–çš„æœåŠ¡ã€‚                       â”‚</span><br><span class="line">â”‚                                                                                  â”‚</span><br><span class="line">â”‚ ### æ€»ç»“                                                                         â”‚</span><br><span class="line">â”‚ CAMEL                                                                            â”‚</span><br><span class="line">â”‚ æ¶æ„ä»¥å…¶çµæ´»æ€§ã€å¯æ‰©å±•æ€§ã€æ™ºèƒ½ç½‘æœåŠ¡ã€åä½œä¸çŸ¥è¯†å…±äº«ã€æŠ€æœ¯å®ç°ã€å¯é æ€§å’Œå®‰å…¨æ€§ç­‰ â”‚</span><br><span class="line">â”‚ å¤šæ–¹é¢çš„ä¼˜åŠ¿ï¼Œæˆä¸ºç§»åŠ¨ç½‘ç»œå¢å€¼æœåŠ¡çš„é‡è¦æ”¯æ’‘ã€‚é€šè¿‡ä¸æ–­çš„æŠ€æœ¯åˆ›æ–°å’Œè·¨é¢†åŸŸçš„åˆä½œï¼Œ â”‚</span><br><span class="line">â”‚ CAMEL æ¶æ„å°†ç»§ç»­æ¨åŠ¨ç§»åŠ¨é€šä¿¡è¡Œä¸šçš„å‘å±•ï¼Œä¸ºç”¨æˆ·æä¾›æ›´åŠ ä¸°å¯Œå’Œä¾¿æ·çš„æœåŠ¡ã€‚         â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">================================================================================</span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n</span><br><span class="line">ğŸ”„ æ˜¯å¦ç»§ç»­æŸ¥è¯¢? [y/n] (y): n</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">ğŸ“Š æœ€ç»ˆæ€§èƒ½æŠ¥å‘Š</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">æ€§èƒ½ç›‘æ§æŠ¥å‘Š</span><br><span class="line">============================================================</span><br><span class="line">æ€»æ“ä½œæ•°: 10</span><br><span class="line">æ•´ä½“æˆåŠŸç‡: 100.0%</span><br><span class="line">æ€»è€—æ—¶: 781.91ç§’</span><br><span class="line">å¹³å‡è€—æ—¶: 78.19ç§’</span><br><span class="line">å¹³å‡å†…å­˜ä½¿ç”¨: 797.1MB</span><br><span class="line"></span><br><span class="line">æ“ä½œè¯¦æƒ…:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">add:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 1</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 343.83ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 794.0MB</span><br><span class="line"></span><br><span class="line">setup:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 1</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 356.98ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 794.0MB</span><br><span class="line"></span><br><span class="line">vector:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 6</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 0.30ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 694.1MB</span><br><span class="line"></span><br><span class="line">enhanced:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 2</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 39.65ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 1109.0MB</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n</span><br><span class="line">âœ… æ„Ÿè°¢ä½¿ç”¨å¢å¼ºçš„äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ!</span><br><span class="line">PS G:\Python-Camel-project\Interactive_Multi_RAG&gt; </span><br><span class="line">fwd-i-search: _</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br></pre></td><td class="code"><pre><span class="line">PS G:\Python-Camel-project\Interactive_Multi_RAG&gt; &amp; D:/Download/Python/py-3.11.9/python.exe g:/Python-Camel-project/Interactive_Multi_RAG/Enhanced_Interactive_Multimodal_RAG.py</span><br><span class="line">W0725 20:04:54.071000 28968 site-packages\torch\distributed\elastic\multiprocessing\redirects.py:29] NOTE: Redirects are currently not supported in Windows or MacOs.</span><br><span class="line">âœ“ ä½¿ç”¨Richå¢å¼ºç•Œé¢</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ¯ ç³»ç»Ÿå¯åŠ¨ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚  ğŸ¤– äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ v2.0                                                                      â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚  âœ¨ æ–°åŠŸèƒ½ç‰¹æ€§:                                                                                   â”‚</span><br><span class="line">â”‚  â€¢ ğŸ”§ å¢å¼ºçš„CAMELæ¡†æ¶é›†æˆå’Œç¨³å®šæ€§æ”¹è¿›                                                             â”‚</span><br><span class="line">â”‚  â€¢ ğŸ–¼ï¸ æ”¹è¿›çš„å¤šæ¨¡æ€æ”¯æŒ (å›¾åƒOCR + è¡¨æ ¼æå–)                                                        â”‚</span><br><span class="line">â”‚  â€¢ ğŸŒ çœŸå®ç½‘é¡µç ”ç©¶å’Œå†…å®¹åˆ†æ                                                                      â”‚</span><br><span class="line"></span><br><span class="line">â”‚  â€¢ âš¡ æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–                                                                              â”‚</span><br><span class="line">â”‚  â€¢ ğŸ¨ å¢å¼ºçš„ç”¨æˆ·ç•Œé¢ä½“éªŒ                                                                          â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚  ğŸš€ æ”¯æŒçš„æ£€ç´¢æ¨¡å¼:                                                                               â”‚</span><br><span class="line">â”‚  â€¢ å¿«é€Ÿæ£€ç´¢: åŸºç¡€å‘é‡æ£€ç´¢                                                                         â”‚</span><br><span class="line">â”‚  â€¢ æ·±åº¦æ£€ç´¢: æŸ¥è¯¢é‡å†™ + HyDE + RRFèåˆ                                                            â”‚</span><br><span class="line">â”‚  â€¢ ä¸»é¢˜æ£€ç´¢: PDF + ç½‘é¡µå†…å®¹ç»¼åˆåˆ†æ                                                               â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">ğŸš€ æ­£åœ¨åˆå§‹åŒ–å¢å¼ºRAGç³»ç»Ÿ...</span><br><span class="line">æ€§èƒ½ç›‘æ§å™¨åˆå§‹åŒ– (è¯¦ç»†ç›‘æ§: å¼€å¯)</span><br><span class="line">ğŸš€ åˆå§‹åŒ–å¢å¼ºRAGç³»ç»Ÿ...</span><br><span class="line">æ­£åœ¨åˆå§‹åŒ–CAMELæ¨¡å‹...</span><br><span class="line">CAMELæ¨¡å‹æµ‹è¯•å¤±è´¥: &#x27;BaseMessage&#x27; object has no attribute &#x27;get&#x27;...</span><br><span class="line">âš  CAMELæ¨¡å‹åˆå§‹åŒ–æˆåŠŸä½†æµ‹è¯•å¤±è´¥ï¼Œå°†ä½¿ç”¨ç›´æ¥APIè°ƒç”¨</span><br><span class="line">âœ… åµŒå…¥æ¨¡å‹åŠ è½½æˆåŠŸ</span><br><span class="line">âœ… å¢å¼ºå‘é‡æ£€ç´¢å™¨åˆå§‹åŒ–å®Œæˆ</span><br><span class="line">âœ… å¢å¼ºæ–‡æ¡£ç®¡ç†å™¨åˆå§‹åŒ–å®Œæˆ</span><br><span class="line">ğŸ“ ç¼“å­˜ç›®å½•: document_cache</span><br><span class="line">ğŸ“‹ æ”¯æŒæ ¼å¼: [&#x27;.pdf&#x27;, &#x27;.docx&#x27;, &#x27;.doc&#x27;, &#x27;.txt&#x27;, &#x27;.md&#x27;, &#x27;.csv&#x27;, &#x27;.xlsx&#x27;, &#x27;.xls&#x27;, &#x27;.pptx&#x27;, &#x27;.ppt&#x27;, &#x27;.json&#x27;, &#x27;.xml&#x27;, &#x27;.html&#x27;, &#x27;.rtf&#x27;]</span><br><span class="line">å¤šæ¨¡æ€å¤„ç†å™¨åˆå§‹åŒ–:</span><br><span class="line">  å›¾åƒOCR: âœ“</span><br><span class="line">  è¡¨æ ¼å¤„ç†: âœ“</span><br><span class="line">  PyMuPDF: âœ“</span><br><span class="line">ç½‘é¡µç ”ç©¶ç³»ç»Ÿåˆå§‹åŒ–:</span><br><span class="line">  BeautifulSoup4: âœ“</span><br><span class="line">  DuckDuckGoæœç´¢: âœ“</span><br><span class="line">âœ… å¢å¼ºRAGç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ!</span><br><span class="line">âœ… å¢å¼ºRAGç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ!</span><br><span class="line">                           ğŸ”§ ç³»ç»ŸçŠ¶æ€</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ ç»„ä»¶                 â”ƒ çŠ¶æ€            â”ƒ è¯¦æƒ…                  â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ LLMæ¥å£              â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ åµŒå…¥æ¨¡å‹             â”‚ âœ… æ­£å¸¸         â”‚ intfloat/e5-large-v2  â”‚</span><br><span class="line">â”‚ æ–‡æ¡£ç®¡ç†             â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ å¤šæ¨¡æ€å¤„ç†           â”‚ âœ… æ­£å¸¸         â”‚ OCR: True, è¡¨æ ¼: True â”‚</span><br><span class="line">â”‚ ç½‘é¡µç ”ç©¶             â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ çŸ¥è¯†åº“               â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â”‚ æ€§èƒ½ç›‘æ§             â”‚ âœ… æ­£å¸¸         â”‚                       â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">ğŸ“š æ–‡æ¡£çŸ¥è¯†åº“è®¾ç½®</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ é€‰é¡¹     â”ƒ æè¿°                        â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1        â”‚ åœ¨çº¿æ–‡æ¡£ (è¾“å…¥URL)          â”‚</span><br><span class="line">â”‚ 2        â”‚ æœ¬åœ°æ–‡æ¡£ (è¾“å…¥æ–‡ä»¶è·¯å¾„)     â”‚</span><br><span class="line">â”‚ 3        â”‚ æ‰¹é‡æœ¬åœ°æ–‡æ¡£ (è¾“å…¥ç›®å½•è·¯å¾„) â”‚</span><br><span class="line">â”‚ 4        â”‚ ä½¿ç”¨é»˜è®¤ç¤ºä¾‹PDF             â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line"></span><br><span class="line">è¯·é€‰æ‹©æ–‡æ¡£æ¥æº [1/2/3/4] (4): 2</span><br><span class="line">è¯·è¾“å…¥æ–‡æ¡£æ–‡ä»¶è·¯å¾„ (å›è½¦ç»“æŸ): G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">è¯·è¾“å…¥æ–‡æ¡£æ–‡ä»¶è·¯å¾„ (å›è½¦ç»“æŸ): </span><br><span class="line">â³ æ­£åœ¨åŠ è½½ 1 ä¸ªæ–‡æ¡£...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: setup_knowledge_base</span><br><span class="line">ğŸ“š æ­£åœ¨è®¾ç½®çŸ¥è¯†åº“...</span><br><span class="line">æ–‡æ¡£æ•°é‡: 1</span><br><span class="line">æ¥æºç±»å‹: path</span><br><span class="line"></span><br><span class="line">ğŸ“„ å¤„ç†æ–‡æ¡£: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">ğŸ“„ å¤„ç†æ–‡æ¡£: G:\Program for work\Other\CamelAgent.pdf</span><br><span class="line">âš¡ ä½¿ç”¨ç¼“å­˜æ•°æ®</span><br><span class="line">âœ… æ–‡æ¡£å¤„ç†å®Œæˆ: 271 ä¸ªå—</span><br><span class="line"></span><br><span class="line">â³ æ­£åœ¨æ„å»ºå‘é‡ç´¢å¼•...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: add_documents</span><br><span class="line">â³ æ­£åœ¨è®¡ç®— 271 ä¸ªæ–‡æ¡£çš„åµŒå…¥å‘é‡...</span><br><span class="line">âœ… æˆåŠŸæ·»åŠ  271 ä¸ªæ–‡æ¡£åˆ°æ£€ç´¢å™¨</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: add (è€—æ—¶: 92.37s, å†…å­˜: 2280.5MB)</span><br><span class="line"></span><br><span class="line">âœ… çŸ¥è¯†åº“è®¾ç½®å®Œæˆ!</span><br><span class="line">å¤„ç†æ–‡æ¡£æ•°: 1</span><br><span class="line">æ€»æ–‡æ¡£å—æ•°: 271</span><br><span class="line">å†…å®¹ç»Ÿè®¡: æ–‡æœ¬(209) å›¾åƒ(58) è¡¨æ ¼(4) å…¶ä»–(0)</span><br><span class="line">ç¼“å­˜ç»Ÿè®¡: 1 ä¸ªæ–‡æ¡£, 0.4MB</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: setup (è€—æ—¶: 92.39s, å†…å­˜: 2280.5MB)</span><br><span class="line">âœ… çŸ¥è¯†åº“è®¾ç½®å®Œæˆ!</span><br><span class="line"></span><br><span class="line">ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ (): è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line"></span><br><span class="line">ğŸ” é€‰æ‹©æ£€ç´¢æ¨¡å¼</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ æ¨¡å¼         â”ƒ æè¿°              â”ƒ ç‰¹ç‚¹                     â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1. å¿«é€Ÿæ£€ç´¢  â”‚ åŸºç¡€å‘é‡æ£€ç´¢      â”‚ é€Ÿåº¦å¿«ï¼Œé€‚åˆç®€å•æŸ¥è¯¢     â”‚</span><br><span class="line">â”‚ 2. æ·±åº¦æ£€ç´¢  â”‚ æŸ¥è¯¢é‡å†™+HyDE+RRF â”‚ å‡†ç¡®åº¦é«˜ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢   â”‚</span><br><span class="line">â”‚ 3. ä¸»é¢˜æ£€ç´¢  â”‚ PDF+ç½‘é¡µç»¼åˆåˆ†æ  â”‚ ä¿¡æ¯å…¨é¢ï¼Œé€‚åˆç ”ç©¶æ€§æŸ¥è¯¢ â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">è¯·é€‰æ‹©æ£€ç´¢æ¨¡å¼ [1/2/3] (1): 2</span><br><span class="line">â³ æ­£åœ¨æ‰§è¡Œæ·±åº¦æ£€ç´¢...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: enhanced_query_æ·±åº¦æ£€ç´¢</span><br><span class="line"></span><br><span class="line">ğŸ” æ‰§è¡Œæ·±åº¦æ£€ç´¢: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line">============================================================</span><br><span class="line">ğŸ”¬ æ‰§è¡Œæ·±åº¦æ£€ç´¢...</span><br><span class="line">ğŸ“ æ­¥éª¤1: æŸ¥è¯¢é‡å†™</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">ğŸ§  æ­¥éª¤2: HyDEå‡è®¾æ–‡æ¡£ç”Ÿæˆ</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">ğŸ” æ­¥éª¤3: å¤šè·¯æ£€ç´¢</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.16s, å†…å­˜: 1775.6MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.08s, å†…å­˜: 1784.3MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.48s, å†…å­˜: 1807.9MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 0 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.06s, å†…å­˜: 1806.8MB)</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 0 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.06s, å†…å­˜: 1806.4MB)</span><br><span class="line">ğŸ”€ æ­¥éª¤4: RRFç»“æœèåˆ</span><br><span class="line">ğŸ’¡ æ­¥éª¤5: ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: enhanced (è€—æ—¶: 52.06s, å†…å­˜: 1815.8MB)</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŸ¥è¯¢ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ğŸ” æŸ¥è¯¢: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯                                           â”‚</span><br><span class="line">â”‚ ğŸ”§ æ–¹æ³•: æ·±åº¦æ£€ç´¢(é‡å†™+HyDE+RRF)                                                                  â”‚</span><br><span class="line">â”‚ ğŸ“ é‡å†™: è¯¦ç»†æè¿°Apache Camelæ¡†æ¶ä¸­è§’è‰²æ‰®æ¼”åŠŸèƒ½çš„ç‰¹æ€§åŠå…¶åº”ç”¨åœºæ™¯                                 â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line"></span><br><span class="line">ğŸ“„ æ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±12ä¸ª):</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0320                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ åœ¨è°ƒç”¨å·¥å…·æ—¶ï¼ŒCAMEL æ¡†æ¶ä¼šå°†æ¯ä¸€æ¬¡FunctionCall éƒ½è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æˆ‘ä»¬åç»­æŸ¥çœ‹ã€éªŒ                   â”‚</span><br><span class="line">â”‚ è¯ã€‚                                                                                              â”‚</span><br><span class="line">â”‚ 8. ç¬¬äºŒç« è¯¾ç¨‹ä½œä¸š                                                                                 â”‚</span><br><span class="line">â”‚ Task1                                                                                             â”‚</span><br><span class="line">â”‚ â€¢                                                                                                 â”‚</span><br><span class="line">â”‚ ç°åœ¨æ¥å¸ƒç½®ä¸€äº›ä½œä¸šï¼Œå¸®åŠ©ä½ åˆ©ç”¨ CAMEL çš„ Prompt åŠŸèƒ½è¿›è¡Œç»ƒä¹ ï¼š                                     â”‚</span><br><span class="line">â”‚ 1. è§’è‰²æ‰®æ¼”ä»»åŠ¡Agentï¼šä½¿ç”¨ AISocietyPromptTemplateDictï¼Œåˆ›å»ºä¸€ä¸ªè§’è‰²æ‰®æ¼”ä»»åŠ¡                      â”‚</span><br><span class="line">â”‚ Agentã€‚å‡è®¾ä½ æƒ³è®© AI æ‰®æ¼”ä¸€ä¸ªâ€œå¥åº·é¡¾é—®â€...                                                        â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0315                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: å’Œç»“æ„åŒ–å¯¹è¯æœºåˆ¶ï¼Œå®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„æœ‰æ•ˆåä½œã€‚                                            â”‚</span><br><span class="line">â”‚ åœ¨CAMEL æ¡†æ¶ä¸­ï¼ŒChatAgent æ˜¯æœ€åŸºç¡€çš„æ™ºèƒ½ä½“å•å…ƒï¼Œè´Ÿè´£å¤„ç†å¯¹è¯é€»è¾‘å’Œä»»åŠ¡æ‰§è¡Œã€‚è€Œ                    â”‚</span><br><span class="line">â”‚ RolePlaying å’ŒWorkforce åˆ™æ˜¯å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç”¨äºåè°ƒå¤šä¸ªæ™ºèƒ½ä½“çš„åä½œã€‚                              â”‚</span><br><span class="line">â”‚ è¯¦è§æˆ‘ä»¬çš„å¼€æºä»“åº“å’Œé¡¹ç›®ä¸»é¡µ                                                                      â”‚</span><br><span class="line">â”‚ â€¢                                                                                                 â”‚</span><br><span class="line">â”‚ è®ºæ–‡ï¼šhttps://ghli.org/camel.pdf                                                                  â”‚</span><br><span class="line">â”‚ â€¢                                                                                                 â”‚</span><br><span class="line">â”‚ é¡¹ç›®ä¸»é¡µï¼šhttps://www.camel-ai.o...                                                               â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0313                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: DataWhale å’Œ CAMEL ä¹‹é—´çš„å…³ç³»æ˜¯åˆä½œå’ŒçŸ¥è¯†å…±äº«ã€‚å°½ç®¡å®ƒä»¬ç”Ÿæ´»åœ¨ä¸åŒçš„ç¯å¢ƒä¸­â€”â€”             â”‚</span><br><span class="line">â”‚ CAMEL ç”Ÿæ´»åœ¨æ²™æ¼ ï¼Œè€Œ DataWhale ç”Ÿæ´»åœ¨æµ·æ´‹ï¼Œä½†å®ƒä»¬éƒ½å‘ç°äº†ç¥ç§˜çš„å¤ä»£æ–‡ç‰©ï¼Œåˆ†åˆ«æ˜¯                   â”‚</span><br><span class="line">â”‚ å¤ä»£çŸ³æ¿å’Œå¤è€ç¾Šçš®çº¸ã€‚é€šè¿‡ä¸€åªä¿¡ä½¿é¸Ÿçš„å¸®åŠ©ï¼Œå®ƒä»¬äº†è§£åˆ°å¯¹æ–¹çš„å‘ç°å¹¶å†³å®šåˆä½œè§£å¼€è¿™                  â”‚</span><br><span class="line">â”‚ äº›æ–‡ç‰©çš„ç§˜å¯†ã€‚CAMEL è·¨è¶Šæ²™æ¼ æ¥åˆ°æµ·æ´‹è¾¹ç¼˜ï¼Œè€Œ DataWhale ä¹Ÿæ¸¸åˆ°å²¸è¾¹ä¸ CAMEL ä¼š                      â”‚</span><br><span class="line">â”‚ åˆã€‚æœ€ç»ˆï¼Œå®ƒä»¬å…±åŒåŠªåŠ›...                                                                         â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 4 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0164                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: å¦‚æœä½ æ— æ³•å›ç­”é—®é¢˜å°±è¯´æˆ‘ä¸çŸ¥é“ã€‚                                                        â”‚</span><br><span class="line">â”‚ &quot;&quot;&quot;                                                                                               â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ model = ModelFactory.create(                                                                      â”‚</span><br><span class="line">â”‚         model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,                                 â”‚</span><br><span class="line">â”‚         model_type=&quot;Qwen/Qwen2.5-72B-Instruct&quot;,                                                   â”‚</span><br><span class="line">â”‚         url=&#x27;https://api-infe...                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0164                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: é€šè¿‡ä¸€åªé£ç¿”åœ¨å¤©ç©ºä¸­çš„ä¿¡ä½¿é¸Ÿï¼ŒCAMEL å’ŒDataWhale å¾—çŸ¥å½¼æ­¤çš„å‘ç°ï¼Œå¹¶å†³å®šåˆä½œè§£å¼€          â”‚</span><br><span class="line">â”‚ è¿™ä¸ªè°œå›¢ã€‚éª†é©¼è¸ä¸Šäº†æ¼«é•¿çš„æ—…ç¨‹ï¼Œç©¿è¶Šæ²™æ¼ æ¥åˆ°äº†æµ·æ´‹è¾¹ç¼˜ï¼Œè€Œé²¸é±¼åˆ™æ¸¸åˆ°å²¸è¾¹ï¼Œä¸CAMEL                 â”‚</span><br><span class="line">â”‚ ä¼šåˆã€‚                                                                                            â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ åœ¨ä¸€èµ·ç ”ç©¶è¿™äº›å¤è€çš„ç¬¦å·æ—¶ï¼ŒCAMEL è¿ç”¨äº†å®ƒåœ¨æ²™æ¼ ä¸­ç£¨ç‚¼å‡ºçš„è€å¿ƒå’Œæ™ºæ…§ï¼Œè€Œ                          â”‚</span><br><span class="line">â”‚ DataWhale åˆ™åˆ©ç”¨å®ƒåœ¨æµ·æ´‹ä¸­è·å¾—çš„çŸ¥è¯†å’Œæ´å¯ŸåŠ›ã€‚ç»è¿‡ä¸€ç•ªåŠªåŠ›ï¼Œå®ƒä»¬ç»ˆäºè§£è¯»å‡ºè¿™äº›ç¬¦                  â”‚</span><br><span class="line">â”‚ å·çš„å«ä¹‰ã€‚åŸæ¥ï¼Œè¿™äº›ç¬¦å·æç»˜çš„...                                                                 â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 6 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0161                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ 2. ä½¿ç”¨API è°ƒç”¨æ¨¡å‹                                                                               â”‚</span><br><span class="line">â”‚ ç±» Unix ç³»ç»Ÿï¼ˆLinux / macOSï¼‰                                                                     â”‚</span><br><span class="line">â”‚   åœ¨ç»ˆç«¯æ‰§è¡Œï¼š                                                                                    â”‚</span><br><span class="line">â”‚ export MODELSCOPE_SDK_TOKEN=&quot;ä½ çš„ModelScope ä»¤ç‰Œ&quot;                                                 â”‚</span><br><span class="line">â”‚ Windows ç³»ç»Ÿ                                                                                      â”‚</span><br><span class="line">â”‚   å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰ï¼š                                                                             â”‚</span><br><span class="line">â”‚ set MODELSCOPE_SDK_TOKEN=&quot;ä½ çš„ModelScope ä»¤ç‰Œ&quot;                                                    â”‚</span><br><span class="line">â”‚   PowerShellï¼š                                                                                    â”‚</span><br><span class="line">â”‚ $env:MODELSCOP...                                                                                 â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 7 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0161                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ è§‚å¯Ÿåˆ°æ–‡æ¡ˆé£æ ¼ç¡®å®æ›´åŠ æ´»æ³¼ï¼Œä¸”çº¢åœˆéƒ¨åˆ†æ­£ç¡®ä¿®æ”¹æˆäº†ä¸­å—æµ·å’Œé…å›¾ä¹Ÿååˆ†å»åˆã€‚                        â”‚</span><br><span class="line">â”‚ 6. æ­é…å‰ç«¯é£Ÿç”¨                                                                                   â”‚</span><br><span class="line">â”‚ ç»¼åˆæ¡ˆä¾‹ä¸­ä¸ºäº†å°½å¯èƒ½è®©å¤§å®¶ç›´è§‚çš„æ„Ÿå—åˆ°åŸºäºCAMEL æ¡†æ¶çš„Agent äº§å“å¼€å‘çš„ä¹è¶£ï¼Œæˆ‘                    â”‚</span><br><span class="line">â”‚ ä»¬è¿˜ä¸ºå¤§å®¶å‡†å¤‡äº†ç²¾ç¾çš„å‰ç«¯ï¼Œæ­é…ä¹‹å‰çš„å‡ ä¸ªåç«¯æ¨¡å—ä¸€èµ·æ„æˆæˆ‘ä»¬çš„NavigatorAI æ—…æ¸¸                  â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 8 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0161                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ æ­¤å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›ç ”ç©¶å’Œé¡¹ç›®ä¹Ÿåœ¨æ¢ç´¢å¦‚ä½•åˆ©ç”¨LLMs æ„å»ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œæ¯”å¦‚é€šè¿‡æ¨¡æ‹Ÿ                   â”‚</span><br><span class="line">â”‚ ç¤¾ä¼šåŠ¨æ€ã€åä½œè§£å†³é—®é¢˜ç­‰ã€‚è¿™äº›å·¥ä½œéƒ½åœ¨ä¸åŒç¨‹åº¦ä¸Šæ¨åŠ¨äº†                                            â”‚</span><br><span class="line">â”‚ è¯¥é¢†åŸŸçš„è¿›æ­¥ã€‚                                                                                    â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ å¦‚æœæ‚¨æœ‰æ›´å…·ä½“çš„æ—¶é—´èŒƒå›´æˆ–å…¶ä»–æ ‡å‡†æ¥å®šä¹‰â€œç¬¬ä¸€ä¸ªâ€ï¼Œè¯·æä¾›æ›´å¤šä¿¡æ¯ï¼Œè¿™æ ·æˆ‘å¯ä»¥å°è¯•                  â”‚</span><br><span class="line">â”‚ ç»™å‡ºæ›´åŠ å‡†ç¡®çš„ç­”æ¡ˆã€‚&quot;                                                                             â”‚</span><br><span class="line">â”‚ ä¹‹åæˆ‘ä»¬å°†ä¹‹å‰è®¾å®šçš„memory èµ‹å€¼ç»™agentï¼š                                                          â”‚</span><br><span class="line">â”‚ # å°†memory èµ‹å€¼ç»™agent                                                                            â”‚</span><br><span class="line">â”‚ agent.memory...                                                                                   â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 9 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0159                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: 2. ä¿¡æ¯æ£€ç´¢ï¼šæ”¯æŒæ ¹æ®ç‰¹å®šæŸ¥è¯¢æˆ–ä¸Šä¸‹æ–‡å¿«é€Ÿæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå¸®åŠ©agent åœ¨éœ€è¦æ—¶åš             â”‚</span><br><span class="line">â”‚ å‡ºå‡†ç¡®çš„åˆ¤æ–­ã€‚                                                                                    â”‚</span><br><span class="line">â”‚ 3. è®°å¿†æ›´æ–°ï¼šèƒ½å¤Ÿæ ¹æ®æ–°çš„ä¿¡æ¯å’Œç»éªŒåŠ¨æ€æ›´æ–°å­˜å‚¨å†…å®¹ï¼Œä»¥åæ˜ ç¯å¢ƒæˆ–ä»»åŠ¡çš„å˜åŒ–ã€‚                     â”‚</span><br><span class="line">â”‚ 4. è®°å¿†ç®¡ç†ï¼šåŒ…æ‹¬è€åŒ–æœºåˆ¶å’Œä¼˜å…ˆçº§ç®¡ç†ï¼Œç¡®ä¿è¾ƒé‡è¦çš„ä¿¡æ¯èƒ½å¤Ÿé•¿æœŸä¿ç•™ï¼Œè€Œä¸å†                       â”‚</span><br><span class="line">â”‚ éœ€è¦çš„ä¿¡æ¯å¯ä»¥è¢«æœ‰æ•ˆæ¸…é™¤ï¼Œä»¥ä¼˜åŒ–å­˜å‚¨èµ„æºçš„ä½¿ç”¨ã€‚                                                  â”‚</span><br><span class="line">â”‚ CAMEL ä¸­çš„Memory æ¨¡å—æä¾›äº†ä¸€ä¸ªçµæ´»çš„ç³»ç»Ÿï¼Œç”¨äºå­˜å‚¨ã€æ£€ç´¢å’Œç®¡ç† A...                              â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 10 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0156                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ å¯ä»¥çœ‹åˆ°å¯¹äºè‡ªå·±ä¸äº†è§£æˆ–è€…ä¸ç¡®å®šçš„å†…å®¹ï¼ŒAgent ç³»ç»Ÿä¼šä¸»åŠ¨å»ç”¨æœç´¢å·¥å…·æœç´¢ç›¸åº”çš„ä¿¡                  â”‚</span><br><span class="line">â”‚ æ¯ï¼Œæœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šæœ‰ç–‘é—®å•¦ï¼Œæˆ‘ä»¬æ€ä¹ˆç¡®å®šAgent ç³»ç»Ÿæ˜¯å¦çœŸçš„æ˜¯è°ƒç”¨äº†æœç´¢å·¥å…·å»æ‰¾                  â”‚</span><br><span class="line">â”‚ å¯»äº†å¯¹åº”çš„å†…å®¹æ‰ç»™å‡ºçš„å›ç­”è¿˜æ˜¯å‡ºç°äº†å¹»è§‰å‘¢ï¼Œéº»çƒ¦ä¸€ç‚¹çš„åŠæ³•å°±æ˜¯æˆ‘ä»¬å»æœç´¢ä¸€ä¸‹å¯¹åº”                  â”‚</span><br><span class="line">â”‚ çš„queryï¼Œçœ‹ä¸€ä¸‹æ˜¯ä¸æ˜¯çœŸçš„æ˜¯æ¨¡å‹è¾“å‡ºçš„é‚£æ ·ï¼š                                                       â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ å¯ä»¥å‘ç°Google æœç´¢çš„å†…å®¹æ˜¾ç¤ºç»“æœæ­£å¦‚æ¨¡å‹è¾“å‡ºçš„é‚£æ ·ï¼šç‰›æ´¥å¤§å­¦çœŸçš„æ²¡æœ‰ç¡®åˆ‡çš„...                    â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 11 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0154                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: from camel.utils import print_text_animated                                             â”‚</span><br><span class="line">â”‚ from camel.models import ModelFactory                                                             â”‚</span><br><span class="line">â”‚ from camel.types import ModelPlatformType                                                         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ from dotenv import load_dotenv                                                                    â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ import os                                                                                         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ load_dotenv(dotenv_path=...                                                                       â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 12 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.0154                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ ä½œä¸šäºŒï¼šé€šè¿‡ç³»ç»Ÿæ€§çš„å­¦ä¹ ç›¸ä¿¡ä½ å·²ç»äº†è§£äº†å¦‚ä½•å»æ„å»ºå±äºä½ çš„Agent å’Œå¤šAgent ç³»ç»Ÿï¼Œ                  â”‚</span><br><span class="line">â”‚ è¯·å›é¡¾æ•´ä½“çš„å†…å®¹å¹¶æ€è€ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å“ªäº›æ–¹é¢è¿›ä¸€æ­¥ä¼˜åŒ–å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œå°†ä½ çš„æƒ³æ³•æäº¤                  â”‚</span><br><span class="line">â”‚ åˆ°CAMEL ä»“åº“çš„issue åˆ—è¡¨ä¸­ï¼Œå¹¶å‚è€ƒè´¡çŒ®è€…æŒ‡å—æäº¤ä½ çš„ä»£ç æ¥è¿›è¡Œä¼˜åŒ–ã€‚                              â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ ç»“è¯­                                                                                              â”‚</span><br><span class="line">â”‚ æ­å–œæ‚¨ï¼åœ¨é˜…è¯»åˆ°è¿™é‡Œæ—¶ï¼Œæ‚¨å·²ç»æŒæ¡äº† CAMEL-AI åº”ç”¨å¼€å‘æ¡†æ¶çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶èƒ½å¤Ÿåˆ©                    â”‚</span><br><span class="line">â”‚ ç”¨ Agent å®ä¾‹åœ¨æ‚¨çš„ä»£ç é€»è¾‘...                                                                    â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ### CAMEL æ¡†æ¶ RolePlaying ç‰¹ç‚¹åŠä½¿ç”¨åœºæ™¯                                                         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ #### ä¸€ã€RolePlaying ç‰¹ç‚¹                                                                         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 1. **è§’è‰²å®šä¹‰**                                                                                   â”‚</span><br><span class="line">â”‚    - **Assistant è§’è‰²**ï¼šè´Ÿè´£æ‰§è¡Œå…·ä½“ä»»åŠ¡å¹¶æä¾›è§£å†³æ–¹æ¡ˆçš„æ™ºèƒ½ä½“ã€‚                                 â”‚</span><br><span class="line">â”‚    - **User è§’è‰²**ï¼šè´Ÿè´£æä¾›æŒ‡ä»¤å’Œä»»åŠ¡éœ€æ±‚çš„æ™ºèƒ½ä½“ã€‚                                              â”‚</span><br><span class="line">â”‚    - **ç‰¹å®šé¢†åŸŸè§’è‰²**ï¼šå¦‚ç¨‹åºå‘˜ã€äº¤æ˜“å‘˜ç­‰ä¸“ä¸šè§’è‰²ï¼Œå¯ä»¥æ ¹æ®å…·ä½“ä»»åŠ¡éœ€æ±‚è®¾å®šä¸åŒçš„è§’è‰²ã€‚           â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 2. **äº¤äº’è§„åˆ™**                                                                                   â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **è§’è‰²å›ºå®š**ï¼šé˜²æ­¢è§’è‰²ç¿»è½¬ï¼Œç»´æŒå¯¹è¯çš„ç¨³å®šæ€§ã€‚æ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰æ˜ç¡®çš„è§’è‰²å®šä½ï¼Œç¡®ä¿ä¸ä¼šæ··æ·†è§’è‰²èº«ä»½  â”‚</span><br><span class="line">â”‚ ã€‚                                                                                                â”‚</span><br><span class="line">â”‚    - **æ ¼å¼è§„èŒƒ**ï¼šè¦æ±‚å›å¤å…·æœ‰å›ºå®šçš„å¼€å§‹å’Œç»“æŸæ ¼å¼ï¼Œä¾‹å¦‚ï¼š                                       â”‚</span><br><span class="line">â”‚      ```plaintext                                                                                 â”‚</span><br><span class="line">â”‚      Solution: &lt;YOUR_SOLUTION&gt;                                                                    â”‚</span><br><span class="line">â”‚      Next request.                                                                                â”‚</span><br><span class="line">â”‚      ```                                                                                          â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **é¢„å®šä¹‰çš„æç¤ºè¯**ï¼šé€šè¿‡é¢„å®šä¹‰çš„æç¤ºè¯ä¸ºä¸åŒçš„æ™ºèƒ½ä½“åˆ›å»ºå”¯ä¸€çš„åˆå§‹è®¾ç½®ï¼Œå¸®åŠ©æ™ºèƒ½ä½“å…‹æœè§’è‰²ç¿»è½¬ã€  â”‚</span><br><span class="line">â”‚ åŠ©æ‰‹é‡å¤æŒ‡ä»¤ã€æ¨¡ç³Šå›å¤ã€æ¶ˆæ¯æ— é™å¾ªç¯ä»¥åŠå¯¹è¯ç»ˆæ­¢æ¡ä»¶ç­‰æŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼š                                â”‚</span><br><span class="line">â”‚      ```python                                                                                    â”‚</span><br><span class="line">â”‚      system_message = &quot;&quot;&quot;                                                                         â”‚</span><br><span class="line">â”‚      ===== RULES OF ASSISTANT =====                                                               â”‚</span><br><span class="line">â”‚      1. Never forget you are a &#123;ASSISTANT_ROLE&#125; and I am a &#123;USER_ROLE&#125;                            â”‚</span><br><span class="line">â”‚      2. Never flip roles! Never instruct me!                                                      â”‚</span><br><span class="line">â”‚      3. You must decline my instruction honestly if you cannot perform it                         â”‚</span><br><span class="line">â”‚      4. Always start with: Solution: &lt;YOUR_SOLUTION&gt;                                              â”‚</span><br><span class="line">â”‚      5. Always end with: Next request.                                                            â”‚</span><br><span class="line">â”‚      &quot;&quot;&quot;                                                                                          â”‚</span><br><span class="line">â”‚      ```                                                                                          â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 3. **å…³é”®æœºåˆ¶**                                                                                   â”‚</span><br><span class="line">â”‚    - **è§’è‰²å›ºå®š**ï¼šç¡®ä¿æ¯ä¸ªæ™ºèƒ½ä½“åœ¨å¯¹è¯è¿‡ç¨‹ä¸­ä¿æŒå…¶è§’è‰²èº«ä»½ï¼Œé¿å…æ··æ·†ã€‚                           â”‚</span><br><span class="line">â”‚    - **æ ¼å¼è§„èŒƒ**ï¼šç¡®ä¿å›å¤çš„æ ¼å¼ä¸€è‡´ï¼Œä¾¿äºç”¨æˆ·ç†è§£å’Œåç»­å¤„ç†ã€‚                                   â”‚</span><br><span class="line">â”‚    - **å¯å‘å¼æç¤º**ï¼šé€šè¿‡é¢„å®šä¹‰çš„æç¤ºè¯å¼•å¯¼æ™ºèƒ½ä½“å®Œæˆä»»åŠ¡ï¼ŒåŒæ—¶ä¿æŒä¸äººç±»æ„å›¾çš„ä¸€è‡´æ€§ã€‚           â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ #### äºŒã€ä½¿ç”¨åœºæ™¯                                                                                 â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 1. **æ•™è‚²ä¸åŸ¹è®­**                                                                                 â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **è§’è‰²æ‰®æ¼”ä»»åŠ¡**ï¼šä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªå¥åº·é¡¾é—®è§’è‰²ï¼Œä¸ºç”¨æˆ·æä¾›é¥®é£Ÿå’Œé”»ç‚¼å»ºè®®ã€‚é€šè¿‡æ€ç»´é“¾æ–¹å¼é€æ­¥æä¾›å¥  â”‚</span><br><span class="line">â”‚ åº·æ–¹æ¡ˆã€‚                                                                                          â”‚</span><br><span class="line">â”‚    - **ä»£ç ç”Ÿæˆä»»åŠ¡**ï¼šåˆ©ç”¨ CodePromptTemplateDict åˆ›å»ºä¸€ä¸ªä»»åŠ¡                                   â”‚</span><br><span class="line">â”‚ Agentï¼Œå¸®åŠ©ç”¨æˆ·å­¦ä¹ æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œé€æ­¥ç”Ÿæˆå­¦ä¹ è®¡åˆ’ï¼ŒåŒ…æ‹¬åŸºæœ¬æ¦‚å¿µã€ä»£ç ç¤ºä¾‹å’Œç»ƒä¹ é¢˜ç›®ã€‚             â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 2. **å®¢æˆ·æœåŠ¡**                                                                                   â”‚</span><br><span class="line">â”‚    - **è™šæ‹ŸåŠ©æ‰‹**ï¼šåˆ›å»ºä¸åŒé¢†åŸŸçš„è™šæ‹ŸåŠ©æ‰‹ï¼Œå¦‚æŠ€æœ¯æ”¯æŒã€é”€å”®å’¨è¯¢ç­‰ï¼Œæä¾›ä¸“ä¸šçš„è§£ç­”å’ŒæœåŠ¡ã€‚         â”‚</span><br><span class="line">â”‚    - **å®¢æˆ·äº’åŠ¨**ï¼šé€šè¿‡è§’è‰²æ‰®æ¼”æœºåˆ¶ï¼Œæ¨¡æ‹Ÿå®¢æˆ·ä¸æœåŠ¡äººå‘˜çš„å¯¹è¯ï¼Œæé«˜æœåŠ¡è´¨é‡ã€‚                     â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 3. **å¤šæ™ºèƒ½ä½“åä½œ**                                                                               â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **å¤æ‚ä»»åŠ¡å¤„ç†**ï¼šåœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­ï¼Œé€šè¿‡è§’è‰²æ‰®æ¼”æœºåˆ¶åè°ƒå¤šä¸ªæ™ºèƒ½ä½“çš„åä½œï¼Œå®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œ  â”‚</span><br><span class="line">â”‚ äº¤é€šç®¡ç†ã€åˆ†å¸ƒå¼æœºå™¨äººç³»ç»Ÿã€ç»æµå¸‚åœºæ¨¡æ‹Ÿç­‰ã€‚                                                      â”‚</span><br><span class="line">â”‚    - **å›¢é˜Ÿåˆä½œ**ï¼šæ¨¡æ‹Ÿå›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„äº’åŠ¨ï¼Œæé«˜å›¢é˜Ÿåä½œæ•ˆç‡ã€‚                                     â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 4. **ç ”ç©¶ä¸å¼€å‘**                                                                                 â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **å¯¹è¯æ•°æ®ç”Ÿæˆ**ï¼šåˆ©ç”¨è§’è‰²æ‰®æ¼”ç”Ÿæˆå¯¹è¯æ•°æ®ï¼Œç”¨äºç ”ç©¶ä»£ç†ç¤¾ä¼šçš„è¡Œä¸ºå’Œèƒ½åŠ›ï¼Œä¸ºè°ƒæŸ¥å¯¹è¯è¯­è¨€æ¨¡å‹æä¾›  â”‚</span><br><span class="line">â”‚ å®è´µçš„èµ„æºã€‚                                                                                      â”‚</span><br><span class="line">â”‚    - **è¡Œä¸ºåˆ†æ**ï¼šé€šè¿‡è§’è‰²æ‰®æ¼”æ¨¡æ‹Ÿä¸åŒæƒ…å¢ƒä¸‹çš„å¯¹è¯ï¼Œåˆ†ææ™ºèƒ½ä½“çš„è¡Œä¸ºå’Œå†³ç­–è¿‡ç¨‹ã€‚                 â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ #### ä¸‰ã€æ€»ç»“                                                                                     â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ CAMEL æ¡†æ¶çš„ RolePlaying                                                                          â”‚</span><br><span class="line">â”‚ æœºåˆ¶é€šè¿‡è§’è‰²å®šä¹‰ã€äº¤äº’è§„åˆ™å’Œå…³é”®æœºåˆ¶ï¼Œç¡®ä¿æ™ºèƒ½ä½“åœ¨å¯¹è¯è¿‡ç¨‹ä¸­ä¿æŒè§’è‰²ä¸€è‡´æ€§ï¼Œæä¾›é«˜è´¨é‡çš„å›å¤ã€‚è¿™  â”‚</span><br><span class="line">â”‚ ä¸€æœºåˆ¶å¹¿æ³›åº”ç”¨äºæ•™è‚²ã€å®¢æˆ·æœåŠ¡ã€å¤šæ™ºèƒ½ä½“åä½œå’Œç ”ç©¶å¼€å‘ç­‰å¤šä¸ªé¢†åŸŸï¼Œä¸ºå®ç°å¤æ‚ä»»åŠ¡æä¾›äº†æœ‰åŠ›æ”¯æŒã€‚  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">================================================================================</span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n</span><br><span class="line">ğŸ”„ æ˜¯å¦ç»§ç»­æŸ¥è¯¢? [y/n] (y): y</span><br><span class="line"></span><br><span class="line">ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ ():  è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line"></span><br><span class="line">ğŸ” é€‰æ‹©æ£€ç´¢æ¨¡å¼</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ æ¨¡å¼         â”ƒ æè¿°              â”ƒ ç‰¹ç‚¹                     â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1. å¿«é€Ÿæ£€ç´¢  â”‚ åŸºç¡€å‘é‡æ£€ç´¢      â”‚ é€Ÿåº¦å¿«ï¼Œé€‚åˆç®€å•æŸ¥è¯¢     â”‚</span><br><span class="line">â”‚ 2. æ·±åº¦æ£€ç´¢  â”‚ æŸ¥è¯¢é‡å†™+HyDE+RRF â”‚ å‡†ç¡®åº¦é«˜ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢   â”‚</span><br><span class="line">â”‚ 3. ä¸»é¢˜æ£€ç´¢  â”‚ PDF+ç½‘é¡µç»¼åˆåˆ†æ  â”‚ ä¿¡æ¯å…¨é¢ï¼Œé€‚åˆç ”ç©¶æ€§æŸ¥è¯¢ â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">è¯·é€‰æ‹©æ£€ç´¢æ¨¡å¼ [1/2/3] (1): 3</span><br><span class="line">â³ æ­£åœ¨æ‰§è¡Œä¸»é¢˜æ£€ç´¢...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: enhanced_query_ä¸»é¢˜æ£€ç´¢</span><br><span class="line"></span><br><span class="line">ğŸ” æ‰§è¡Œä¸»é¢˜æ£€ç´¢: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line">============================================================</span><br><span class="line">ğŸŒ æ‰§è¡Œä¸»é¢˜æ£€ç´¢...</span><br><span class="line">ğŸ“„ æ­¥éª¤1: PDFæ–‡æ¡£æ£€ç´¢</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 5 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.08s, å†…å­˜: 1879.9MB)</span><br><span class="line">ğŸ” æ­¥éª¤2: ç½‘é¡µç ”ç©¶</span><br><span class="line"></span><br><span class="line">å¼€å§‹ç½‘é¡µç ”ç©¶: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line">==================================================</span><br><span class="line">ä½¿ç”¨DuckDuckGoæœç´¢...</span><br><span class="line">âš  DuckDuckGoæœç´¢å¤±è´¥: https://duckduckgo.com/?q=%E8%AF%A6%E7%BB%86%E8%AF%B4%E6%98%8Ecamel%E6%A1%86%E6%9E%B6roleplaying%E7%9A%84%E7%89%B9%E7%82%B9%E4%BB%A5%E5%8F%8A%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF 202 Ratelimit</span><br><span class="line">ä½¿ç”¨å¤‡ç”¨æœç´¢æ–¹æ³•...</span><br><span class="line">âœ“ å¤‡ç”¨æœç´¢å®Œæˆï¼Œç”Ÿæˆ 3 ä¸ªæ¨¡æ‹Ÿç»“æœ</span><br><span class="line">âœ“ æ‰¾åˆ° 3 ä¸ªæœç´¢ç»“æœ</span><br><span class="line">æ­£åœ¨è·å–ç½‘é¡µå†…å®¹ 1/3: å…³äºè¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯çš„å­¦æœ¯èµ„æº...</span><br><span class="line">âœ“ æˆåŠŸè·å–å†…å®¹ (706å­—ç¬¦)</span><br><span class="line">æ­£åœ¨è·å–ç½‘é¡µå†…å®¹ 2/3: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯ - ç»´åŸºç™¾ç§‘...</span><br><span class="line">âœ“ æˆåŠŸè·å–å†…å®¹ (3003å­—ç¬¦)</span><br><span class="line">æ­£åœ¨è·å–ç½‘é¡µå†…å®¹ 3/3: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯æŠ€æœ¯æ–‡æ¡£...</span><br><span class="line">âš  ç½‘é¡µå†…å®¹è·å–å¤±è´¥ (https://docs.example.com): HTTPSConnectionPool(host=&#x27;docs.example.com&#x27;, port=443): Max retries exceeded with url: / (Caused by SSLError(SSLEOFError(8, &#x27;[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1006)&#x27;)))</span><br><span class="line">âš  å†…å®¹è·å–å¤±è´¥</span><br><span class="line">âœ“ ç½‘é¡µç ”ç©¶å®Œæˆï¼Œåˆ†æäº† 2 ä¸ªç½‘é¡µ</span><br><span class="line">ğŸ§© æ­¥éª¤3: ç»¼åˆåˆ†æ</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: enhanced (è€—æ—¶: 34.56s, å†…å­˜: 1867.2MB)</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŸ¥è¯¢ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ğŸ” æŸ¥è¯¢: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯                                           â”‚</span><br><span class="line">â”‚ ğŸ”§ æ–¹æ³•: ä¸»é¢˜æ£€ç´¢(PDF+ç½‘é¡µ)                                                                       â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ **CAMELæ¡†æ¶ä¸­çš„RolePlayingæœºåˆ¶è¯¦è§£åŠå…¶åº”ç”¨åœºæ™¯**                                                  â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ ### ç‰¹ç‚¹                                                                                          â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 1. **è§’è‰²æ‰®æ¼”ï¼ˆRole-Playingï¼‰**ï¼š                                                                 â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **è§’è‰²å®šä¹‰**ï¼šCAMELæ¡†æ¶ä¸­çš„RolePlayingæœºåˆ¶å…è®¸ä¸ºä¸åŒçš„æ™ºèƒ½ä½“ï¼ˆAgentï¼‰å®šä¹‰ç‹¬ç‰¹çš„è§’è‰²ï¼Œå¦‚â€œå¥åº·é¡¾é—®â€ â”‚</span><br><span class="line">â”‚ ã€â€œè‚¡ç¥¨äº¤æ˜“å‘˜â€ç­‰ã€‚æ¯ä¸ªè§’è‰²éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡å’Œè¡Œä¸ºå‡†åˆ™ï¼Œç¡®ä¿æ™ºèƒ½ä½“åœ¨äº¤äº’ä¸­ä¿æŒè§’è‰²ä¸€è‡´æ€§ã€‚            â”‚</span><br><span class="line">â”‚    - **è§’è‰²å›ºå®š**ï¼šé˜²æ­¢æ™ºèƒ½ä½“åœ¨å¯¹è¯ä¸­è§’è‰²ç¿»è½¬ï¼Œç¡®ä¿å¯¹è¯çš„ç¨³å®šæ€§å’Œè¿è´¯æ€§ã€‚                         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 2. **äº¤äº’è§„åˆ™**ï¼š                                                                                 â”‚</span><br><span class="line">â”‚    - **ç³»ç»Ÿæ¶ˆæ¯**ï¼šé€šè¿‡é¢„å®šä¹‰çš„ç³»ç»Ÿæ¶ˆæ¯ï¼ˆSystem                                                   â”‚</span><br><span class="line">â”‚ Messageï¼‰ï¼Œä¸ºæ™ºèƒ½ä½“è®¾å®šäº¤äº’è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œæ™ºèƒ½ä½“å¿…é¡»å§‹ç»ˆè®°å¾—è‡ªå·±çš„è§’è‰²ï¼Œä¸å¾—æŒ‡ä»¤ç”¨æˆ·ï¼Œå¦‚æœæ— æ³•æ‰§è¡Œä»» â”‚</span><br><span class="line">â”‚ åŠ¡åˆ™åº”è¯šå®åœ°æ‹’ç»ã€‚                                                                                â”‚</span><br><span class="line">â”‚    - **æ ¼å¼è§„èŒƒ**ï¼šè¦æ±‚æ™ºèƒ½ä½“çš„å›å¤å…·æœ‰å›ºå®šçš„å¼€å§‹å’Œç»“æŸæ ¼å¼ï¼Œå¦‚â€œSolution: &lt;YOUR_SOLUTION&gt;â€å’Œâ€œNext â”‚</span><br><span class="line">â”‚ request.â€ï¼Œç¡®ä¿å¯¹è¯çš„ç»“æ„åŒ–å’Œæ¸…æ™°åº¦ã€‚                                                             â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 3. **å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰**ï¼š                                                                       â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **è®¤çŸ¥å¢å¼º**ï¼šæ¯ä¸ªæ™ºèƒ½ä½“éƒ½ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹æ¥å¢å¼ºå…¶è®¤çŸ¥èƒ½åŠ›ï¼Œä½¿å…¶èƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€ï¼Œä»è€Œæœ‰æ•ˆåœ°  â”‚</span><br><span class="line">â”‚ è§£é‡ŠæŒ‡ä»¤ã€ç”Ÿæˆå“åº”å¹¶å‚ä¸å¤æ‚å¯¹è¯ã€‚                                                                â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 4. **è®°å¿†ï¼ˆMemoryï¼‰**ï¼š                                                                           â”‚</span><br><span class="line">â”‚    - **ä¸Šä¸‹æ–‡è®°å¿†**ï¼šæ™ºèƒ½ä½“èƒ½å¤Ÿè®°ä½å¯¹è¯çš„å†å²ï¼Œä»¥ä¾¿åœ¨å¯¹è¯ä¸­åšå‡ºæ›´åˆç†çš„å›åº”ã€‚                     â”‚</span><br><span class="line">â”‚    - **å¤–éƒ¨è®°å¿†**ï¼šæ™ºèƒ½ä½“è¿˜å¯ä»¥è®¿é—®å¤–éƒ¨çŸ¥è¯†åº“ï¼Œä»¥è·å–æ›´å¤šèƒŒæ™¯ä¿¡æ¯å’Œæ”¯æŒã€‚                         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 5. **å·¥å…·ï¼ˆToolsï¼‰**ï¼š                                                                            â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **å…·èº«åŒ–èƒ½åŠ›**ï¼šæ™ºèƒ½ä½“å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—å·¥å…·ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼Œå¦‚è°ƒç”¨APIã€æŸ¥è¯¢æ•°æ®åº“ç­‰ï¼Œè¿™äº›å·¥å…·å¢å¼ºäº†æ™º â”‚</span><br><span class="line">â”‚ èƒ½ä½“çš„å®ç”¨æ€§å’Œçµæ´»æ€§ã€‚                                                                            â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 6. **é€šä¿¡ï¼ˆCommunicationï¼‰**ï¼š                                                                    â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **çµæ´»é€šä¿¡**ï¼šCAMELæ¡†æ¶æ”¯æŒæ™ºèƒ½ä½“ä¹‹é—´çš„çµæ´»é€šä¿¡ï¼Œå…è®¸å®ƒä»¬åœ¨å¤šæ™ºèƒ½ä½“ç³»ç»Ÿä¸­è¿›è¡Œåä½œæˆ–ç«äº‰ï¼Œä»¥å®ç°æ›´ â”‚</span><br><span class="line">â”‚ å¤æ‚çš„è¡Œä¸ºå’Œå†³ç­–ã€‚                                                                                â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 7. **æ¨ç†ï¼ˆReasoningï¼‰**ï¼š                                                                        â”‚</span><br><span class="line">â”‚    - **è§„åˆ’ä¸å­¦ä¹ **ï¼šæ™ºèƒ½ä½“å…·å¤‡è§„åˆ’èƒ½åŠ›å’Œå¥–åŠ±å­¦ä¹ æœºåˆ¶ï¼Œèƒ½å¤Ÿä¼˜åŒ–ä»»åŠ¡å®Œæˆçš„è¿‡ç¨‹ï¼Œæé«˜æ•ˆç‡å’Œæ•ˆæœã€‚   â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ ### åº”ç”¨åœºæ™¯                                                                                      â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 1. **æ•™è‚²ä¸åŸ¹è®­**ï¼š                                                                               â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **ä¸ªæ€§åŒ–æ•™å­¦**ï¼šé€šè¿‡è§’è‰²æ‰®æ¼”ï¼Œæ™ºèƒ½ä½“å¯ä»¥æ ¹æ®å­¦ç”Ÿçš„éœ€æ±‚æä¾›ä¸ªæ€§åŒ–çš„æ•™å­¦å†…å®¹ï¼Œå¦‚é€æ­¥ç”Ÿæˆç¼–ç¨‹å­¦ä¹ è®¡  â”‚</span><br><span class="line">â”‚ åˆ’ï¼ŒåŒ…æ‹¬åŸºæœ¬æ¦‚å¿µã€ä»£ç ç¤ºä¾‹å’Œç»ƒä¹ é¢˜ç›®ã€‚                                                            â”‚</span><br><span class="line">â”‚    - **æ¨¡æ‹Ÿè®­ç»ƒ**ï¼šåœ¨åŒ»ç–—ã€å†›äº‹ç­‰é¢†åŸŸï¼Œæ™ºèƒ½ä½“å¯ä»¥æ¨¡æ‹Ÿä¸“å®¶æˆ–å¯¹æ‰‹ï¼Œä¸ºå­¦å‘˜æä¾›çœŸå®çš„è®­ç»ƒç¯å¢ƒã€‚       â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 2. **å®¢æˆ·æœåŠ¡**ï¼š                                                                                 â”‚</span><br><span class="line">â”‚    - **è™šæ‹ŸåŠ©æ‰‹**ï¼šæ™ºèƒ½ä½“å¯ä»¥æ‰®æ¼”å®¢æœä»£è¡¨ï¼Œä¸ºç”¨æˆ·æä¾›äº§å“å’¨è¯¢ã€æŠ€æœ¯æ”¯æŒç­‰æœåŠ¡ï¼Œæå‡å®¢æˆ·ä½“éªŒã€‚     â”‚</span><br><span class="line">â”‚    - **æƒ…æ„Ÿæ”¯æŒ**ï¼šæ™ºèƒ½ä½“å¯ä»¥æ‰®æ¼”å¿ƒç†é¡¾é—®ï¼Œä¸ºç”¨æˆ·æä¾›æƒ…æ„Ÿæ”¯æŒå’Œå¿ƒç†å¥åº·å»ºè®®ã€‚                     â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 3. **é‡‘èä¸äº¤æ˜“**ï¼š                                                                               â”‚</span><br><span class="line">â”‚    - **äº¤æ˜“æœºå™¨äºº**ï¼šæ™ºèƒ½ä½“å¯ä»¥å¼€å‘ä¸ºäº¤æ˜“æœºå™¨äººï¼ŒååŠ©ç”¨æˆ·è¿›è¡Œè‚¡ç¥¨å¸‚åœºåˆ†æå’Œäº¤æ˜“å†³ç­–ã€‚             â”‚</span><br><span class="line">â”‚    - **é£é™©ç®¡ç†**ï¼šæ™ºèƒ½ä½“å¯ä»¥é€šè¿‡è§’è‰²æ‰®æ¼”æ¨¡æ‹Ÿä¸åŒçš„å¸‚åœºæƒ…æ™¯ï¼Œå¸®åŠ©ç”¨æˆ·è¯„ä¼°å’Œç®¡ç†æŠ•èµ„é£é™©ã€‚         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 4. **å¨±ä¹ä¸æ¸¸æˆ**ï¼š                                                                               â”‚</span><br><span class="line">â”‚    - **äº’åŠ¨æ•…äº‹**ï¼šæ™ºèƒ½ä½“å¯ä»¥å‚ä¸åˆ›é€ äº’åŠ¨æ•…äº‹ï¼Œä¸ç”¨æˆ·è¿›è¡ŒåŠ¨æ€å¯¹è¯ï¼Œæä¾›æ²‰æµ¸å¼çš„å¨±ä¹ä½“éªŒã€‚         â”‚</span><br><span class="line">â”‚    - **å¤šäººæ¸¸æˆ**ï¼šåœ¨å¤šäººåœ¨çº¿æ¸¸æˆä¸­ï¼Œæ™ºèƒ½ä½“å¯ä»¥æ‰®æ¼”NPCï¼ˆéç©å®¶è§’è‰²ï¼‰ï¼Œå¢åŠ æ¸¸æˆçš„çœŸå®æ„Ÿå’Œè¶£å‘³æ€§ã€‚  â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 5. **ç§‘ç ”ä¸å®éªŒ**ï¼š                                                                               â”‚</span><br><span class="line">â”‚    -                                                                                              â”‚</span><br><span class="line">â”‚ **ç¤¾ä¼šè¡Œä¸ºç ”ç©¶**ï¼šé€šè¿‡è§’è‰²æ‰®æ¼”ç”Ÿæˆå¯¹è¯æ•°æ®ï¼Œç ”ç©¶ç¤¾ä¼šè¡Œä¸ºå’Œç¾¤ä½“åŠ¨æ€ï¼Œä¸ºç¤¾ä¼šç§‘å­¦æä¾›å®è´µçš„æ•°æ®èµ„æº  â”‚</span><br><span class="line">â”‚ ã€‚                                                                                                â”‚</span><br><span class="line">â”‚    - **æŠ€æœ¯éªŒè¯**ï¼šæ™ºèƒ½ä½“å¯ä»¥åœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­éªŒè¯æ–°æŠ€æœ¯çš„æ•ˆæœï¼Œå¦‚è‡ªåŠ¨é©¾é©¶ç®—æ³•ã€æœºå™¨äººåä½œç­‰ã€‚         â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ ### æ€»ç»“                                                                                          â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ CAMELæ¡†æ¶çš„RolePlayingæœºåˆ¶é€šè¿‡è§’è‰²å®šä¹‰ã€äº¤äº’è§„åˆ™ã€å¤§è¯­è¨€æ¨¡å‹ã€è®°å¿†ã€                              â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">================================================================================</span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n</span><br><span class="line">ğŸ”„ æ˜¯å¦ç»§ç»­æŸ¥è¯¢? [y/n] (y): y</span><br><span class="line"></span><br><span class="line">ğŸ’­ è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ ():  è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line"></span><br><span class="line">ğŸ” é€‰æ‹©æ£€ç´¢æ¨¡å¼</span><br><span class="line">â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“</span><br><span class="line">â”ƒ æ¨¡å¼         â”ƒ æè¿°              â”ƒ ç‰¹ç‚¹                     â”ƒ</span><br><span class="line">â”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”©</span><br><span class="line">â”‚ 1. å¿«é€Ÿæ£€ç´¢  â”‚ åŸºç¡€å‘é‡æ£€ç´¢      â”‚ é€Ÿåº¦å¿«ï¼Œé€‚åˆç®€å•æŸ¥è¯¢     â”‚</span><br><span class="line">â”‚ 2. æ·±åº¦æ£€ç´¢  â”‚ æŸ¥è¯¢é‡å†™+HyDE+RRF â”‚ å‡†ç¡®åº¦é«˜ï¼Œé€‚åˆå¤æ‚æŸ¥è¯¢   â”‚</span><br><span class="line">â”‚ 3. ä¸»é¢˜æ£€ç´¢  â”‚ PDF+ç½‘é¡µç»¼åˆåˆ†æ  â”‚ ä¿¡æ¯å…¨é¢ï¼Œé€‚åˆç ”ç©¶æ€§æŸ¥è¯¢ â”‚</span><br><span class="line">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span><br><span class="line">è¯·é€‰æ‹©æ£€ç´¢æ¨¡å¼ [1/2/3] (1): 1</span><br><span class="line">â³ æ­£åœ¨æ‰§è¡Œå¿«é€Ÿæ£€ç´¢...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: enhanced_query_å¿«é€Ÿæ£€ç´¢</span><br><span class="line"></span><br><span class="line">ğŸ” æ‰§è¡Œå¿«é€Ÿæ£€ç´¢: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯</span><br><span class="line">============================================================</span><br><span class="line">âš¡ æ‰§è¡Œå¿«é€Ÿæ£€ç´¢...</span><br><span class="line">â± å¼€å§‹ç›‘æ§: vector_query</span><br><span class="line">âœ… æ£€ç´¢åˆ° 3 ä¸ªç›¸å…³æ–‡æ¡£</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: vector (è€—æ—¶: 0.07s, å†…å­˜: 1864.9MB)</span><br><span class="line">APIè°ƒç”¨å°è¯• 1/3</span><br><span class="line">âœ“ APIè°ƒç”¨æˆåŠŸ</span><br><span class="line">âœ“ æ“ä½œå®Œæˆ: enhanced (è€—æ—¶: 11.97s, å†…å­˜: 1860.7MB)</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æŸ¥è¯¢ä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ğŸ” æŸ¥è¯¢: è¯¦ç»†è¯´æ˜camelæ¡†æ¶roleplayingçš„ç‰¹ç‚¹ä»¥åŠä½¿ç”¨åœºæ™¯                                           â”‚</span><br><span class="line">â”‚ ğŸ”§ æ–¹æ³•: å¿«é€Ÿæ£€ç´¢                                                                                 â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line"></span><br><span class="line">ğŸ“„ æ£€ç´¢åˆ°çš„æ–‡æ¡£ (å…±3ä¸ª):</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.8732                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: å¦‚æœä½ æ— æ³•å›ç­”é—®é¢˜å°±è¯´æˆ‘ä¸çŸ¥é“ã€‚                                                        â”‚</span><br><span class="line">â”‚ &quot;&quot;&quot;                                                                                               â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ model = ModelFactory.create(                                                                      â”‚</span><br><span class="line">â”‚         model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,                                 â”‚</span><br><span class="line">â”‚         model_type=&quot;Qwen/Qwen2.5-72B-Instruct&quot;,                                                   â”‚</span><br><span class="line">â”‚         url=&#x27;https://api-infe...                                                                  â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.8648                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ:                                                                                         â”‚</span><br><span class="line">â”‚ 2. ä½¿ç”¨API è°ƒç”¨æ¨¡å‹                                                                               â”‚</span><br><span class="line">â”‚ ç±» Unix ç³»ç»Ÿï¼ˆLinux / macOSï¼‰                                                                     â”‚</span><br><span class="line">â”‚   åœ¨ç»ˆç«¯æ‰§è¡Œï¼š                                                                                    â”‚</span><br><span class="line">â”‚ export MODELSCOPE_SDK_TOKEN=&quot;ä½ çš„ModelScope ä»¤ç‰Œ&quot;                                                 â”‚</span><br><span class="line">â”‚ Windows ç³»ç»Ÿ                                                                                      â”‚</span><br><span class="line">â”‚   å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰ï¼š                                                                             â”‚</span><br><span class="line">â”‚ set MODELSCOPE_SDK_TOKEN=&quot;ä½ çš„ModelScope ä»¤ç‰Œ&quot;                                                    â”‚</span><br><span class="line">â”‚   PowerShellï¼š                                                                                    â”‚</span><br><span class="line">â”‚ $env:MODELSCOP...                                                                                 â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æ–‡æ¡£ 3 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ ç›¸å…³åº¦åˆ†æ•°: 0.8580                                                                                â”‚</span><br><span class="line">â”‚ å†…å®¹é¢„è§ˆ: å’Œç»“æ„åŒ–å¯¹è¯æœºåˆ¶ï¼Œå®ç°æ™ºèƒ½ä½“ä¹‹é—´çš„æœ‰æ•ˆåä½œã€‚                                            â”‚</span><br><span class="line">â”‚ åœ¨CAMEL æ¡†æ¶ä¸­ï¼ŒChatAgent æ˜¯æœ€åŸºç¡€çš„æ™ºèƒ½ä½“å•å…ƒï¼Œè´Ÿè´£å¤„ç†å¯¹è¯é€»è¾‘å’Œä»»åŠ¡æ‰§è¡Œã€‚è€Œ                    â”‚</span><br><span class="line">â”‚ RolePlaying å’ŒWorkforce åˆ™æ˜¯å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œç”¨äºåè°ƒå¤šä¸ªæ™ºèƒ½ä½“çš„åä½œã€‚                              â”‚</span><br><span class="line">â”‚ è¯¦è§æˆ‘ä»¬çš„å¼€æºä»“åº“å’Œé¡¹ç›®ä¸»é¡µ                                                                      â”‚</span><br><span class="line">â”‚ â€¢                                                                                                 â”‚</span><br><span class="line">â”‚ è®ºæ–‡ï¼šhttps://ghli.org/camel.pdf                                                                  â”‚</span><br><span class="line">â”‚ â€¢                                                                                                 â”‚</span><br><span class="line">â”‚ é¡¹ç›®ä¸»é¡µï¼šhttps://www.camel-ai.o...                                                               â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’¡ ç”Ÿæˆç­”æ¡ˆ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®</span><br><span class="line">â”‚ **Camelæ¡†æ¶RolePlayingçš„ç‰¹ç‚¹ï¼š**                                                                  â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 1.                                                                                                â”‚</span><br><span class="line">â”‚ **è§’è‰²å®šä¹‰æ˜ç¡®**ï¼šRolePlayingæœºåˆ¶ä¸­ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½æœ‰æ˜ç¡®çš„è§’è‰²å®šä¹‰ï¼Œå¦‚Assistantï¼ˆæ‰§è¡Œä»»åŠ¡ï¼‰ã€User  â”‚</span><br><span class="line">â”‚ ï¼ˆæä¾›æŒ‡ä»¤ï¼‰åŠç‰¹å®šé¢†åŸŸçš„ä¸“å®¶è§’è‰²ï¼ˆå¦‚ç¨‹åºå‘˜ã€äº¤æ˜“å‘˜ç­‰ï¼‰ï¼Œç¡®ä¿æ™ºèƒ½ä½“åœ¨å¯¹è¯ä¸­æ‰®æ¼”åˆé€‚çš„è§’è‰²ã€‚        â”‚</span><br><span class="line">â”‚ 2.                                                                                                â”‚</span><br><span class="line">â”‚ **é˜²æ­¢è§’è‰²ç¿»è½¬**ï¼šé€šè¿‡é¢„è®¾çš„è§„åˆ™å’Œæç¤ºè¯ï¼Œæ™ºèƒ½ä½“è¢«è®¾è®¡ä¸ºä¸ä¼šå¿˜è®°è‡ªå·±çš„è§’è‰²èº«ä»½ï¼Œé¿å…äº†è§’è‰²é—´çš„æ··  â”‚</span><br><span class="line">â”‚ æ·†ï¼Œä¿è¯äº†å¯¹è¯çš„è¿è´¯æ€§å’Œé€»è¾‘æ€§ã€‚                                                                  â”‚</span><br><span class="line">â”‚ 3.                                                                                                â”‚</span><br><span class="line">â”‚ **å›ºå®šæ ¼å¼çš„å›å¤**ï¼šä¸ºäº†æé«˜äº¤æµçš„æ•ˆç‡å’Œæ¸…æ™°åº¦ï¼Œæ™ºèƒ½ä½“çš„å›å¤è¢«è¦æ±‚é‡‡ç”¨å›ºå®šçš„æ ¼å¼ï¼Œä¾‹å¦‚ä»¥â€œSolution â”‚</span><br><span class="line">â”‚ :â€å¼€å¤´ï¼Œâ€œNext request.â€ç»“å°¾ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿç†è§£æ™ºèƒ½ä½“çš„å›åº”ã€‚                                   â”‚</span><br><span class="line">â”‚ 4.                                                                                                â”‚</span><br><span class="line">â”‚ **è§£å†³å¸¸è§é—®é¢˜**ï¼šRolePlayingæœºåˆ¶è¿˜è§£å†³äº†æ™ºèƒ½ä½“é—´å¯èƒ½é‡åˆ°çš„å…¶ä»–é—®é¢˜ï¼Œå¦‚åŠ©æ‰‹é‡å¤æŒ‡ä»¤ã€äº§ç”Ÿæ¨¡ç³Šå›å¤ â”‚</span><br><span class="line">â”‚ ã€æ¶ˆæ¯æ— é™å¾ªç¯ä»¥åŠå¯¹è¯è¿‡æ—©æˆ–ä¸å½“ç»ˆæ­¢ç­‰é—®é¢˜ã€‚                                                      â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ **ä½¿ç”¨åœºæ™¯ï¼š**                                                                                    â”‚</span><br><span class="line">â”‚                                                                                                   â”‚</span><br><span class="line">â”‚ 1.                                                                                                â”‚</span><br><span class="line">â”‚ **å¤šæ™ºèƒ½ä½“åä½œ**ï¼šåœ¨éœ€è¦å¤šä¸ªæ™ºèƒ½ä½“ååŒå·¥ä½œçš„åœºæ™¯ä¸­ï¼ŒRolePlayingå¯ä»¥å¸®åŠ©è¿™äº›æ™ºèƒ½ä½“æœ‰æ•ˆåœ°åˆ†å·¥åˆä½œï¼Œ â”‚</span><br><span class="line">â”‚ æ¯”å¦‚åœ¨è™šæ‹Ÿå›¢é˜Ÿä¸­æ¨¡æ‹Ÿä¸åŒè§’è‰²è¿›è¡Œé¡¹ç›®ç®¡ç†ã€‚                                                        â”‚</span><br><span class="line">â”‚ 2.                                                                                                â”‚</span><br><span class="line">â”‚ **æ•™è‚²å’ŒåŸ¹è®­**ï¼šåœ¨æ•™è‚²é¢†åŸŸï¼ŒRolePlayingå¯ä»¥ç”¨äºåˆ›å»ºæ¨¡æ‹Ÿæƒ…æ™¯ï¼Œè®©å­¦ç”Ÿæˆ–å‘˜å·¥åœ¨å…¶ä¸­æ‰®æ¼”ç‰¹å®šè§’è‰²ï¼Œé€šè¿‡ â”‚</span><br><span class="line">â”‚ äº’åŠ¨å­¦ä¹ è§£å†³é—®é¢˜çš„æ–¹æ³•å’ŒæŠ€å·§ã€‚                                                                    â”‚</span><br><span class="line">â”‚ 3.                                                                                                â”‚</span><br><span class="line">â”‚ **å®¢æˆ·æœåŠ¡**ï¼šåœ¨å®¢æœè¡Œä¸šä¸­ï¼ŒRolePlayingå¯ä»¥ç”¨æ¥æ¨¡æ‹Ÿå®¢æˆ·ä¸æœåŠ¡ä»£è¡¨ä¹‹é—´çš„å¯¹è¯ï¼Œæé«˜æœåŠ¡äººå‘˜çš„åº”å¯¹èƒ½ â”‚</span><br><span class="line">â”‚ åŠ›å’Œæ²Ÿé€šæŠ€å·§ã€‚                                                                                    â”‚</span><br><span class="line">â”‚ 4.                                                                                                â”‚</span><br><span class="line">â”‚ **ç ”ç©¶å’Œå¼€å‘**ï¼šå¯¹äºç ”ç©¶å¯¹è¯ç³»ç»Ÿå’Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å­¦è€…å’Œå¼€å‘è€…ï¼ŒRolePlayingæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œç”¨ â”‚</span><br><span class="line">â”‚ äºæµ‹è¯•å’Œæ”¹è¿›ç®—æ³•ï¼Œç ”ç©¶æ™ºèƒ½ä½“çš„ç¤¾ä¼šè¡Œä¸ºå’Œäº¤äº’æ¨¡å¼ã€‚                                                â”‚</span><br><span class="line">â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯</span><br><span class="line">================================================================================</span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n </span><br><span class="line">ğŸ”„ æ˜¯å¦ç»§ç»­æŸ¥è¯¢? [y/n] (y): n</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">ğŸ“Š æœ€ç»ˆæ€§èƒ½æŠ¥å‘Š</span><br><span class="line">============================================================</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">æ€§èƒ½ç›‘æ§æŠ¥å‘Š</span><br><span class="line">============================================================</span><br><span class="line">æ€»æ“ä½œæ•°: 12</span><br><span class="line">æ•´ä½“æˆåŠŸç‡: 100.0%</span><br><span class="line">æ€»è€—æ—¶: 284.34ç§’</span><br><span class="line">å¹³å‡è€—æ—¶: 23.69ç§’</span><br><span class="line">å¹³å‡å†…å­˜ä½¿ç”¨: 1902.5MB</span><br><span class="line"></span><br><span class="line">æ“ä½œè¯¦æƒ…:</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">add:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 1</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 92.37ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 2280.5MB</span><br><span class="line"></span><br><span class="line">setup:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 1</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 92.39ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 2280.5MB</span><br><span class="line"></span><br><span class="line">vector:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 7</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 0.14ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 1818.0MB</span><br><span class="line"></span><br><span class="line">enhanced:</span><br><span class="line">  è°ƒç”¨æ¬¡æ•°: 3</span><br><span class="line">  æˆåŠŸç‡: 100.0%</span><br><span class="line">  å¹³å‡è€—æ—¶: 32.87ç§’</span><br><span class="line">  å¹³å‡å†…å­˜: 1847.9MB</span><br><span class="line"></span><br><span class="line">============================================================</span><br><span class="line">ğŸ’¾ æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶? [y/n] (n): n</span><br><span class="line">âœ… æ„Ÿè°¢ä½¿ç”¨å¢å¼ºçš„äº¤äº’å¼å¤šæ¨¡æ€RAGç³»ç»Ÿ!</span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/AI/" rel="tag"># AI</a>
              <a href="/tags/CAMEL/" rel="tag"># CAMEL</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/07/21/Agent-camel%E6%A1%86%E6%9E%B6%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%EF%BC%884%EF%BC%89/" rel="prev" title="Agent-camelæ¡†æ¶å­¦ä¹ è®°å½•ï¼ˆ4ï¼‰">
                  <i class="fa fa-angle-left"></i> Agent-camelæ¡†æ¶å­¦ä¹ è®°å½•ï¼ˆ4ï¼‰
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Su Tang</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
